<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mine-MuYan</title>
  
  <subtitle>Welcome.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://Mine-MuYan.github.com/"/>
  <updated>2020-03-24T06:42:08.723Z</updated>
  <id>http://Mine-MuYan.github.com/</id>
  
  <author>
    <name>Mine-MuYan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SQL赏析</title>
    <link href="http://Mine-MuYan.github.com/2019/05/23/SQL%E8%B5%8F%E6%9E%90/"/>
    <id>http://Mine-MuYan.github.com/2019/05/23/SQL赏析/</id>
    <published>2019-05-23T07:21:11.000Z</published>
    <updated>2020-03-24T06:42:08.723Z</updated>
    
    <content type="html"><![CDATA[<p><strong>整理了一些sql，比较高效…</strong><br><a id="more"></a></p><h3 id="获取订单表中各类状态的条数"><a href="#获取订单表中各类状态的条数" class="headerlink" title="获取订单表中各类状态的条数"></a>获取订单表中各类状态的条数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">sum( CASE WHEN order_status IN ( 1, 2 ) THEN 1 ELSE 0 END ) AS wait,</span><br><span class="line">sum( CASE WHEN order_status = 3 THEN 1 ELSE 0 END ) AS shipping,</span><br><span class="line">sum( CASE WHEN order_status = 4 THEN 1 ELSE 0 END ) AS receiving,</span><br><span class="line">sum( CASE WHEN order_status IN ( 5, 6 ) THEN 1 ELSE 0 END ) AS finish,</span><br><span class="line">sum( CASE WHEN order_status IN ( 7, 90, 91, 92, 93, 94 ) THEN 1 ELSE 0 END ) AS closed,</span><br><span class="line">count( order_status ) AS `total`</span><br><span class="line">FROM</span><br><span class="line">table_name</span><br><span class="line">WHERE</span><br><span class="line">user_id = 47 </span><br><span class="line">AND delete_time = 0</span><br></pre></td></tr></table></figure><p>### </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;整理了一些sql，比较高效…&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
      <category term="MySQL" scheme="http://Mine-MuYan.github.com/categories/MySQL/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>解决安装Xdebug后访问本地项目特别慢</title>
    <link href="http://Mine-MuYan.github.com/2019/05/10/%E8%A7%A3%E5%86%B3%E5%AE%89%E8%A3%85Xdebug%E5%90%8E%E8%AE%BF%E9%97%AE%E6%9C%AC%E5%9C%B0%E9%A1%B9%E7%9B%AE%E7%89%B9%E5%88%AB%E6%85%A2/"/>
    <id>http://Mine-MuYan.github.com/2019/05/10/解决安装Xdebug后访问本地项目特别慢/</id>
    <published>2019-05-10T09:37:00.000Z</published>
    <updated>2019-05-10T09:46:18.788Z</updated>
    
    <content type="html"><![CDATA[<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Xdebug]</span><br><span class="line">zend_extension = <span class="string">"E:\SoftWare\php\php-73\ext\php_xdebug-2.7.2-7.3-vc15-nts-x86_64.dll"</span></span><br><span class="line">xdebug.remote_enable = <span class="number">1</span></span><br><span class="line">xdebug.remote_host = <span class="string">"127.0.0.1"</span></span><br><span class="line">xdebug.remote_port = <span class="number">9009</span></span><br><span class="line">xdebug.remote_autostart = <span class="number">1</span></span><br><span class="line">xdebug.remote_handler = <span class="string">"dbgp"</span></span><br><span class="line">xdebug.idekey = PHPSTORM</span><br><span class="line">xdebug.profiler_enable = <span class="number">0</span></span><br><span class="line">xdebug.profiler_enable_trigger = <span class="number">1</span></span><br><span class="line">xdebug.default_enable = <span class="string">"Off"</span></span><br><span class="line">xdebug.remote_mode = req</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://stackoverflow.com/questions/17736304/enabling-xdebug-remote-debug-makes-apache-server-very-slow" target="_blank" rel="noopener">参考链接</a></p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ol><li>设置<code>xdebug.remote_enable = 0</code>或者<code>xdebug.remote_autostart = 0</code>，关掉这两项中的任意一项，就不会出现很慢的情况，但是关掉后就不能监听断点就行调试了;</li><li><code>xdebug.remote_host</code>改成<code>127.0.0.1</code>，而不是<code>localhost</code>，phpstorm中的设置也是；</li><li><code>xdebug.remote_port</code>只要是一个可用的端口并和phpstorm中的配置一样就行；</li><li>剩下的配置的，按照配置就行了，不要问为什么，这样做才不会这么慢。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span cl
      
    
    </summary>
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu 的一些命令</title>
    <link href="http://Mine-MuYan.github.com/2019/03/22/ubuntu%20%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/"/>
    <id>http://Mine-MuYan.github.com/2019/03/22/ubuntu 的一些命令/</id>
    <published>2019-03-22T10:20:00.000Z</published>
    <updated>2019-03-22T10:25:37.228Z</updated>
    
    <content type="html"><![CDATA[<h4 id="关于用户"><a href="#关于用户" class="headerlink" title="关于用户"></a>关于用户</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 切换成root</span></span><br><span class="line">sudo su#这个时候输入的是lql的密码</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输入root密码切换root用户</span></span><br><span class="line">su - 或 su root #这个时候输入的是root的密码</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重置root密码</span></span><br><span class="line">sudo passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改lql的权限为root</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新增用户</span></span><br><span class="line">adduser lql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新增用户组</span></span><br><span class="line">groupadd webGroup</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将用户添加到用户组中</span></span><br><span class="line">usermod -g root lql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改文件的所有者  chown 账号名称 文件或目录（-R递归）</span></span><br><span class="line">chown -R lql web</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改文件的用户组  chgrp  组名   文件或目录</span></span><br><span class="line">chgrp webGroup web</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给目录配置权限</span></span><br><span class="line">chmod -R 2775 web</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2 - 打开 setGID 位，意味着新创建的子文件继承与目录相同的组，新创建的子目录继承父目录的 setGID 位。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 7 - 为所有者提供 rwx 权限。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 7 - 给组 rwx 权限。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5 - 为其他人提供 rx 权限。</span></span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="修改默认启动级别"><a href="#修改默认启动级别" class="headerlink" title="修改默认启动级别"></a>修改默认启动级别</h4><p>假设现在在图形用户界面，打开终端，输入如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl set-default multi-user.target</span><br></pre></td></tr></table></figure><p>现在如果想进入图形用户界面（仅进入一次，重启系统后仍然会进入命令行模式），可执行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start lightdm</span><br></pre></td></tr></table></figure><p>　　如果想设置为系统启动后默认进入图形用户界面，执行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl set-default graphical.target</span><br></pre></td></tr></table></figure><p>　　然后执行reboot命令重启系统即可。</p><h4 id="更换镜像源"><a href="#更换镜像源" class="headerlink" title="更换镜像源"></a>更换镜像源</h4><ol><li><p>备份默认源地址</p><p><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup</code></p></li><li><p>删除<code>sources.list</code>文件，并新建此文件，粘贴下面这些内容：</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"> deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"> deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"> deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"> deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 预发布软件源，不建议启用</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br></pre></td></tr></table></figure></li><li><p>更新源</p><p><code>apt-get update</code></p></li><li><p>软件操作的相关命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update  更新源 </span><br><span class="line">sudo apt-get install package 安装包 </span><br><span class="line">sudo apt-get remove package 删除包 </span><br><span class="line">sudo apt-cache search package 搜索软件包 </span><br><span class="line">sudo apt-cache show package  获取包的相关信息，如说明、大小、版本等 </span><br><span class="line">sudo apt-get install package --reinstall   重新安装包 </span><br><span class="line">sudo apt-get -f install   修复安装 </span><br><span class="line">sudo apt-get remove package --purge 删除包，包括配置文件等 </span><br><span class="line">sudo apt-get build-dep package 安装相关的编译环境 </span><br><span class="line">sudo apt-get upgrade 更新已安装的包</span><br><span class="line">sudo apt-get dist-upgrade 升级系统 </span><br><span class="line">sudo apt-cache depends package 了解使用该包依赖那些包</span><br><span class="line">sudo apt-cache rdepends package 查看该包被哪些包依赖</span><br><span class="line">sudo apt-get source package  下载该包的源代码</span><br><span class="line">sudo apt-get clean &amp;&amp; sudo apt-get autoclean 清理无用的包</span><br><span class="line">sudo apt-get check 检查是否有损坏的依赖</span><br></pre></td></tr></table></figure></li></ol><h4 id="xshell-xftp登陆Win10-Linux子系统"><a href="#xshell-xftp登陆Win10-Linux子系统" class="headerlink" title="xshell/xftp登陆Win10 Linux子系统"></a>xshell/xftp登陆Win10 Linux子系统</h4><ol><li><p>备份文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ssh</span><br><span class="line">sudo cp sshd_config sshd_config.bak</span><br></pre></td></tr></table></figure></li><li><p>修改sshd_config</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim sshd_config</span><br><span class="line">Port 2233  #修改端口</span><br><span class="line">ListenAddress 0.0.0.0  #打开本地监听</span><br><span class="line"><span class="meta">#</span><span class="bash">StrictModes yes  <span class="comment">#注释掉</span></span></span><br><span class="line">PasswordAuthentication yes  #允许密码登陆</span><br></pre></td></tr></table></figure></li><li><p>重启ssh</p><p><code>sudo service ssh restart</code></p></li><li><p>xshell/xftp登录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> xshell连接</span></span><br><span class="line">ip：127.0.0.1</span><br><span class="line">协议：ssh</span><br><span class="line">端口：2233</span><br><span class="line">-------</span><br><span class="line"><span class="meta">#</span><span class="bash"> xftp连接</span></span><br><span class="line">ip：127.0.0.1</span><br><span class="line">协议：sftp</span><br><span class="line">端口：22</span><br><span class="line">方式：password</span><br></pre></td></tr></table></figure></li></ol><h4 id="安装nginx-php-mysql"><a href="#安装nginx-php-mysql" class="headerlink" title="安装nginx+php+mysql"></a>安装nginx+php+mysql</h4><h5 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h5><ol><li><p>安装</p><p><code>apt-get -y install nginx</code></p><p>nginx默认根目录 <code>/usr/share/nginx/html</code></p></li><li><p>修改端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 找到nginx.conf</span></span><br><span class="line">whereis nginx.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> 到 /etc/nginx 目录下，在nginx.conf文件中没看到listen 80的字样，</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到/etc/nginx/sites-enabled/找到default文件</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen 80 default_server;</span><br><span class="line">        listen [::]:80 default_server;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改80为888</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启nginx</span></span><br><span class="line">service nginx stop</span><br><span class="line">service nginx start</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 8881;</span><br><span class="line">        listen [::]:8881;</span><br><span class="line"></span><br><span class="line">        root /usr/share/nginx/web/yifu/public;</span><br><span class="line">        index index.html index.htm index.nginx-debian.html index.php;</span><br><span class="line"></span><br><span class="line">        server_name _;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                try_files $uri $uri/ =404;</span><br><span class="line">        &#125;</span><br><span class="line">        location ~ \.php$ &#123;</span><br><span class="line">                include snippets/fastcgi-php.conf;</span><br><span class="line">                fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;关于用户&quot;&gt;&lt;a href=&quot;#关于用户&quot; class=&quot;headerlink&quot; title=&quot;关于用户&quot;&gt;&lt;/a&gt;关于用户&lt;/h4&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 切换成root&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo su		#这个时候输入的是lql的密码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 输入root密码切换root用户&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;su - 或 su root 	#这个时候输入的是root的密码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 重置root密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo passwd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 更改lql的权限为root&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 新增用户&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;adduser lql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 新增用户组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;groupadd webGroup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 将用户添加到用户组中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;usermod -g root lql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 更改文件的所有者  chown 账号名称 文件或目录（-R递归）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chown -R lql web&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 更改文件的用户组  chgrp  组名   文件或目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chgrp webGroup web&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 给目录配置权限&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod -R 2775 web&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 2 - 打开 setGID 位，意味着新创建的子文件继承与目录相同的组，新创建的子目录继承父目录的 setGID 位。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 7 - 为所有者提供 rwx 权限。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 7 - 给组 rwx 权限。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 5 - 为其他人提供 rx 权限。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="linux" scheme="http://Mine-MuYan.github.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>xshell/xftp登陆Win10 Linux子系统</title>
    <link href="http://Mine-MuYan.github.com/2019/01/23/xshell-xftp%E7%99%BB%E9%99%86Win10%20Linux%E5%AD%90%E7%B3%BB%E7%BB%9F/"/>
    <id>http://Mine-MuYan.github.com/2019/01/23/xshell-xftp登陆Win10 Linux子系统/</id>
    <published>2019-01-23T03:51:49.000Z</published>
    <updated>2019-01-24T07:07:43.139Z</updated>
    
    <content type="html"><![CDATA[<h3 id="备份文件"><a href="#备份文件" class="headerlink" title="备份文件"></a>备份文件</h3>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ssh</span><br><span class="line">sudo cp sshd_config sshd_config.bak</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="修改sshd-config"><a href="#修改sshd-config" class="headerlink" title="修改sshd_config"></a>修改sshd_config</h3>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim sshd_config</span><br><span class="line">Port 2233  #修改端口</span><br><span class="line">ListenAddress 0.0.0.0  #打开本地监听</span><br><span class="line"><span class="meta">#</span><span class="bash">StrictModes yes  <span class="comment">#注释掉</span></span></span><br><span class="line">PasswordAuthentication yes  #允许密码登陆</span><br></pre></td></tr></table></figure><h3 id="重启ssh"><a href="#重启ssh" class="headerlink" title="重启ssh"></a>重启ssh</h3><p>   <code>sudo service ssh restart</code></p><h3 id="xshell登录"><a href="#xshell登录" class="headerlink" title="xshell登录"></a>xshell登录</h3>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip：127.0.0.1</span><br><span class="line">协议：ssh</span><br><span class="line">端口：2233</span><br></pre></td></tr></table></figure><h3 id="xftp登录"><a href="#xftp登录" class="headerlink" title="xftp登录"></a>xftp登录</h3>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip：127.0.0.1</span><br><span class="line">协议：sftp</span><br><span class="line">端口：22</span><br><span class="line">方式：password</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;备份文件&quot;&gt;&lt;a href=&quot;#备份文件&quot; class=&quot;headerlink&quot; title=&quot;备份文件&quot;&gt;&lt;/a&gt;备份文件&lt;/h3&gt;   &lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd /etc/ssh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo cp sshd_config sshd_config.bak&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="shell" scheme="http://Mine-MuYan.github.com/categories/shell/"/>
    
    
      <category term="linux" scheme="http://Mine-MuYan.github.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>PHP基础知识易错点</title>
    <link href="http://Mine-MuYan.github.com/2019/01/22/PHP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%98%93%E9%94%99%E7%82%B9/"/>
    <id>http://Mine-MuYan.github.com/2019/01/22/PHP基础知识易错点/</id>
    <published>2019-01-22T08:34:00.000Z</published>
    <updated>2019-01-24T06:37:55.687Z</updated>
    
    <content type="html"><![CDATA[<h3 id="关于弱类型"><a href="#关于弱类型" class="headerlink" title="关于弱类型"></a>关于弱类型</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    $str1 = <span class="string">'yabadabadoo'</span>;</span><br><span class="line">    $str2 = <span class="string">'yaba'</span>;</span><br><span class="line">    <span class="keyword">if</span>(strpos($str1, $str2))&#123;</span><br><span class="line">        <span class="keyword">echo</span> $str1 . <span class="string">'contains '</span> . $str2;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> $str1 . <span class="string">'does not contain '</span> . $str2;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h4><p>正确运行的输出结果:  <code>&quot;yabadabadoo&quot; does not contain &quot;yaba&quot;</code></p><p>strpos 是返回字符串 str2 在 str1 的位置，没有找到则返回 false ，然而实际上这次返回了 0 而在if语句中0也被当作false,所以我们需要对false做类型判断，正确的代码如下:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $str1 = <span class="string">'yabadabadoo'</span>;</span><br><span class="line">    $str2 = <span class="string">'yaba'</span>;</span><br><span class="line">    <span class="keyword">if</span>(strpos($str1, $str2) !== <span class="keyword">false</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> $str1 . <span class="string">'contains'</span> . $str2;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> $str1 . <span class="string">'does not contain'</span> . $str2;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>需要注意的是我们使用了 !== ，在php 和 JS中 !=相对== 更为严格需要要求数据类型一致.</p><h3 id="下面的输出结果会是怎样？"><a href="#下面的输出结果会是怎样？" class="headerlink" title="下面的输出结果会是怎样？"></a>下面的输出结果会是怎样？</h3><h4 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $x = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">echo</span> $x;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br /&gt;'</span>;</span><br><span class="line">    <span class="keyword">echo</span> $x++ + $x++;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br /&gt;'</span>;</span><br><span class="line">    <span class="keyword">echo</span> $x;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br /&gt;'</span>;</span><br><span class="line">    <span class="keyword">echo</span> $x-- - $x--;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;br /&gt;'</span>;</span><br><span class="line">    <span class="keyword">echo</span> $x;</span><br></pre></td></tr></table></figure><h4 id="解析-1"><a href="#解析-1" class="headerlink" title="解析"></a>解析</h4><p>关于 $x++ 和 $x– 这个问题其实非常容易遇见，我们只需记住 $x++ 使用最近的值，然后才自增。运算符的优先级， ++ 是明显高于 + ，因此先执行++ 再执行 + 。关于运算符的优先级，有的时候我们真的可以通过括号来让我们的程序更让人直观的了解，毕竟代码不光是用于执行的，有的时候或许团队的可读性也是提高效率的一种。</p><h3 id="关于变量的引用"><a href="#关于变量的引用" class="headerlink" title="关于变量的引用"></a>关于变量的引用</h3><h4 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">     $a = <span class="string">'1'</span>;</span><br><span class="line">     $b = &amp;$a;</span><br><span class="line">     $b = <span class="string">"2$b"</span>;</span><br></pre></td></tr></table></figure><p>请问 $a 和 ​$b 的值各位多少？</p><h4 id="解析-2"><a href="#解析-2" class="headerlink" title="解析"></a>解析</h4><p>部分第一时间会想到 $a=’1’ $b=’21’ ,仔细一看 $b=&amp;$a ,这里 $b 是变量 $a 的引用，而不是直接赋值。</p><p>这里输出 <code>a=21;b=21</code></p><h3 id="下面是true还是false"><a href="#下面是true还是false" class="headerlink" title="下面是true还是false"></a>下面是true还是false</h3><h4 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    var_dump(<span class="number">0123</span> == <span class="number">123</span>);  </span><br><span class="line">var_dump(<span class="string">'0123'</span> == <span class="number">123</span>);  </span><br><span class="line">var_dump(<span class="string">'0123'</span> === <span class="number">123</span>);</span><br></pre></td></tr></table></figure><h4 id="解析-3"><a href="#解析-3" class="headerlink" title="解析"></a>解析</h4><p><code>var_dump(0123 == 123);// false</code>,PHP会默认把0123当作8进制来处理，实际转化为10进制就是83，显然这不是相等的。<br><code>var_dump(&#39;0123&#39; == 123);// true</code> 这里php会非常有趣的将’0123’转换成一个数字而且默认去掉了前面的0也就是 123==123<br><code>var_dump(&#39;0123&#39; === 123);// false</code> 很显然上面的问题已经说过了数字和字符串类型不一致。</p><h3 id="下面的代码有什么问题吗？输出会是什么，怎样修复它"><a href="#下面的代码有什么问题吗？输出会是什么，怎样修复它" class="headerlink" title="下面的代码有什么问题吗？输出会是什么，怎样修复它"></a>下面的代码有什么问题吗？输出会是什么，怎样修复它</h3><h4 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $referenceTable         = <span class="keyword">array</span>();</span><br><span class="line">    $referenceTable[<span class="string">'val1'</span>] = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    $referenceTable[<span class="string">'val2'</span>] = <span class="number">3</span>;</span><br><span class="line">    $referenceTable[<span class="string">'val3'</span>] = <span class="keyword">array</span>(<span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    $testArray = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line">    $testArray = array_merge($testArray, $referenceTable[<span class="string">'val1'</span>]);</span><br><span class="line">    var_dump($testArray);</span><br><span class="line">    $testArray = array_merge($testArray, $referenceTable[<span class="string">'val2'</span>]);</span><br><span class="line">    var_dump($testArray);</span><br><span class="line">    $testArray = array_merge($testArray, $referenceTable[<span class="string">'val3'</span>]);</span><br><span class="line">    var_dump($testArray);</span><br></pre></td></tr></table></figure><h4 id="解析-4"><a href="#解析-4" class="headerlink" title="解析"></a>解析</h4><p>  实际输出如下：</p><p>array(2) { [0]=&gt; int(1) [1]=&gt; int(2) }<br>NULL<br>NULL  </p><p>运行的时候你或许还能看到下面的警告</p><p>Warning: array_merge(): Argument #2 is not an array<br>Warning: array_merge(): Argument #1 is not an array  </p><p>array_merge 需要传入的参数都是数组，如果不是，则会返回null。 你可以这样修改</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $testArray = array_merge($testArray, (<span class="keyword">array</span>)$referenceTable[<span class="string">'val1'</span>]);</span><br><span class="line">    var_dump($testArray);  </span><br><span class="line">    $testArray = array_merge($testArray, (<span class="keyword">array</span>)$referenceTable[<span class="string">'val2'</span>]);</span><br><span class="line">    var_dump($testArray);  </span><br><span class="line">    $testArray = array_merge($testArray, (<span class="keyword">array</span>)$referenceTable[<span class="string">'val3'</span>]);</span><br><span class="line">    var_dump($testArray);</span><br></pre></td></tr></table></figure><h3 id="x应该是输出什么？"><a href="#x应该是输出什么？" class="headerlink" title="$x应该是输出什么？"></a>$x应该是输出什么？</h3><h4 id="题目-5"><a href="#题目-5" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $x = <span class="keyword">true</span> <span class="keyword">and</span> <span class="keyword">false</span>;</span><br><span class="line">    var_dump($x);</span><br></pre></td></tr></table></figure><h4 id="解析-5"><a href="#解析-5" class="headerlink" title="解析"></a>解析</h4><p>  这里依旧是强调运算符的优先级，＝ 会比 and级别高点，因此等同下面的代码</p><p>   $x = true;<br>   true and false  </p><p>答案显而易见。  </p><h3 id="经过下面的运算-x的值应该是多少？"><a href="#经过下面的运算-x的值应该是多少？" class="headerlink" title="经过下面的运算 $x的值应该是多少？"></a>经过下面的运算 $x的值应该是多少？</h3><h4 id="题目-6"><a href="#题目-6" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $x = <span class="number">3</span> + <span class="string">"15%"</span> + <span class="string">"$25"</span></span><br></pre></td></tr></table></figure><h4 id="解析-6"><a href="#解析-6" class="headerlink" title="解析"></a>解析</h4><p>答案是 18 ，PHP是会根据上下文实现 类型的自动转换上面的代码我们可以这样理解：</p><p>如果我们在与字符串进行数学运算，实际php会尽可能将字符串中的数组进行转换，如果是数字开头的话则转换成改数字比如”15%”会变成15,如果不是数字开头则会变成0; 上面的运算类似下面 ：<code>$x = 3 + 15 + 0</code></p><h3 id="x应该是输出什么？-1"><a href="#x应该是输出什么？-1" class="headerlink" title="$x应该是输出什么？"></a>$x应该是输出什么？</h3><h4 id="题目-7"><a href="#题目-7" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $x = <span class="keyword">true</span> <span class="keyword">and</span> <span class="keyword">false</span>;</span><br><span class="line">    var_dump($x);</span><br></pre></td></tr></table></figure><h4 id="解析-7"><a href="#解析-7" class="headerlink" title="解析"></a>解析</h4><p>  这里依旧是强调运算符的优先级，＝ 会比 and级别高点，因此等同下面的代码</p><p>   $x = true;<br>   true and false  </p><p>答案显而易见。  </p><h3 id="运行下面的代码，-text-的值是多少？-strlen-text-又会返回什么结果？"><a href="#运行下面的代码，-text-的值是多少？-strlen-text-又会返回什么结果？" class="headerlink" title="运行下面的代码， $text 的值是多少？ strlen($text) 又会返回什么结果？"></a>运行下面的代码， $text 的值是多少？ strlen($text) 又会返回什么结果？</h3><h4 id="题目-8"><a href="#题目-8" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $text     = <span class="string">'John '</span>;</span><br><span class="line">    $text[<span class="number">10</span>] = <span class="string">'Doe'</span>;</span><br></pre></td></tr></table></figure><h4 id="解析-8"><a href="#解析-8" class="headerlink" title="解析"></a>解析</h4><p>上面代码执行完毕后 <code>$text = &quot;John      D&quot; (John后面会有连续的5个空格) strlen($text) 会返回11</code></p><h3 id="下面的输出结果会是什么"><a href="#下面的输出结果会是什么" class="headerlink" title="下面的输出结果会是什么"></a>下面的输出结果会是什么</h3><h4 id="题目-9"><a href="#题目-9" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   $v = <span class="number">1</span>;</span><br><span class="line">    $m = <span class="number">2</span>;</span><br><span class="line">    $l = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">if</span>($l &gt; $m &gt; $v)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"yes"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"no"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="解析-9"><a href="#解析-9" class="headerlink" title="解析"></a>解析</h4><p><code>&quot;no&quot;</code>,只要仔细分析就不难得出<code>$l&gt;$m</code> 会转换成1 ，则这个时候再和$m比较。</p><h3 id="执行下面代码-x-会变成什么值呢？"><a href="#执行下面代码-x-会变成什么值呢？" class="headerlink" title="执行下面代码 $x 会变成什么值呢？"></a>执行下面代码 $x 会变成什么值呢？</h3><h4 id="题目-10"><a href="#题目-10" class="headerlink" title="题目"></a>题目</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $x = <span class="keyword">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">'0xFF'</span> == <span class="number">255</span>)&#123;</span><br><span class="line">        $x = (int)<span class="string">'0xFF'</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="解析-10"><a href="#解析-10" class="headerlink" title="解析"></a>解析</h4><p><code>$x=0</code> 而不是255.首先<code>&#39;oxFF&#39; == 255</code> 我们好判断，会进行转换将16进制数字转换成10进制数字，<code>0xff -&gt; 255</code>.PHP使用 is_numeric_string 判断字符串是否包含十六进制数字然后进行转换。但是 <code>$x = (int)&#39;0xFF&#39;</code>; 是否也会变成255呢？显然不是，将一个字符串进行强制类型转换实际上用的是 convert_to_long ,它实际上是将字符串从左向右进行转换，遇到非数字字符则停止。因此 0xFF 到x就停止了。所以 $x=0</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;关于弱类型&quot;&gt;&lt;a href=&quot;#关于弱类型&quot; class=&quot;headerlink&quot; title=&quot;关于弱类型&quot;&gt;&lt;/a&gt;关于弱类型&lt;/h3&gt;&lt;h4 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; title=&quot;题目&quot;&gt;&lt;/a&gt;题目&lt;/h4&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $str1 = &lt;span class=&quot;string&quot;&gt;&#39;yabadabadoo&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $str2 = &lt;span class=&quot;string&quot;&gt;&#39;yaba&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(strpos($str1, $str2))&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $str1 . &lt;span class=&quot;string&quot;&gt;&#39;contains &#39;&lt;/span&gt; . $str2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $str1 . &lt;span class=&quot;string&quot;&gt;&#39;does not contain &#39;&lt;/span&gt; . $str2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/categories/PHP/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>MVC、SPA 与 SSR</title>
    <link href="http://Mine-MuYan.github.com/2019/01/16/MVC%E3%80%81SPA%20%E4%B8%8E%20SSR/"/>
    <id>http://Mine-MuYan.github.com/2019/01/16/MVC、SPA 与 SSR/</id>
    <published>2019-01-16T03:51:49.000Z</published>
    <updated>2019-01-24T06:58:41.337Z</updated>
    
    <content type="html"><![CDATA[<p>这篇的灵感来自於 <a href="https://www.facebook.com/groups/f2e.tw/permalink/1642690352434990/" target="_blank" rel="noopener">Front-End Developers Taiwan</a> 裡面的一串讨论，有人 po 了一个影片是来讨论「MVC vs SPA」，这个标题一出来大家都惊呆了，想说怎麼会有这样的比较，於是下面掀起一波激烈的讨论，最后发现原 po 误用了专有名词，才导致这样的结果。</p><p>虽然说很多技术名词本来就是一个名词各自表述，但基本概念通常都不会相差太远，只有在细节上会有些许的争议以及讨论而已。</p><p>身為致力於要让新手更容易搞懂技术名词的人，不如就让我来尝试看看讲解这几个东西吧！</p><a id="more"></a><p>这篇文章的目标是：「只要你有网页前端的基础，就能够搞懂我在说什麼」，如果你搞不懂的话，别担心，不是你的错，是我没写好。麻烦在下面留言一下让我知道哪裡可以再改进。</p><p>接下来我会以主角小明為中心点出发，试著从一段虚拟的故事不断带出：「為什麼 XXX 会出现」、「為什麼我们需要 XXX」这些问题。如果你只对真实歷史的名词演进有兴趣，那你可能要去维基百科才能找到比较正确的资料。本故事纯属虚构，如有雷同…应该不太可能会有雷同啦，就让我们开始吧！</p><p>（先打个预防针，故事有点长，如果这些概念你都理解了应该会觉得这篇文章超级废又超级长）</p><h3 id="第一幕：在很久很久以前…"><a href="#第一幕：在很久很久以前…" class="headerlink" title="第一幕：在很久很久以前…"></a>第一幕：在很久很久以前…</h3><p>小明是一个初学程式的新手，在这之前有用 Dreamweaver 写过一些简单的静态网页，对 HTML、CSS 以及 JavaScript 都有一些基础，而朋友们都推荐他去学 PHP 来补足后端的部分。</p><p>经过了一个月的苦练之后，小明终於完成了他的第一个后端程式，是一个非常简单的留言板系统（怕大家伤眼睛，这边只截给大家看其中一部分）</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-e6773d56b97cd25b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800/format/webp" alt></p><p>别笑，这就是你年轻时会写出来的东西</p><p>PHP 程式码、商业逻辑、HTML，全部东西都混在一起做撒尿牛丸，写了这样的程式码之后，小明每次考试都考一百分呢！</p><p>小明一开始觉得很兴奋，自己终於能够通晓前后端，成為全端工程师，便兴冲冲的持续精进自己的后端技术，每天都加一个新的 feature 进去。过了两个礼拜之后，小明整理了一下资料夹，发现总共有 100 个 PHP 档案，每个档案有超过 300 行 code，而且全部都是 PHP 跟 HTML 混在一起写。</p><p>他随便点开其中一个档案，看了 10 秒之后大喊：</p><blockquote><p>我到底写了三小</p></blockquote><p>意识到自己写的 code 很烂，是迈向一个好的工程师的第一步。</p><h3 id="第二幕：痛改前非"><a href="#第二幕：痛改前非" class="headerlink" title="第二幕：痛改前非"></a>第二幕：痛改前非</h3><p>发现自己写的程式码连自己都看不懂的时候，小明觉得这样不行，阿岳也觉得不行，我也觉得不行。</p><p>因此呢，小明跑去十分瀑布下面打坐了三天三夜，不断想著该怎麼样让他的程式码变得更好，能够更好维护、更好读懂。他不求一步登天，只希望三个月之后当他回顾自己写的 code 时，不要骂脏话就好。</p><p>就在第三天的晚上，他突然有了灵感，大喊了一声：</p><blockquote><p>Eureka！</p></blockquote><p>就赶紧跑回家去重构自己的 code 了，而下面是他重构的结果：</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-425dc64e58cf5baa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800/format/webp" alt></p><p>纯属范例，绝对没办法跑</p><p>这个范例跟之前差在哪边呢？</p><p>首先，他把任何跟资料有关的操作都放到一个叫做 Model 的地方去，所以你要改任何跟资料有关的东西，都到那边就对了。</p><p>再来，他也把所有跟显示画面有关的东西都放到其他地方去，我们就叫做 View 吧，View 裡面用一个 template 来塞入资料，不做任何跟资料有关的处理。</p><p>如此一来，他就把资料跟画面显示这两者切开了，并且让开头那段 PHP code 把这两者连接起来，先去 Model 拿资料，再把资料塞入 View 裡面输出。那这个「连接两者」的角色，就叫做 Controller 吧！</p><p>於是，MVC 就这样出现了。為的就是要把原来乱七八糟的程式码理出一个头绪来，是你的就是你的，不是你的就给我滚远点。你要存取资料库就是去 Model 裡面，你要写 HTML 就去 View，绝对不会出现在 View 裡面下 SQL Query 这种事情。</p><p>所以 MVC 是什麼？就是一种设计模式，你只要把你的 code 像这样子切开，都可以叫做 MVC，所以你不可能只看一个画面就跟你朋友说：「欸欸，这个网站是 MVC，因為他有好多个页面」，除非你可以通灵看到背后程式码的架构长什麼样子。</p><p>话说后来又陆陆续续出现很多种模式，而且 MVC 其实也没有想像中的职责这麼分明，在这边我就不细讲了，我自己对那整段歷史也没有很熟，有兴趣的可以参考：</p><p><a href="http://blog.turn.tw/?p=1539" title="http://blog.turn.tw/?p=1539" target="_blank" rel="noopener"><strong>MVC是一个巨大误会</strong><br>_我是web工程师，从刚开始学MVC就深感困惑： 怎麼每个地方说的MVC都不太一样？ 有些文章讲的MVC，跟我正在用的MVC，怎麼像完全不同的东西？…_blog.turn.tw</a><a href="http://blog.turn.tw/?p=1539" target="_blank" rel="noopener"></a></p><p>然后我上面那段 code 是乱写的，如果你对真实世界的 MVC 框架写出来的 code 有兴趣的话，会长成这样：</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-fcb4d5d141a92462.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/665/format/webp" alt></p><p>PHP 的框架 CodeIgniter 写出来的</p><p>讲到这裡我们做一个小总结，问自己三个问题：</p><ol><li>為什麼要有 MVC？</li><li>有 MVC 跟没有 MVC 的差别在哪？</li><li>所以 MVC 是什麼？</li></ol><p>三个问题可以一起回答：</p><blockquote><p>因為小明写的 code 太脏了太难维护，所以需要重构。而后来他发现用 Model、View、Controller 这三个概念来切的话可以把 code 写得漂亮很多又好维护，就这样做了。差别在於原本的 code 混在一起，遵守 MVC 的规范之后职责变得清楚很多。所以呢，MVC 就是一种架构，后端可以遵守 MVC 的架构去开发，前端也可以，就算不是 Web 也可以用 MVC。</p></blockquote><h3 id="第三幕：毛很多的使用者"><a href="#第三幕：毛很多的使用者" class="headerlink" title="第三幕：毛很多的使用者"></a>第三幕：毛很多的使用者</h3><p>小明把自己的烂 code 利用 MVC 模式重构之后，看起来还挺不赖的，至少比以前好很多，三个月过去了，也能看得懂自己以前写的 code。把留言板的程式码重构得差不多之后，小明决定把这个专案公开，开放给大家註册使用，让每个人都可以有自己的留言板。</p><p>一开始状况都还行，大家纷纷感激小明的无私奉献，「祝楼主一生平安」、「感谢大大无私的分享」，可是好景不常，有天小明收到了一个回馈：</p><blockquote><p>我每次留言之后页面都会刷新，我家网速又慢，每次都要等个十几秒，有没有可能不要重新整理页面？你看人家 Gmail，我寄完信它也没有重新整理啊！人家做得到你应该也做得到吧</p></blockquote><p>身為一个滥好人，小明乖乖的去研究 Gmail 到底是如何做到的，发现秘诀就在於一个神奇的东西：Ajax，全名 Asynchronous JavaScript and XML。</p><p>全名听起来很吓人，但说穿了其实就是你在 JavaScript 裡面可以非同步的去呼叫 Server 的 API 并且拿资料回来，在 Ajax 出现之前，你要把资料带过去都必须透过 Form 的方式，一定要换页。可是有了 Ajax 以后，不换页也能跟 Server 沟通。</p><p>Gmail 就是利用这样的原理，才能达成寄信不换页。</p><p>小明研究了一个假日之后便著手改造自己的留言板，把原本利用 Form 发送留言的地方变成 Ajax，可是他碰到了一个问题：</p><blockquote><p>原本我新增留言之后重新整理页面就可以看到新的留言了，因為 Server 会把最新的结果传回去；可是我现在用 Ajax，我要怎麼在不刷新页面的前提下在画面上新增留言？</p></blockquote><p>总而言之呢，利用 Ajax 之后的确是发了一个 Request 跟 Server 说你要新增留言，也成功了，可是画面上不会平白无故就跑出一个新的留言。在经过短暂的思考后，小明得到一个很直觉的解法：「阿我就用 JavaScript 来新增就好啦！」</p><p>经过一番修改之后，新增留言的程式码从原本很简单的一个 Form 表单，变成下面这个样子：</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-50c0e9245278ba6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800/format/webp" alt></p><p>Ajax 送出资料之后利用 jQuery prepend 上去</p><p>使用者的需求被解决了，小明也有了技术上的成长，可谓是一石二鸟、一举两得，但小明天真的地方就在於他把使用者想得太简单了。</p><p>过了一个礼拜之后，同一个使用者又写信给小明：</p><blockquote><p>很感谢你上次新增的功能，可是我有个疑问。我看 Gmail 无论做什麼操作都不会换页，你的留言板也可以改成这样吗？这样比较方便，谢谢。</p></blockquote><p>滥好人小明没有仔细深究「比较方便」到底是怎样的方便，纯粹站在一个希望满足使用者所有需求的角度跳下去研究 Gmail 到底还能够做到什麼。</p><p>他发现了 Gmail 跟其他网站不同的地方就是：「无论做什麼操作都不会换页」，换页指的是「你会有一段时间看到整个画面全白，因為瀏览器正在等待 Server 的 Response 才能载入 HTML」。</p><p>你在用 Gmail 的时候，无论你是写信、读信、整理信件或是切换到设定页，儘管你的网路跟乌龟一样，你还是看不到任何全白画面。</p><p>為什麼？因為 Gmail 所有跟 Server 沟通的地方都是用 Ajax。</p><p>这是改造前的范例，我们利用表单 POST 来新增一笔留言，所以你会看到一小段的白画面：</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-59de0c20d1843043.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/758/format/webp" alt></p><p>此范例改自我学生 Kris 的作业，<a href="http://thinkr.tw/" target="_blank" rel="noopener">http://thinkr.tw/</a></p><p>这是改造后的范例，因為我们用 Ajax 来新增留言的关係，所以你不会看到任何白画面的出现，使用者体验好很多：</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-dd6600a5eb6e54b6.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/682/format/webp" alt></p><p>利用 Ajax 跟 JavaScript 在前端新增留言</p><p>我们再举一个简单的小例子，假设小明今天写了一个没有用 Ajax 的 Minmail，他删除一封信的流程是这样的：</p><ol><li>点击删除之后，利用 Form 表单 POST 资料去 /server/delete_email</li><li>/server/delete_email 处理完之后 redirect 回去信件列表</li><li>瀏览器重新载入信件列表（在载入之前你都会看到全白画面）</li></ol><p>可是如果是像 Gmail 那样子全部改成 Ajax 的话，就会变成：</p><ol><li>点击删除之后，利用 Ajax POST 资料去 /server/api/delete_email</li><li>/server/api/delete_email 处理完之后回传 Response</li><li>利用 JavaScript 在前端把那封信的从画面上移除</li></ol><p>后者利用 Ajax 跟后端同步资料，并且在前端用 JavaScript 更改画面，所以你无论做什麼操作都不会换页，也可以保证前后端的资料是同步的。</p><p>知道区别以及原理之后，小明把整个网站都改造成这种形式，只要是任何原本用到 Form 的地方，现在全部都用 Ajax 拿资料并搭配 JavaScript 来做画面上的处理。</p><p>因此，留言列表现在变成 Ajax 拿资料回来之后由 JavaScript 把留言 append 到画面上，就像我们刚刚示范的新增留言那样。</p><p>此时，小明突然有个非常惊人的发现：</p><blockquote><p>咦，如果我全部画面都是由前端利用 JavaScript 动态產生的话，那我原本后端的 View 要干嘛？</p></blockquote><p>咦，对啊，既然现在所有画面都是在前端由 JavaScript 动态產生，那我后端不就永远都输出同一个档案就好？如此一来，使用者看到的其实都是<strong>同一个页面</strong>，而我们利用 JavaScript 在这个页面上做变化。</p><p>这个概念就叫做 SPA，全名是 Single Page Application，单页式应用。与之对应的概念是 MPA，Multiple Page Application。</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-eb1736bc63131495.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800/format/webp" alt></p><p>SPA 与 MPA 的对照</p><p>就如同小明领悟的一样，前端如果利用 SPA 来实作的话，会把原本应该是后端处理的一部份职责给搬到前端去，例如说状态的管理跟路由。</p><p>举例来说，在以往 Server 根据不同的路径对应到不同的 Controller，进而渲染出不同的 View。可是现在 Server 无论什麼路径都会输出同一个档案，所以你在前端也要判断现在的网址是哪个，才能决定在前端应该渲染出哪个画面。</p><p>再举一个例子，假设我现在写了一个电影列表的网站，首页列出许多热门电影，点进去可以看到个别电影的详细资料。而我们做了以下动作：</p><ol><li>点进电影 A</li><li>快速按上一页</li><li>快速点进电影 B</li></ol><p>如果是 SPA 的话，实作的逻辑应该会是：「点进单独电影时发送一个 Request，等 Response 回来之后把资料显示在画面上」，乍听之下没什麼问题，但若是你在第三步的时候，第一步所发出去的电影 A 的 Response 才传回来，你的画面就会显示出电影 A 的资讯，可是使用者点的明明就是电影 B。</p><p>这就是我所说的状态管理变复杂了，有些地方需要花点心思做处理。在以往 MPA 的时候完全不会发生这种事，你可以保证 Server 会回传正确的结果，因為画面是在后端 render 再回传回来的，而且每一个页面之间的状态不会互相干扰。</p><p>如果写得好，我相信 SPA 的使用者体验一定很不错，因為用起来就跟你在用 Native App 差不多嘛，但你必须付出的代价是前端变得超级复杂，有一堆非同步的问题要考虑还有一大堆事情要做。此时的前端复杂度已经跟我们最开头示范的那种简单留言板相差许多了。</p><p>在这种时候，前端也可以参考我们前面所说的 MVC 架构或是其他相关架构来让程式码的职责变得更分明，让整个专案更好维护。所以你可以又有 MVC 又有 SPA，或是没有 MVC 但有 SPA，这两者是完全不同的概念。</p><p>我之前写过另外一篇文章，有兴趣的话可以参考看看：</p><p><a href="https://blog.techbridge.cc/2017/09/16/frontend-backend-mvc/" title="https://blog.techbridge.cc/2017/09/16/frontend-backend-mvc/" target="_blank" rel="noopener"><strong>前后端分离与 SPA</strong><br>_TechBridge Weekly 技术週刊团队是一群对用技术改变世界怀抱热情的团队。本技术共笔部落格初期专注於Web前后端、行动网路、机器人/物联网、数据分析与產品设计等技术分享。_blog.techbridge.cc</a><a href="https://blog.techbridge.cc/2017/09/16/frontend-backend-mvc/" target="_blank" rel="noopener"></a></p><p>最后我举一个一定要用 SPA 的例子：音乐播放网站。</p><p>如果音乐播放网站是用 MPA 的话，每去一个新的网址就会把整个页面换掉，那你的网页播放器就会中断了，这是完全没办法接受的事。所以唯一的解法就是：播放器永远都在页面上，只有其他部分的内容换掉。而这一切都是在前端用 JavaScript 来处理的。</p><h3 id="第四幕：行销团队的暴怒"><a href="#第四幕：行销团队的暴怒" class="headerlink" title="第四幕：行销团队的暴怒"></a>第四幕：行销团队的暴怒</h3><p>小明花了整整一个月的时间不眠不休不吃不喝（夸饰法，开玩笑的），终於把整个网站改造成 SPA，而且还优化了不少地方，让整个使用者体验变得非常非常好。</p><p>不久过后，这个留言板系统因為体验实在是太好了，有越来越多人使用，短短一个月内就有了一百万个来自世界各地的使用者註册。还有来自国外的使用者甚至写信给小明希望能够付钱来拥有更多功能：</p><blockquote><p>Hey, thanks for building such a cool website, I really like it. Is there any premium plan? I am glad to pay for the additional features like custom domain or custom template.</p></blockquote><p>听过一大堆创业讲座的小明知道时候到了，可以把这个 side project 当作创业项目了！</p><p>凭著现有的成绩，小明很快地就募到了天使轮，找了几个伙伴成立了一间公司，想要把这个留言板系统做成全世界第一的留言板，期许自己能成為留言板界的 WordPress。</p><p>可是好景不常，过了一两个月之后不知道為什麼，新的会员越来越少，砸下大笔的广告费也只带来短暂的成效而已，一旦广告停了就又恢復以往冷清的样子。</p><p>奇怪，就算是热潮退烧也没退烧得这麼快才对，到底是发生什麼事呢？</p><p>一个礼拜过后，专长是数位行销的合伙人气噗噗的跑到小明的位子前，口气很差地质问他：</p><blockquote><p>你做了什麼？為什麼在搜寻引擎上面搜寻我们的网站，结果只会出现一大堆看不懂的程式码？我们的网站 SEO 做的奇差无比你知道吗？</p></blockquote><p>小明一开始觉得很委屈，他什麼都没做，怎麼会落得如此下场。但经过左思右想之后，终於发现了癥结点：SPA。</p><p>由於 SPA 是由前端的 JavaScript 动态產生内容，因此如果你对 SPA 的网站按下右键 -&gt; 检视原始码，只会看到空荡荡的一片，只看得到一个 JavaScript 档案跟一些最基本的 tag。</p><p>内容在哪裡？不在这裡，因為那是由 JavaScript 动态產生的。只有你的网站经由瀏览器载入并且执行 JavaScript，等 Response 回来之后才会动态產生出内容。因此无论是哪个页面，你检视原始码都看不到动态新增后的内容。</p><p>惨了，这可是天大的坏消息。</p><p>但其实也没有那麼坏，因為强大的 Google 的爬虫其实支援执行 JavaScript，所以他依然会 index 你在前端渲染之后的页面。</p><p>不过还是有两个问题，第一个是我们不知道 Google 如何执行，会不会前端还没完全渲染完就已经爬完了？第二个是除了 Google，还有其他很多搜寻引擎，有些可能没有像 Google 这麼强大，碰到 SPA 就只能索引空荡荡的 HTML，内容几乎空白。</p><p>该怎麼办呢？</p><p>苦恼的小明跟公司请了长假，再度跑到十分瀑布下面修行，希望能够重演当年想出 MVC 架构的剧本。很幸运地，过了三天之后，小明终於想到解法了，大喊了一声：</p><blockquote><p>干我知道了！</p></blockquote><p>小明的想法是这样的，既然问题出在「第一次渲染」，那我们只要在第一次渲染的时候把该输出的资料都输出就好啦，对使用者来说还是一个 SPA，差别在於使用者接收到 HTML 的时候，就已经有完整的资料了。</p><p>举例来说，假设使用者拜访显示所有留言的页面，我在 Server Side 先把所有留言都準备好然后 render 出来，这样使用者一收到 Response 的时候就能够看到所有留言，搜寻引擎也能顺利地爬到。</p><p>而后续的操作还是由 JavaScript 来处理，依旧能保持 SPA 的优点。或者我们能用一句话来总结：</p><blockquote><p>第一个页面由 Server side render，之后的操作还是由 Client side render</p></blockquote><p>没错，这个概念就叫做 SSR，Server Side Rendering。</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-b15cfe832476bacb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800/format/webp" alt></p><p>CSR vs SSR</p><p>有了 SSR 以后，就解决了 SEO 的问题，对网路爬虫来说你有没有用 SPA 都无所谓，他所抓到的内容都是一样的。可是对使用者来说，一样能享受到 SPA 所带来的好处（不用换页）。</p><p>虽然我在这边只用几句话带过去，看起来轻鬆写意，但真的实作过的话你就会发现这不是一件容易的事，有很多细节要去考虑。总之呢，小明花了整整两个月的时间才把整个网站都改成 SSR。</p><p>不久后，在每个月的员工大会（新创嘛，一个月一次很合理）中 CMO 很开心地跟大家宣布產品在搜寻引擎上面的排名越来越高，自然流量也越来越多，註册会员比起上个月增长了 200%。</p><p>CMO 很开心，搜寻引擎很开心，员工很开心，小明当然也很开心。</p><p>一天又平安的过去了，感谢飞天小明警的努力。</p><h3 id="最终幕：前端的未来"><a href="#最终幕：前端的未来" class="headerlink" title="最终幕：前端的未来"></a>最终幕：前端的未来</h3><p>因為科技进步快速加上网路的普及，世界变动的比以前快很多。</p><p>十年前手机还只是让你打电话以及斤斤计较简讯字数的工具，十年后就变成人手一台，不可或缺的小型电脑。</p><p>身為经歷过这一切的人，小明在深夜裡边刷著 leetcode 边回忆起前端的发展，遥想十年前他以為 HTML 跟 CSS 才是主角，JavaScript 只是阻止使用者点右键或是做出会跟著鼠标移动的酷炫跑马灯的小玩具。</p><p>可是一切发展的越来越快，jQuery 的出现一统江湖，解决了恼人的跨瀏览器问题，CSS 也因為预处理器的出现而变得更好维护，可以用更程式化的角度来撰写。再过个两三年，大家都不谈 jQuery 了，而是谈 Angular。可是又过了几年，最潮的名词变成 React，到现在 React 也没那麼潮了，要潮的话请去写 Vue。</p><p>更别提 SPA 的遍地开花以及 SSR 的出现，更是将前端的复杂度提升了不只一个档次。有了 SSR 你就不再只是前端了，毕竟 SSR 的 S 可是 Server 的意思，还必须要会一点 Server side 的技术才行。</p><p>在 Mobile 的流量渐渐超越 Desktop 之后，前端的目标就迈向「可以逼近 Native App」的体验。又像是个 App 可是又不用安装，那该有多好，省了安装这个步骤转换率大幅提升，使用者开心公司也开心。</p><p>於是大家开始提倡 PWA，Progressive Web App。Web 不再单纯只是 Web，而是要用起来像个 App，看起来也像个 App。甚至利用 Service Worker 搭配快取，在没有网路时也能够使用部分功能，也可以用 Skeleton 先把画面的骨架显示出来。</p><p>这一切的一切都為了一个目的：增进使用者体验。</p><p>前端复杂归复杂，但身為真心喜爱前端的人，小明可是对未来充满了希望。一想到能够接触更多新的技术，更多新的解法，可以打造出更好的產品，小明内心涌起的情绪不是挫折而是兴奋，无比的兴奋。</p><p>东方的太阳缓缓升起，散射出的光芒洒在小明的房裡，提醒著他新的一天即将开始。</p><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>对我来说，一个技术的出现绝对是有其理由的。而不是简单一句：「前端现在就是这麼复杂」，我认為只要能理解他出现的脉络，就能更轻易的从宏观的角度去理解这项技术。</p><p>我们可以用三个问题来帮助自己理解一项事物：</p><ol><li>為什麼要有 XXX？</li><li>没有 XXX 跟有 XXX 的区别是什麼？</li><li>所以 XXX 是什麼？</li></ol><p>MVC 就是因為 code 变得越来越乱，所以将职责区分清楚的一种设计模式。SPA 就是因為想增进使用者体验，而出现的一种在前端利用 Ajax 达成不换页的方法。SSR 就是因為要解决 SPA 的 SEO 问题而出现的解法。</p><p>一切都是有理由的，一切都是有原因的。你可以不懂它怎麼实作，但你一定要懂它是為了什麼而生。程式是工具，工具的目的是解决问题，重要的不是工具本身，而是背后要解决的那个问题。</p><p>感谢大家的阅读，如果有任何错误麻烦不吝指出。另外，此篇文章只希望能给出一个大方向，对於细节如果要讨论的话其实每个细节都可以再写一篇专文，例如说 MVC 到底是在讲哪个 MVC？SPA 在 Google 上的 SEO 真的比较差吗？SSR 在首次加载页面上牺牲的时间（因為要等 API 的资料回来才能 render）与增进 SEO 之间的取捨等等。</p><p>喜欢的话可以拍个手，你知道 Medium 最多可以拍 50 下吗？可以根据你的喜好程度拍不同次数的手，想要拍好拍满的话我也是乐见其成。</p><p>最后，再次感谢你的阅读。</p><ul><li><a href="https://medium.com/tag/frontend?source=post" target="_blank" rel="noopener">Frontend</a></li><li><a href="https://medium.com/tag/front-end-development?source=post" target="_blank" rel="noopener">Front End Development</a></li><li><a href="https://medium.com/tag/technology?source=post" target="_blank" rel="noopener">Technology</a></li><li><a href="https://medium.com/tag/javascript?source=post" target="_blank" rel="noopener">JavaScript</a></li><li><a href="https://medium.com/tag/single-page-applications?source=post" target="_blank" rel="noopener">Single Page Applications</a></li></ul><h3 id="转载说明"><a href="#转载说明" class="headerlink" title="转载说明"></a>转载说明</h3><p>此文章是在一技术讨论群里看到的，看后觉得很有感悟，便转载了过来，但当时只是把内容复制了过来，原文的链接忘了，后来找了群里面的聊天记录和浏览器的访问历史，都没有找到，在此就不注明原文章的链接了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这篇的灵感来自於 &lt;a href=&quot;https://www.facebook.com/groups/f2e.tw/permalink/1642690352434990/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Front-End Developers Taiwan&lt;/a&gt; 裡面的一串讨论，有人 po 了一个影片是来讨论「MVC vs SPA」，这个标题一出来大家都惊呆了，想说怎麼会有这样的比较，於是下面掀起一波激烈的讨论，最后发现原 po 误用了专有名词，才导致这样的结果。&lt;/p&gt;
&lt;p&gt;虽然说很多技术名词本来就是一个名词各自表述，但基本概念通常都不会相差太远，只有在细节上会有些许的争议以及讨论而已。&lt;/p&gt;
&lt;p&gt;身為致力於要让新手更容易搞懂技术名词的人，不如就让我来尝试看看讲解这几个东西吧！&lt;/p&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/categories/PHP/"/>
    
    
      <category term="转载" scheme="http://Mine-MuYan.github.com/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>Git多分支平行发展（一个仓库包含多个不同的项目）</title>
    <link href="http://Mine-MuYan.github.com/2018/06/29/Git%E5%A4%9A%E5%88%86%E6%94%AF%E5%B9%B3%E8%A1%8C%E5%8F%91%E5%B1%95%EF%BC%88%E4%B8%80%E4%B8%AA%E4%BB%93%E5%BA%93%E5%8C%85%E5%90%AB%E5%A4%9A%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%9A%84%E9%A1%B9%E7%9B%AE%EF%BC%89/"/>
    <id>http://Mine-MuYan.github.com/2018/06/29/Git多分支平行发展（一个仓库包含多个不同的项目）/</id>
    <published>2018-06-29T08:11:49.000Z</published>
    <updated>2020-03-24T06:42:08.844Z</updated>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>最近在用laravel开发微信小程序的接口，因为服务器PHP版本的问题，分别用了<code>laravel 5.6(php 7.1，开发环境)</code>  和 <code>laravel 5.4 (php 5.6，服务器环境)</code>，开发完成后，两个项目绝大部分的代码都差不多，不想再建一个仓库放<code>php 5.6</code>版的代码，便试着在原有仓库新建分支来存储<code>php 5.6</code>的项目，捣鼓的一上午终于搞出来了，现在记录下。</p><p>主要步骤：</p><ol><li>在远程和本地仓库中新建一个分支（我建的是<code>laravel54</code>）；</li><li>删除远程<code>laravel54</code>分支上的所有文件；</li><li>将新项目的文件推送到<code>laravel54</code>上。</li></ol><p>文章中的代码没有高亮化，看着可能不太舒服，其他平台地址：<a href="https://segmentfault.com/a/1190000015430066" target="_blank" rel="noopener">segmentfault</a> <a href="https://www.jianshu.com/p/922590337264" target="_blank" rel="noopener">简书</a></p><a id="more"></a><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><h4 id="新建一个文件夹-我的是laravel5-4"><a href="#新建一个文件夹-我的是laravel5-4" class="headerlink" title="新建一个文件夹(我的是laravel5.4)"></a>新建一个文件夹(我的是laravel5.4)</h4><h4 id="创建git本地仓库并关联远程仓库"><a href="#创建git本地仓库并关联远程仓库" class="headerlink" title="创建git本地仓库并关联远程仓库"></a>创建git本地仓库并关联远程仓库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4</span><br><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository in D:/PHP/xampp/htdocs/apple/laravel5.4/.git/</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git remote add origin git@xxxxxxxxxxxxxxxxxxxxx.git</span><br></pre></td></tr></table></figure><h4 id="建立远程仓库分支-laravel54"><a href="#建立远程仓库分支-laravel54" class="headerlink" title="建立远程仓库分支 laravel54"></a>建立远程仓库分支 laravel54</h4><p>注意，建立远程分支后，暂时还不能在本地建立其他分支，因为刚创建的git仓库默认的master分支要在第一次commit之后才会真正建立，这时创建其他分支会报错，解决办法在后面说明。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git branch laravel54</span><br><span class="line">fatal: Not a valid object name: &apos;master&apos;.</span><br></pre></td></tr></table></figure><h4 id="随便新建一个文件，里面可以不用写任何东西，然后commit"><a href="#随便新建一个文件，里面可以不用写任何东西，然后commit" class="headerlink" title="随便新建一个文件，里面可以不用写任何东西，然后commit"></a>随便新建一个文件，里面可以不用写任何东西，然后commit</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ touch clearTheBranch</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git add clearTheBranch</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git commit -m&apos;clean this branch&apos;</span><br><span class="line">[master (root-commit) c7c5349] clean this branch</span><br><span class="line">1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line">create mode 100644 clearTheBranch</span><br></pre></td></tr></table></figure><h4 id="推送之前先更新（下面的代码是最核心的代码）"><a href="#推送之前先更新（下面的代码是最核心的代码）" class="headerlink" title="推送之前先更新（下面的代码是最核心的代码）"></a>推送之前先更新（下面的代码是最核心的代码）</h4><p>新建的分支默认与master分支一样，所以要在推送之前先把分支上的内容拉下来。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git pull origin laravel54</span><br><span class="line">warning: no common commits</span><br><span class="line">remote: Enumerating objects: 2453, done.</span><br><span class="line">remote: Counting objects: 100% (2453/2453), done.</span><br><span class="line">remote: Compressing objects: 100% (2320/2320), done.</span><br><span class="line">Receiviremote: Total 2453 (delta 1547), reused 229 (delta 89)</span><br><span class="line">Receiving objects: 100% (2453/2453), 1.40 MiB | 1.38 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1547/1547), done.</span><br><span class="line">From xxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"> * branch            laravel54 -&gt; FETCH_HEAD</span><br><span class="line"> * [new branch]      laravel54 -&gt; origin/laravel54</span><br><span class="line">fatal: refusing to merge unrelated histories</span><br></pre></td></tr></table></figure><p>这个时候会报错，是正常现象，，原因是本地仓库和远程仓库不一样，有类似两者有完全不相同的commit历史，只需要在在pull的同时加上一行代码即可，代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$  git pull origin laravel54 --allow-unrelated-histories</span><br><span class="line">From xxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"> * branch            laravel54 -&gt; FETCH_HEAD</span><br><span class="line">Merge made by the &apos;recursive&apos; strategy.</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>这步操作的时候，会有merge的commit说明，简单写下，这个只是merge的说明，并不会真正和mater合并。<br>经过这一步操作，就已经把远程仓库laravel54分支里面的文件都拉下来了，接下来建立与远程仓库对应的本地分支。</p><h4 id="建立并切换到本地分支-laravel54"><a href="#建立并切换到本地分支-laravel54" class="headerlink" title="建立并切换到本地分支 laravel54"></a>建立并切换到本地分支 laravel54</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git branch laravel54</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git checkout laravel54</span><br><span class="line">Switched to branch &apos;laravel54&apos;</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$</span><br><span class="line"></span><br><span class="line">// 也可以直接用 git checkout -b laravel54</span><br></pre></td></tr></table></figure><h4 id="删除本地仓库里的所有文件（除了-git的文件夹），然后推送"><a href="#删除本地仓库里的所有文件（除了-git的文件夹），然后推送" class="headerlink" title="删除本地仓库里的所有文件（除了.git的文件夹），然后推送"></a>删除本地仓库里的所有文件（除了.git的文件夹），然后推送</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git add .</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git commit -m&apos;delete all files&apos;</span><br><span class="line">[laravel54 d8bf12d] delete all files</span><br><span class="line">215 files changed, 32019 deletions(-)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git push origin laravel54</span><br><span class="line">Enumerating objects: 7, done.</span><br><span class="line">Counting objects: 100% (7/7), done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (4/4), done.</span><br><span class="line">Writing objects: 100% (6/6), 683 bytes | 341.00 KiB/s, done.</span><br><span class="line">Total 6 (delta 1), reused 1 (delta 0)</span><br><span class="line">remote: Powered by Gitee.com</span><br><span class="line">To xxxxxxxxxxxxxxxxxxxxx.git</span><br><span class="line">   c810298..d8bf12d  laravel54 -&gt; laravel54</span><br></pre></td></tr></table></figure><p>这个时候，远程仓库的<code>laravel54</code>分支便和本地仓库的<code>laravel54</code>分支一样都是空白的，这样就可以随心所欲的推送了。</p><h4 id="新项目推送"><a href="#新项目推送" class="headerlink" title="新项目推送"></a>新项目推送</h4><p>这时就可以把之前的项目拷进这个文件夹里面，然后按照正常的推送流程进行推送。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git add .</span><br><span class="line">warning: LF will be replaced by CRLF in .env.example.</span><br><span class="line">The file will have its original line endings in your working directory.</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git commit -m&apos;laravel54 push&apos;</span><br><span class="line">[laravel54 eba0954] laravel54 push</span><br><span class="line"> 113 files changed, 11583 insertions(+)</span><br><span class="line"> create mode 100644 .env.example</span><br><span class="line"> create mode 100644 .gitattributes</span><br><span class="line"> ...</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git push origin laravel54</span><br><span class="line">Enumerating objects: 152, done.</span><br><span class="line">Counting objects: 100% (152/152), done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (126/126), done.</span><br><span class="line">Writing objects: 100% (151/151), 211.43 KiB | 2.94 MiB/s, done.</span><br><span class="line">Total 151 (delta 14), reused 42 (delta 4)</span><br><span class="line">remote: Resolving deltas: 100% (14/14), done.</span><br><span class="line">remote: Powered by Gitee.com</span><br><span class="line">To xxxxxxxxxxxxxxxxxxxxx.git</span><br><span class="line">   d8bf12d..eba0954  laravel54 -&gt; laravel54</span><br></pre></td></tr></table></figure><h3 id="小总结"><a href="#小总结" class="headerlink" title="小总结"></a>小总结</h3><h4 id="不用担心推送错分支导致分支合并"><a href="#不用担心推送错分支导致分支合并" class="headerlink" title="不用担心推送错分支导致分支合并"></a>不用担心推送错分支导致分支合并</h4><p>经过如上操作，就可以实现master分支和laravel54是两个完全不同的项目，可以保持两个项目平行发展，因为两个分支的提交历史不一样，所以即便是误操作，提交错了分支，git会给出相应的报错，不会把两个分支直接合并，下面是代码演示：</p><ol><li><p>本地laravel54向远程master分支推送  </p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ touch a.txt</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git add a.txt</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git commit -m&apos;test file a.txt&apos;</span><br><span class="line">[laravel54 e246705] test file a.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 a.txt</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git push origin master</span><br><span class="line">To xxxxxxxxxxxxxxxxxxxxx.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to &apos;git@xxxxxxxxxxxxxxxxxxxxx.git&apos;</span><br><span class="line">hint: Updates were rejected because the remote contains work that you do</span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first integrate the remote changes</span><br><span class="line">hint: (e.g., &apos;git pull ...&apos;) before pushing again.</span><br><span class="line">hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details.</span><br><span class="line"></span><br><span class="line">//本地版本回退</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git log</span><br><span class="line">commit e246705e9894a658d3fb2ea8f51b1ee0dd8ff834 (HEAD -&gt; laravel54)</span><br><span class="line">Author: muyan &lt;xiao7shuang@qq.com&gt;</span><br><span class="line">Date:   Fri Jun 29 14:50:35 2018 +0800</span><br><span class="line"></span><br><span class="line">    test file a.txt</span><br><span class="line"></span><br><span class="line">commit eba09541b60e496127f6280c3db9611f72504744 (origin/laravel54)</span><br><span class="line">Author: muyan &lt;xiao7shuang@qq.com&gt;</span><br><span class="line">Date:   Fri Jun 29 14:36:48 2018 +0800</span><br><span class="line"></span><br><span class="line">    laravel54 push</span><br><span class="line"></span><br><span class="line">commit d8bf12d9df1337f9f7e0de723608796a490f66dc</span><br><span class="line">Author: muyan &lt;xiao7shuang@qq.com&gt;</span><br><span class="line">Date:   Fri Jun 29 14:24:02 2018 +0800</span><br><span class="line"></span><br><span class="line">    delete all files</span><br><span class="line"></span><br><span class="line">commit dcfb2b00f4f8ad0f1f672cde9b9e9ddc79d85239 (master)</span><br><span class="line">Merge: c7c5349 c810298</span><br><span class="line">Author: muyan &lt;xiao7shuang@qq.com&gt;</span><br><span class="line">Date:   Fri Jun 29 13:56:24 2018 +0800</span><br><span class="line"></span><br><span class="line">    Merge branch &apos;laravel54&apos; of xxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"></span><br><span class="line">    for claering the branch</span><br><span class="line"></span><br><span class="line">commit c7c5349779f868fbc1cf18d742d634c9d3267c32</span><br><span class="line">Author: muyan &lt;xiao7shuang@qq.com&gt;</span><br><span class="line">Date:   Fri Jun 29 13:55:01 2018 +0800</span><br><span class="line"></span><br><span class="line">    clean this branch</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git reset eba09541b60e496127f6280c3db9611f72504744    //回退到上一次提交之前的版本</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (laravel54)</span><br><span class="line">$ git status</span><br><span class="line">On branch laravel54</span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">        a.txt</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</span><br></pre></td></tr></table></figure></li><li><p>本地master分支向远程master分支推送</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git add a.txt</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git commit -m &apos;test file a&apos;</span><br><span class="line">[master d3e8bba] test file a</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 a.txt</span><br><span class="line"></span><br><span class="line">沐@ MINGW64 /d/PHP/xampp/htdocs/apple/laravel5.4 (master)</span><br><span class="line">$ git push origin master</span><br><span class="line">To xxxxxxxxxxxxxxxxxxxxx.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to &apos;git@xxxxxxxxxxxxxxxxxxxxx.git&apos;</span><br><span class="line">hint: Updates were rejected because the remote contains work that you do</span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first integrate the remote changes</span><br><span class="line">hint: (e.g., &apos;git pull ...&apos;) before pushing again.</span><br><span class="line">hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details.</span><br></pre></td></tr></table></figure></li></ol><h4 id="理论上可以实现无限平行分支，同样若一个项目中有版本（稳定版、开发版等），也可以跟据此思路扩展。"><a href="#理论上可以实现无限平行分支，同样若一个项目中有版本（稳定版、开发版等），也可以跟据此思路扩展。" class="headerlink" title="理论上可以实现无限平行分支，同样若一个项目中有版本（稳定版、开发版等），也可以跟据此思路扩展。"></a>理论上可以实现无限平行分支，同样若一个项目中有版本（稳定版、开发版等），也可以跟据此思路扩展。</h4>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h3&gt;&lt;p&gt;最近在用laravel开发微信小程序的接口，因为服务器PHP版本的问题，分别用了&lt;code&gt;laravel 5.6(php 7.1，开发环境)&lt;/code&gt;  和 &lt;code&gt;laravel 5.4 (php 5.6，服务器环境)&lt;/code&gt;，开发完成后，两个项目绝大部分的代码都差不多，不想再建一个仓库放&lt;code&gt;php 5.6&lt;/code&gt;版的代码，便试着在原有仓库新建分支来存储&lt;code&gt;php 5.6&lt;/code&gt;的项目，捣鼓的一上午终于搞出来了，现在记录下。&lt;/p&gt;
&lt;p&gt;主要步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在远程和本地仓库中新建一个分支（我建的是&lt;code&gt;laravel54&lt;/code&gt;）；&lt;/li&gt;
&lt;li&gt;删除远程&lt;code&gt;laravel54&lt;/code&gt;分支上的所有文件；&lt;/li&gt;
&lt;li&gt;将新项目的文件推送到&lt;code&gt;laravel54&lt;/code&gt;上。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;文章中的代码没有高亮化，看着可能不太舒服，其他平台地址：&lt;a href=&quot;https://segmentfault.com/a/1190000015430066&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;segmentfault&lt;/a&gt; &lt;a href=&quot;https://www.jianshu.com/p/922590337264&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;简书&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="git" scheme="http://Mine-MuYan.github.com/categories/git/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>有趣的小算法（PHP版）</title>
    <link href="http://Mine-MuYan.github.com/2018/05/28/%E6%9C%89%E8%B6%A3%E7%9A%84%E5%B0%8F%E7%AE%97%E6%B3%95%EF%BC%88PHP%E7%89%88%EF%BC%89/"/>
    <id>http://Mine-MuYan.github.com/2018/05/28/有趣的小算法（PHP版）/</id>
    <published>2018-05-28T09:59:23.000Z</published>
    <updated>2020-03-24T06:42:08.798Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要记录一些在工作、生活中遇到的有趣的算法，旨在用简单的代码给出过程和答案（基于目前编程水平的理解），不定期更新。</p><a id="more"></a><h3 id="打印函数封装"><a href="#打印函数封装" class="headerlink" title="打印函数封装"></a>打印函数封装</h3><p>为打印数据方便，简单自定义一个打印函数。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * format and output array,string, supporting objects</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   mixed   $print</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $show</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   bool    $need</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pp</span><span class="params">($print,$show = <span class="string">'pp'</span>,$need = false)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;div style="border: 1px solid bisque;border-bottom-color:red;border-right-color:red;color:green;background-color: bisque;"&gt;&lt;pre&gt;'</span>;</span><br><span class="line">    <span class="keyword">if</span>($need &amp;&amp; is_object($print))&#123;</span><br><span class="line">        $print = json_decode($print);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>($show === <span class="string">'pp'</span>)&#123;</span><br><span class="line">        print_r($print);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>($show === <span class="string">'var'</span>)&#123;</span><br><span class="line">        var_dump($print);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;&lt;/div&gt;'</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="“约瑟夫手环”"><a href="#“约瑟夫手环”" class="headerlink" title="“约瑟夫手环”"></a>“约瑟夫手环”</h3><h4 id="故事背景"><a href="#故事背景" class="headerlink" title="故事背景"></a>故事背景</h4><p>一群人排成一圈，按1,2,…,30依次编号。然后从第1个开始数，数到第7个把他踢出圈，从他后面再开始数，再数到第7个，在把他踢出去，如此不停的进行下去，直到最后个剩下一个人为止，求出最后剩下的那个人是谁。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$arr = range(<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">$num = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(count($arr) !== <span class="number">1</span>)&#123;</span><br><span class="line">    <span class="keyword">foreach</span>($arr <span class="keyword">as</span> $k =&gt; $v)&#123;</span><br><span class="line">        $num++;</span><br><span class="line">        <span class="keyword">if</span>($num % <span class="number">7</span> === <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">unset</span>($arr[$k]);</span><br><span class="line">            $num = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pp($arr);</span><br></pre></td></tr></table></figure><h4 id="思路说明"><a href="#思路说明" class="headerlink" title="思路说明"></a>思路说明</h4><ol><li>解题关键点是不能被编号为1到30的人所迷惑，最直接的办法就是如上：设置一个变量，让他从零自增，自增到7再重新赋值为0，每次这个变量的值为7的时候，便把数组中循环了7次时对应的键删掉，核心逻辑就这么多；</li><li><code>unset($arr[$k]);</code>不能替换成<code>unset($v)</code>，<code>unset($v)</code>这只是把$v这个数字删除掉，但并没有把数组中这个值对应的键删掉。 </li></ol><h4 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">theLastOne</span><span class="params">($peopleCount,$remove)</span></span>&#123;</span><br><span class="line">    $arr = range(<span class="number">1</span>,$peopleCount);</span><br><span class="line">    $num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(count($arr) !== <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">foreach</span>($arr <span class="keyword">as</span> $k =&gt; $v)&#123;</span><br><span class="line">            $num++;</span><br><span class="line">            <span class="keyword">if</span>($num % $remove === <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">unset</span>($arr[$k]);</span><br><span class="line">                $num = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pp(theLastOne(<span class="number">30</span>,<span class="number">7</span>));</span><br></pre></td></tr></table></figure><h3 id="关于分钱的问题"><a href="#关于分钱的问题" class="headerlink" title="关于分钱的问题"></a>关于分钱的问题</h3><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>将10000块钱分成5份，且每一份之间的相差的值$d不一样，并且相差$d得大于100。</p><h4 id="代码及调用"><a href="#代码及调用" class="headerlink" title="代码及调用"></a>代码及调用</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断数组内是否有差值相等</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_diff</span><span class="params">($arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">empty</span>($arr))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    $arr = array_map(<span class="string">'intval'</span>,$arr);</span><br><span class="line">    sort($arr);</span><br><span class="line">    </span><br><span class="line">    $count    = count($arr);</span><br><span class="line">    $diff_arr = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span>($i = $count - <span class="number">1</span>;$i &gt;= <span class="number">0</span>;$i--)&#123;</span><br><span class="line">        <span class="keyword">for</span>($j = <span class="number">0</span>;$j &lt; $count;$j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>($arr[$i] &lt;= $arr[$j])&#123;</span><br><span class="line">                <span class="keyword">continue</span> <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            $diff_arr[] = $arr[$i] - $arr[$j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> count($diff_arr) === count(array_unique($diff_arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主要处理逻辑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span><span class="params">($sum = <span class="number">10000</span>,$diff = <span class="number">100</span>,$count = <span class="number">5</span>)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    $return = <span class="keyword">array</span>();</span><br><span class="line">    $i      = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>($i &lt; $count)&#123;</span><br><span class="line">        <span class="comment">// 随机数不符合要求时的结果初始化</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">isset</span>($return[$i]) || <span class="keyword">isset</span>($return[$i + <span class="number">1</span>]))&#123;</span><br><span class="line">            <span class="keyword">unset</span>($return[$i],$return[$i + <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        $remain_sum   = $sum - array_sum($return);      <span class="comment">// 剩余数</span></span><br><span class="line">        $remain_count = ($count - count($return));     <span class="comment">// 剩余需要随机的个数</span></span><br><span class="line">        $min_diff     = $remain_count * ($remain_count - <span class="number">1</span>) * (<span class="number">2</span> * ($remain_count - <span class="number">1</span>) + <span class="number">4</span>) / <span class="number">12</span> + ($remain_count * ($remain_count - <span class="number">1</span>) / <span class="number">2</span>) * $diff;<span class="comment">// 高斯求最小差值和，分两部分：S = n(n+1)(2n+4)/12 + $diff * ((n-1)(n-2)/2)</span></span><br><span class="line">        $min          = $i === <span class="number">1</span> ? <span class="number">1</span> : $return[$i - <span class="number">1</span>] + $diff + <span class="number">1</span>; <span class="comment">// 随机范围的最小值</span></span><br><span class="line">        mt_srand((double)microtime() * <span class="number">1000000</span>);<span class="comment">// 在范围内获取随机数</span></span><br><span class="line">        $rand_max   = (int)(($remain_sum - $min_diff) / $remain_count); <span class="comment">// 随机范围的最大值</span></span><br><span class="line">        $min        = random_int($min,$rand_max);   <span class="comment">// 产生随机数</span></span><br><span class="line">        $return[$i] = $min;     <span class="comment">// 放入返回的数组</span></span><br><span class="line">        <span class="keyword">if</span>($i === $count - <span class="number">1</span>)&#123;</span><br><span class="line">            $return[$i + <span class="number">1</span>] = $remain_sum - $min;   <span class="comment">// 最后一个随机数直接取总数减去前面的随机数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(check_diff($return) === <span class="keyword">false</span>)&#123;</span><br><span class="line">            $i--;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $i++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> $return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pp(process());</span><br></pre></td></tr></table></figure><h4 id="思路说明-1"><a href="#思路说明-1" class="headerlink" title="思路说明"></a>思路说明</h4><p><a href="https://segmentfault.com/q/1010000015064381" target="_blank" rel="noopener">问题链接</a></p><div class="text-right" style="font-size:12px;color:gray"><em>更新时间：2018-05-31 15:30</em></div>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文主要记录一些在工作、生活中遇到的有趣的算法，旨在用简单的代码给出过程和答案（基于目前编程水平的理解），不定期更新。&lt;/p&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/categories/PHP/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>win下MySQL 8.0.11的安装、修改密码、开启远程访问</title>
    <link href="http://Mine-MuYan.github.com/2018/05/11/MySQL-8-0-11%E7%9A%84%E5%AE%89%E8%A3%85%E3%80%81%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E3%80%81%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/"/>
    <id>http://Mine-MuYan.github.com/2018/05/11/MySQL-8-0-11的安装、修改密码、开启远程访问/</id>
    <published>2018-05-11T02:23:26.000Z</published>
    <updated>2020-03-24T06:42:08.852Z</updated>
    
    <content type="html"><![CDATA[<p>昨天匆匆安装了MySQL，并修改了密码、开启远程访问，现在记录分享下，希望对你能有所帮助。<br>安装环境：win server 2012 R2<br>MySQL版本：8.0.11 zip免安装版</p><a id="more"></a><p><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">下载地址</a></p><p>下载后，进行解压，我的目录为：<code>D:\APP\MySQL</code></p><h3 id="新建配置文件-my-ini，内容如下："><a href="#新建配置文件-my-ini，内容如下：" class="headerlink" title="新建配置文件 my.ini，内容如下："></a>新建配置文件 my.ini，内容如下：</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Client]</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">3306</span></span><br><span class="line"> </span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">3306</span></span><br><span class="line"><span class="attr">basedir</span>=D:/APP/MySQL</span><br><span class="line"><span class="attr">datadir</span>=D:/APP/MySQL/data</span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">200</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="attr">sql_mode</span>=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line"><span class="comment">#忘记密码时使用</span></span><br><span class="line"><span class="comment">#skip-grant-tables</span></span><br><span class="line"><span class="comment">#设置协议认证方式</span></span><br><span class="line"><span class="attr">default_authentication_plugin</span>=mysql_native_password</span><br><span class="line"></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br></pre></td></tr></table></figure><h3 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h3><h3 id="以管理员身份运行-cmd-否则可能会出现权限不足的问题，下列操作均在cmd中运行"><a href="#以管理员身份运行-cmd-否则可能会出现权限不足的问题，下列操作均在cmd中运行" class="headerlink" title="以管理员身份运行 cmd 否则可能会出现权限不足的问题，下列操作均在cmd中运行"></a>以管理员身份运行 cmd 否则可能会出现权限不足的问题，下列操作均在cmd中运行</h3><h3 id="安装并启动MySQL服务"><a href="#安装并启动MySQL服务" class="headerlink" title="安装并启动MySQL服务"></a>安装并启动MySQL服务</h3><p><code>mysqld --install</code></p><p>返回结果为 <code>Service successfully installed</code></p><p><code>net start MySQL</code> 或在服务中启动mysql服务</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>mysqld --initialize-insecure</code><br>这个命令在运行时，光标一直闪，表示正在安装中，直到cmd可以进行输入，即是安装完成；<br>我看别人有这样安装的：<br><code>mysqld --initialize --console</code><br>两者的区别是上面这个会展示安装过程并生成一个默认的数据库密码，而我用的方法，不展示安装过程，默认密码为空。</p><h3 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;111111&apos;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>这期间还涉及MySQL的密码认证插件是<code>mysql_native_password</code>，而现在使用的是<code>caching_sha2_password</code>。</p><p>因为当前有很多数据库工具和链接包都不支持<code>caching_sha2_password</code>，为了方便，我暂时还是改回了<code>mysql_native_password</code>认证插件。</p><p>在MySQL中执行命令：</p><p><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;</code><br>修改密码验证插件，同时修改密码。</p><p>如果想默认使用<code>mysql_native_password</code>插件认证，可以在配置文件中配置<code>default_authentication_plugin</code>项，这个在新建<code>my.ini</code>中已经设置过了。 <a href="http://www.jb51.net/article/139244.htm" target="_blank" rel="noopener">参考链接</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br></pre></td></tr></table></figure><h3 id="开启远程访问"><a href="#开启远程访问" class="headerlink" title="开启远程访问"></a>开启远程访问</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;111111&apos;;</span><br><span class="line">GRANT ALL ON *.* TO &apos;root&apos;@&apos;%&apos;;</span><br><span class="line">ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;111111&apos;;</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/4950628-e9a0365eee4178fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/645" alt="执行过程"></p><p>在网上看到了两种<a href="http://www.bubuko.com/infodetail-2594533.html" target="_blank" rel="noopener">开启远程方法</a>的方法：<br>在使用第一种方法时会报这样的错误：</p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-aaf6135c438e3f68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/591" alt="报错"></p><p>开启远程访问这块还分为root账户的远程访问或者指定某个非root账户，网上有很多，就不说明了。</p><blockquote><p>安装好后，至今还没有什么问题，若你预遇见了问题，欢迎和我交流。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;昨天匆匆安装了MySQL，并修改了密码、开启远程访问，现在记录分享下，希望对你能有所帮助。&lt;br&gt;安装环境：win server 2012 R2&lt;br&gt;MySQL版本：8.0.11 zip免安装版&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="http://Mine-MuYan.github.com/categories/MySQL/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>国际坐标转换</title>
    <link href="http://Mine-MuYan.github.com/2018/04/28/GPS%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2/"/>
    <id>http://Mine-MuYan.github.com/2018/04/28/GPS坐标转换/</id>
    <published>2018-04-28T02:25:44.000Z</published>
    <updated>2020-03-24T06:42:08.733Z</updated>
    
    <content type="html"><![CDATA[<p>工作中用到国际坐标转百度坐标的方法，根据百度地图提供的api，坐标的转换只能用官方提供的api来进行坐标转换，因数据量大，用接口请求数据会导致数据不能及时处理，所以在网上找了好久，再加上同事的帮助和自己的整理，终于整理出PHP可用的坐标转换。</p><a id="more"></a><h3 id="类文件-Position-php"><a href="#类文件-Position-php" class="headerlink" title="类文件 Position.php"></a>类文件 Position.php</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">Class</span> <span class="title">BaiduCoordinate</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> $x_PI = <span class="number">3.14159265358979324</span> * <span class="number">3000.0</span> / <span class="number">180.0</span>;</span><br><span class="line">    <span class="keyword">private</span> $PI   = <span class="number">3.1415926535897932384626</span>;</span><br><span class="line">    <span class="keyword">private</span> $a    = <span class="number">6378245.0</span>;</span><br><span class="line">    <span class="keyword">private</span> $ee   = <span class="number">0.00669342162296594323</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">gcj02tobd09</span><span class="params">($a,$b)</span></span>&#123;</span><br><span class="line">        $confir = <span class="keyword">$this</span> -&gt; wgs84togcj02($a,$b);</span><br><span class="line">        [$a,$b] = $confir;</span><br><span class="line">        $z      = sqrt($a * $a + $b * $b) + <span class="number">0.00002</span> * sin($b * <span class="keyword">$this</span> -&gt; x_PI);</span><br><span class="line">        $theta  = atan2($b,$a) + <span class="number">0.000003</span> * cos($a * <span class="keyword">$this</span> -&gt; x_PI);</span><br><span class="line">        $gb     = number_format($z * cos($theta) + <span class="number">0.0065</span>,<span class="number">6</span>);</span><br><span class="line">        $ga     = number_format($z * sin($theta) + <span class="number">0.006</span>,<span class="number">6</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> [$gb,$ga];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">wgs84togcj02</span><span class="params">($lng,$lat)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">        $lng = <span class="keyword">$this</span> -&gt; latlng($lng);</span><br><span class="line">        $lat = <span class="keyword">$this</span> -&gt; latlng($lat);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span> -&gt; out_of_china($lng,$lat))&#123;</span><br><span class="line">            <span class="keyword">return</span> [$lng,$lat];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $dlat      = <span class="keyword">$this</span> -&gt; transformlat($lng - <span class="number">105.0</span>,$lat - <span class="number">35.0</span>);</span><br><span class="line">            $dlng      = <span class="keyword">$this</span> -&gt; transformlng($lng - <span class="number">105.0</span>,$lat - <span class="number">35.0</span>);</span><br><span class="line">            $radlat    = $lat / <span class="number">180.0</span> * <span class="keyword">$this</span> -&gt; PI;</span><br><span class="line">            $magic     = sin($radlat);</span><br><span class="line">            $magic     = <span class="number">1</span> - <span class="keyword">$this</span> -&gt; ee * $magic * $magic;</span><br><span class="line">            $sqrtmagic = sqrt($magic);</span><br><span class="line">            $dlat      = ($dlat * <span class="number">180.0</span>) / ((<span class="keyword">$this</span> -&gt; a * (<span class="number">1</span> - <span class="keyword">$this</span> -&gt; ee)) / ($magic * $sqrtmagic) * <span class="keyword">$this</span> -&gt; PI);</span><br><span class="line">            $dlng      = ($dlng * <span class="number">180.0</span>) / (<span class="keyword">$this</span> -&gt; a / $sqrtmagic * cos($radlat) * <span class="keyword">$this</span> -&gt; PI);</span><br><span class="line">            $mglat     = $lat + $dlat;</span><br><span class="line">            $mglng     = $lng + $dlng;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> [$mglng,$mglat];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">out_of_china</span><span class="params">($lng,$lat)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 纬度3.86~53.55,经度73.66~135.05</span></span><br><span class="line">        <span class="keyword">return</span> !($lng &gt; <span class="number">73.66</span> &amp;&amp; $lng &lt; <span class="number">135.05</span> &amp;&amp; $lat &gt; <span class="number">3.86</span> &amp;&amp; $lat &lt; <span class="number">53.55</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">transformlng</span><span class="params">($lng,$lat)</span></span>&#123;</span><br><span class="line">        $ret = <span class="number">300.0</span> + $lng + <span class="number">2.0</span> * $lat + <span class="number">0.1</span> * $lng * $lng + <span class="number">0.1</span> * $lng * $lat + <span class="number">0.1</span> * sqrt(abs($lng));</span><br><span class="line">        $ret += (<span class="number">20.0</span> * sin(<span class="number">6.0</span> * $lng * <span class="keyword">$this</span> -&gt; PI) + <span class="number">20.0</span> * sin(<span class="number">2.0</span> * $lng * <span class="keyword">$this</span> -&gt; PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        $ret += (<span class="number">20.0</span> * sin($lng * <span class="keyword">$this</span> -&gt; PI) + <span class="number">40.0</span> * sin($lng / <span class="number">3.0</span> * <span class="keyword">$this</span> -&gt; PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        $ret += (<span class="number">150.0</span> * sin($lng / <span class="number">12.0</span> * <span class="keyword">$this</span> -&gt; PI) + <span class="number">300.0</span> * sin($lng / <span class="number">30.0</span> * <span class="keyword">$this</span> -&gt; PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> $ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">transformlat</span><span class="params">($lng,$lat)</span></span>&#123;</span><br><span class="line">        $ret = <span class="number">-100.0</span> + <span class="number">2.0</span> * $lng + <span class="number">3.0</span> * $lat + <span class="number">0.2</span> * $lat * $lat + <span class="number">0.1</span> * $lng * $lat + <span class="number">0.2</span> * sqrt(abs($lng));</span><br><span class="line">        $ret += (<span class="number">20.0</span> * sin(<span class="number">6.0</span> * $lng * <span class="keyword">$this</span> -&gt; PI) + <span class="number">20.0</span> * sin(<span class="number">2.0</span> * $lng * <span class="keyword">$this</span> -&gt; PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        $ret += (<span class="number">20.0</span> * sin($lat * <span class="keyword">$this</span> -&gt; PI) + <span class="number">40.0</span> * sin($lat / <span class="number">3.0</span> * <span class="keyword">$this</span> -&gt; PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        $ret += (<span class="number">160.0</span> * sin($lat / <span class="number">12.0</span> * <span class="keyword">$this</span> -&gt; PI) + <span class="number">320</span> * sin($lat * <span class="keyword">$this</span> -&gt; PI / <span class="number">30.0</span>)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> $ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">latlng</span><span class="params">($lat)</span></span>&#123;</span><br><span class="line">        $lat_val = floor($lat / <span class="number">100</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> (($lat / <span class="number">100</span>) - $lat_val) * <span class="number">100</span> / <span class="number">60</span> + $lat_val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 离线百度坐标转换</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $gpsx</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $gpsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gpsPosition</span><span class="params">($gpsx,$gpsy)</span></span>&#123;</span><br><span class="line">    <span class="keyword">require</span> <span class="string">'Position.php'</span>;</span><br><span class="line">    $BaiduCoordinate = <span class="keyword">new</span> BaiduCoordinate();</span><br><span class="line">    $gpsArr = $BaiduCoordinate -&gt; gcj02tobd09($gpsx,$gpsy);</span><br><span class="line">    <span class="keyword">return</span> implode(<span class="string">','</span>,$gpsArr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$gpsx   = <span class="string">'11712.7609'</span>;</span><br><span class="line">$gpsy   = <span class="string">'3150.1322'</span>;</span><br><span class="line">$result = gpsPosition($gpsx,$gpsy);</span><br><span class="line">var_dump($result);</span><br></pre></td></tr></table></figure><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol><li><a href="http://lbsyun.baidu.com/index.php?title=coordinate" target="_blank" rel="noopener">坐标系说明</a></li><li><a href="http://lbsyun.baidu.com/index.php?title=webapi/guide/changeposition" target="_blank" rel="noopener">百度坐标转换API</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;工作中用到国际坐标转百度坐标的方法，根据百度地图提供的api，坐标的转换只能用官方提供的api来进行坐标转换，因数据量大，用接口请求数据会导致数据不能及时处理，所以在网上找了好久，再加上同事的帮助和自己的整理，终于整理出PHP可用的坐标转换。&lt;/p&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/categories/PHP/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>Hexo重装与位置移动</title>
    <link href="http://Mine-MuYan.github.com/2018/03/23/Hexo%E9%87%8D%E8%A3%85%E4%B8%8E%E4%BD%8D%E7%BD%AE%E7%A7%BB%E5%8A%A8/"/>
    <id>http://Mine-MuYan.github.com/2018/03/23/Hexo重装与位置移动/</id>
    <published>2018-03-23T07:34:54.000Z</published>
    <updated>2020-03-24T06:42:08.782Z</updated>
    
    <content type="html"><![CDATA[<p>　　之前写过一篇关于<a href="http://lql.life/2017/04/27/Hexo-%E5%9C%A8%E5%8F%A6%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E4%B8%8A%E5%86%99%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">Hexo–在另一台电脑上写博客</a>的博文，当时对hexo并不是很熟悉，稀里糊涂搞好后，便匆匆记录了下来。在今天重装的时候，才发现是自己给自己挖坑了，其实无论是换台电脑写博客或者重新安装都很简单，现在详细说明下。</p><a id="more"></a><h2 id="基础环境搭建"><a href="#基础环境搭建" class="headerlink" title="基础环境搭建"></a>基础环境搭建</h2><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>　　电脑中已经安装了<code>git</code>和<code>node.js</code>，直接随便找个文件夹在 <code>git bash</code> 中执行 <code>npm install -g hexo-cli</code>，这一步是安装<code>hexo</code>。<br>检测<code>hexo</code>是否成功安装，在 <code>git bash</code> 执行 <code>hexo v</code> 看到<code>hexo</code>的版本号就说明安装成功了。</p><p>　　之后创建本地<code>hexo</code>仓库，<code>hexo init &lt;folder&gt;</code> 也可以<code>cd</code>到目标目录，执行<code>hexo init</code>（这里用<code>blog</code>文件夹做说明 <code>hexo init &lt;blog&gt;</code> 或者新建一个<code>blog</code>的文件夹然后执行 <code>hexo init</code>），这一步文件夹内会生成一些基本的文件，这些都是<code>hexo</code>自动部署的，跟<code>git init</code> 同一个道理。<br>　　然后 执行 <code>npm install hexo-deployer-git --save</code> 安装<code>hexo</code>提供的快速方便的一键部署功能，然后改 <code>_config.yml</code> 中最下面的配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt;</span><br><span class="line">  branch: [branch]</span><br><span class="line">  message: [message]</span><br></pre></td></tr></table></figure><p>　　至此，全部安装工作已经完成，可以在<code>blog</code>的目录下用<code>hexo s</code>测试是否正常。</p><h3 id="ssh生成"><a href="#ssh生成" class="headerlink" title="ssh生成"></a>ssh生成</h3><p>　　若本机中已经有<code>ssh</code>，直接添加到<code>github</code>的<code>ssh</code>里面即可，本地没有话，先生成  <code>ssh-keygen -t rsa -C &quot;qq-email@qq.com&quot;</code> （执行期间会让选择放置ssh的目录和ssh密码），用文本编辑器打开ssh.pub文件，拷贝其中的内容，将其添加到 <code>github</code>的 <code>Add SSH Key</code>，添加完成后用 <code>ssh -T git@github.com</code>若提示 <code>Hi *****! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>，这就说明与<code>github</code>连接成功了。</p><h2 id="重装和迁移"><a href="#重装和迁移" class="headerlink" title="重装和迁移"></a>重装和迁移</h2><h3 id="重装"><a href="#重装" class="headerlink" title="重装"></a>重装</h3><p>　　这个概念跟网上说的，如何在另外一台电脑写博客是一个意思，没有很多繁琐的操作，<strong>只需要把 <code>source</code>、<code>themes</code> 、 <code>_config.yml</code> 覆盖到 <code>blog</code> 的那个文件夹即可</strong> ，只要<code>hexo</code>环境没问题，<code>hexo</code>的一系列操作都没问题（在第一次<code>hexo d</code>可能会有些慢，耐心等待）。<br>　　同样，在新电脑上只要把环境搭建好，只要把两个文件夹一个配置文件覆盖过去，都没问题。<br>　　包括在备份时也只需要把这两个文件夹一个配置文件备份好，其他的都不用管了。</p><h3 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h3><p>　　至于说迁移，只要本机的<code>hexo</code>环境没问题，把<code>blog</code>文件夹随便放哪都可以。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>　　折腾了一下午总结出来的：</p><ol><li>换系统或者换电脑需要重装 <code>hexo</code> 的时候，只需要在<code>hexo</code>环境搭建好的基础上，只需要把 <code>source</code>、<code>themes</code> 、 <code>_config.yml</code> 覆盖到新的博客目录下即可。</li><li>只要本机的<code>hexo</code>环境没问题，把<code>blog</code>文件夹随便放哪都可以。</li><li>应该是<code>hexo</code>版本更新了的缘故，<code>hexo d</code>时只能在<code>git bash</code>中执行，其他（window环境）命令行模式都是提示无法获取远程仓库或者没有权限。</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　之前写过一篇关于&lt;a href=&quot;http://lql.life/2017/04/27/Hexo-%E5%9C%A8%E5%8F%A6%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E4%B8%8A%E5%86%99%E5%8D%9A%E5%AE%A2/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo–在另一台电脑上写博客&lt;/a&gt;的博文，当时对hexo并不是很熟悉，稀里糊涂搞好后，便匆匆记录了下来。在今天重装的时候，才发现是自己给自己挖坑了，其实无论是换台电脑写博客或者重新安装都很简单，现在详细说明下。&lt;/p&gt;
    
    </summary>
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="Hexo" scheme="http://Mine-MuYan.github.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>PHP方法精选</title>
    <link href="http://Mine-MuYan.github.com/2017/10/16/PHP%E5%87%BD%E6%95%B0%E7%B2%BE%E9%80%89/"/>
    <id>http://Mine-MuYan.github.com/2017/10/16/PHP函数精选/</id>
    <published>2017-10-16T07:48:00.000Z</published>
    <updated>2020-03-24T09:48:55.550Z</updated>
    
    <content type="html"><![CDATA[<p><strong>这些都是工作中用到的比较常用或者有意思的PHP方法，持续更新中…</strong><br><a id="more"></a></p><h3 id="显示彩虹字符串"><a href="#显示彩虹字符串" class="headerlink" title="显示彩虹字符串"></a>显示彩虹字符串</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">color_txt</span><span class="params">($str)</span></span>&#123;</span><br><span class="line">    $len        = mb_strlen($str);</span><br><span class="line">    $colorTxt   = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;$len; $i++) &#123;</span><br><span class="line">        $colorTxt .=  <span class="string">'&lt;span style="color:'</span>.rand_color().<span class="string">'"&gt;'</span>.mb_substr($str,$i,<span class="number">1</span>,<span class="string">'utf-8'</span>).<span class="string">'&lt;/span&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $colorTxt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rand_color</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'#'</span>.sprintf(<span class="string">"%02X"</span>,mt_rand(<span class="number">0</span>,<span class="number">255</span>)).sprintf(<span class="string">"%02X"</span>,mt_rand(<span class="number">0</span>,<span class="number">255</span>)).sprintf(<span class="string">"%02X"</span>,mt_rand(<span class="number">0</span>,<span class="number">255</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> color_txt(<span class="string">'asdfwerwtertsadfsadfwtwer'</span>);</span><br></pre></td></tr></table></figure><h3 id="对查询结果集进行排序"><a href="#对查询结果集进行排序" class="headerlink" title="对查询结果集进行排序"></a>对查询结果集进行排序</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> +----------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * 对查询结果集进行排序</span></span><br><span class="line"><span class="comment"> +----------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array $list 查询结果</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $field 排序的字段名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $sortby 排序类型</span></span><br><span class="line"><span class="comment"> * asc正向排序 desc逆向排序 nat自然排序</span></span><br><span class="line"><span class="comment"> +----------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> +----------------------------------------------------------</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">list_sort_by</span><span class="params">($list,$field, $sortby=<span class="string">'asc'</span>)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(is_array($list))&#123;</span><br><span class="line">       $refer = $resultSet = <span class="keyword">array</span>();</span><br><span class="line">       <span class="keyword">foreach</span> ($list <span class="keyword">as</span> $i =&gt; $data)</span><br><span class="line">           $refer[$i] = &amp;$data[$field];</span><br><span class="line">       <span class="keyword">switch</span> ($sortby) &#123;</span><br><span class="line">           <span class="keyword">case</span> <span class="string">'asc'</span>: <span class="comment">// 正向排序</span></span><br><span class="line">                asort($refer);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> <span class="string">'desc'</span>:<span class="comment">// 逆向排序</span></span><br><span class="line">                arsort($refer);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> <span class="string">'nat'</span>: <span class="comment">// 自然排序</span></span><br><span class="line">                natcasesort($refer);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">foreach</span> ( $refer <span class="keyword">as</span> $key=&gt; $val)</span><br><span class="line">           $resultSet[] = &amp;$list[$key];</span><br><span class="line">       <span class="keyword">return</span> $resultSet;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二维数组按指定的键值排序"><a href="#二维数组按指定的键值排序" class="headerlink" title="二维数组按指定的键值排序"></a>二维数组按指定的键值排序</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">* 二维数组按指定的键值排序 </span></span><br><span class="line"><span class="comment">* $array 数组</span></span><br><span class="line"><span class="comment">* $key排序键值</span></span><br><span class="line"><span class="comment">* $type排序方式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">array_sort</span><span class="params">($arr, $keys, $type = <span class="string">'desc'</span>)</span> </span>&#123;</span><br><span class="line">    $keysvalue = $new_array = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">foreach</span> ($arr <span class="keyword">as</span> $k =&gt; $v) &#123;</span><br><span class="line">        $keysvalue[$k] = $v[$keys];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($type == <span class="string">'asc'</span>) &#123;</span><br><span class="line">        asort($keysvalue);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        arsort($keysvalue);</span><br><span class="line">    &#125;</span><br><span class="line">    reset($keysvalue);</span><br><span class="line">    <span class="keyword">foreach</span> ($keysvalue <span class="keyword">as</span> $k =&gt; $v) &#123;</span><br><span class="line">        $new_array[$k] = $arr[$k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $new_array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="php判断手机移动设备访问，返回true是移动设备"><a href="#php判断手机移动设备访问，返回true是移动设备" class="headerlink" title="php判断手机移动设备访问，返回true是移动设备"></a>php判断手机移动设备访问，返回true是移动设备</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is_mobile</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">// 如果有HTTP_X_WAP_PROFILE则一定是移动设备</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span> ($_SERVER[<span class="string">'HTTP_X_WAP_PROFILE'</span>]))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 如果via信息含有wap则一定是移动设备,部分服务商会屏蔽该信息</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span> ($_SERVER[<span class="string">'HTTP_VIA'</span>]))</span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">// 找不到为flase,否则为true</span></span><br><span class="line">        <span class="keyword">return</span> stristr($_SERVER[<span class="string">'HTTP_VIA'</span>], <span class="string">"wap"</span>) ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 脑残法，判断手机发送的客户端标志,兼容性有待提高</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span> ($_SERVER[<span class="string">'HTTP_USER_AGENT'</span>]))</span><br><span class="line">    &#123;</span><br><span class="line">        $clientkeywords = <span class="keyword">array</span> ( <span class="string">'nokia'</span>, <span class="string">'oppo'</span>, <span class="string">'xiaomi'</span>, <span class="string">'miui'</span>, <span class="string">'huawei'</span>, <span class="string">'coolpad'</span>, <span class="string">'sony'</span>, <span class="string">'ericsson'</span>, <span class="string">'mot'</span>, <span class="string">'samsung'</span>, <span class="string">'htc'</span>, <span class="string">'sgh'</span>, <span class="string">'lg'</span>, <span class="string">'sharp'</span>, <span class="string">'sie-'</span>, <span class="string">'philips'</span>, <span class="string">'panasonic'</span>, <span class="string">'alcatel'</span>, <span class="string">'lenovo'</span>, <span class="string">'iphone'</span>, <span class="string">'ipod'</span>, <span class="string">'blackberry'</span>, <span class="string">'meizu'</span>, <span class="string">'android'</span>, <span class="string">'netfront'</span>, <span class="string">'symbian'</span>, <span class="string">'ucweb'</span>, <span class="string">'windowsce'</span>, <span class="string">'palm'</span>, <span class="string">'operamini'</span>, <span class="string">'operamobi'</span>, <span class="string">'openwave'</span>, <span class="string">'nexusone'</span>, <span class="string">'cldc'</span>, <span class="string">'midp'</span>, <span class="string">'wap'</span>, <span class="string">'mobile'</span> );</span><br><span class="line">    <span class="comment">// 从HTTP_USER_AGENT中查找手机浏览器的关键字</span></span><br><span class="line">        <span class="keyword">if</span> (preg_match(<span class="string">"/("</span> . implode(<span class="string">'|'</span>, $clientkeywords) . <span class="string">")/i"</span>, strtolower($_SERVER[<span class="string">'HTTP_USER_AGENT'</span>])))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 协议法，因为有可能不准确，放到最后判断</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span> ($_SERVER[<span class="string">'HTTP_ACCEPT'</span>]))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果只支持wml并且不支持html那一定是移动设备</span></span><br><span class="line">        <span class="comment">// 如果支持wml和html但是wml在html之前则是移动设备</span></span><br><span class="line">        <span class="keyword">if</span> ((strpos($_SERVER[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'vnd.wap.wml'</span>) !== <span class="keyword">false</span>) &amp;&amp; (strpos($_SERVER[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'text/html'</span>) === <span class="keyword">false</span> || (strpos($_SERVER[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'vnd.wap.wml'</span>) &lt; strpos($_SERVER[<span class="string">'HTTP_ACCEPT'</span>], <span class="string">'text/html'</span>))))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="将数组形式的字符串转成数组"><a href="#将数组形式的字符串转成数组" class="headerlink" title="将数组形式的字符串转成数组"></a>将数组形式的字符串转成数组</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strToArray</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//数组形式的字符串</span></span><br><span class="line">$arr = <span class="string">"array('name'=&gt;'张三','age'=&gt;'16')"</span>;</span><br><span class="line">    $str = [];</span><br><span class="line">    <span class="keyword">eval</span>(<span class="string">"\$str = "</span>.$arr.<span class="string">'; '</span>);</span><br><span class="line">    pp($str); <span class="comment">//$str即为数组</span></span><br><span class="line">    pp($str[<span class="string">'name'</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://blog.csdn.net/aiku_de_yu/article/details/51037178" target="_blank" rel="noopener">参考链接</a></p><h3 id="取去数组中某age键值小于15的其他数组"><a href="#取去数组中某age键值小于15的其他数组" class="headerlink" title="取去数组中某age键值小于15的其他数组"></a>取去数组中某age键值小于15的其他数组</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$arr = <span class="keyword">array</span>(</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'id'</span> =&gt; <span class="number">1</span>,<span class="string">'age'</span> =&gt; <span class="number">11</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'id'</span> =&gt; <span class="number">2</span>,<span class="string">'age'</span> =&gt; <span class="number">18</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'id'</span> =&gt; <span class="number">3</span>,<span class="string">'age'</span> =&gt; <span class="number">16</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'id'</span> =&gt; <span class="number">4</span>,<span class="string">'age'</span> =&gt; <span class="number">19</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'id'</span> =&gt; <span class="number">5</span>,<span class="string">'age'</span> =&gt; <span class="number">20</span>),</span><br><span class="line">    <span class="keyword">array</span>(<span class="string">'id'</span> =&gt; <span class="number">6</span>,<span class="string">'age'</span> =&gt; <span class="number">14</span>),</span><br><span class="line">);</span><br><span class="line">$arrs = <span class="keyword">array</span>();</span><br><span class="line"><span class="keyword">foreach</span>($arr <span class="keyword">as</span> $key =&gt; $value)&#123;</span><br><span class="line">    <span class="keyword">if</span>($value[<span class="string">'age'</span>] &lt; <span class="number">15</span>)&#123;</span><br><span class="line">        $arrs[] = $value;   <span class="comment">//$arrs即是结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">pp($arrs);</span><br></pre></td></tr></table></figure><h3 id="二维数组排序"><a href="#二维数组排序" class="headerlink" title="二维数组排序"></a>二维数组排序</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二维数组排序</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   array   $dataArr    要排序的数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $type       排序规则</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $field      根据某个键进行排序</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arraySort</span><span class="params">($dataArr,$type=<span class="string">'SORT_ASC'</span>,$field)</span></span>&#123;</span><br><span class="line">    $sort = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">'direction'</span> =&gt; $type,   <span class="comment">//排序顺序标志 SORT_DESC 降序；SORT_ASC 升序</span></span><br><span class="line">        <span class="string">'field'</span>     =&gt; $field,  <span class="comment">//排序字段</span></span><br><span class="line">    );</span><br><span class="line">    $arrSort = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">foreach</span>($dataArr <span class="keyword">AS</span> $uniqid =&gt; $row)&#123;</span><br><span class="line">        <span class="keyword">foreach</span>($row <span class="keyword">AS</span> $key =&gt; $value)&#123;</span><br><span class="line">            $arrSort[$key][$uniqid] = $value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>($sort[<span class="string">'direction'</span>])&#123;</span><br><span class="line">        array_multisort($arrSort[$sort[<span class="string">'field'</span>]],constant($sort[<span class="string">'direction'</span>]),$dataArr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $dataArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二维数组去重"><a href="#二维数组去重" class="headerlink" title="二维数组去重"></a>二维数组去重</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二维数组去重</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   array   $arr    要去重的数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">more_array_unique</span><span class="params">($arr)</span></span>&#123;</span><br><span class="line">    $arr_inner_key = $temp = $arr_after = [];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">foreach</span>($arr[<span class="number">0</span>] <span class="keyword">as</span> $k =&gt; $v)&#123;</span><br><span class="line">        $arr_inner_key[] = $k;   <span class="comment">//先把二维数组中的内层数组的键值记录在在一维数组中</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">foreach</span>($arr <span class="keyword">as</span> $k =&gt; $v)&#123;</span><br><span class="line">        $v        = implode(<span class="string">','</span>,$v);    <span class="comment">//降维 用join()也行</span></span><br><span class="line">        $temp[$k] = $v;      <span class="comment">//保留原来的键值 $temp[]即为不保留原来键值</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    $temp = array_unique($temp);    <span class="comment">//去重：去掉重复的字符串</span></span><br><span class="line">    <span class="keyword">foreach</span>($temp <span class="keyword">as</span> $k =&gt; $v)&#123;</span><br><span class="line">        $a             = explode(<span class="string">','</span>,$v);   <span class="comment">//拆分后的重组 如：Array( [0] =&gt; james [1] =&gt; 30 )</span></span><br><span class="line">        $arr_after[$k] = array_combine($arr_inner_key,$a);  <span class="comment">//将原来的键与值重新合并</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ksort($arr_after);//排序如需要：ksort对数组进行排序(保留原键值key) ,sort为不保留key值</span></span><br><span class="line">    <span class="keyword">return</span> array_values($arr_after);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="过去某一天距今天多少年月日"><a href="#过去某一天距今天多少年月日" class="headerlink" title="过去某一天距今天多少年月日"></a>过去某一天距今天多少年月日</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 过去某一天距今天多少年月日</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $date1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $date2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffDate</span><span class="params">($date1,$date2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(strtotime($date1) &gt; strtotime($date2))&#123;</span><br><span class="line">        $tmp   = $date2;</span><br><span class="line">        $date2 = $date1;</span><br><span class="line">        $date1 = $tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">list</span>($Y1,$m1,$d1) = explode(<span class="string">'-'</span>,$date1);</span><br><span class="line">    <span class="keyword">list</span>($Y2,$m2,$d2) = explode(<span class="string">'-'</span>,$date2);</span><br><span class="line">    $Y = $Y2 - $Y1;</span><br><span class="line">    $m = $m2 - $m1;</span><br><span class="line">    $d = $d2 - $d1;</span><br><span class="line">    <span class="keyword">if</span>($d &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        $d += (int)date(<span class="string">'t'</span>,strtotime(<span class="string">"-1 month $date2"</span>));</span><br><span class="line">        $m--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>($m &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        $m += <span class="number">12</span>;</span><br><span class="line">        $Y--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">array</span>(<span class="string">'year'</span> =&gt; $Y,<span class="string">'month'</span> =&gt; $m,<span class="string">'day'</span> =&gt; $d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="给字符串中每个元素加单引号"><a href="#给字符串中每个元素加单引号" class="headerlink" title="给字符串中每个元素加单引号"></a>给字符串中每个元素加单引号</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给字符串中每个元素加单引号，用于数据库写入</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span> $str = 'a,b,1,2,3,45,g';  处理后 $str = "'a','b','1','2','3','45','g'";</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $str        需要处理的字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>   string  $delimiter  分隔符</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringArray</span><span class="params">($str,$delimiter = <span class="string">','</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>($str !== <span class="string">''</span>)&#123;</span><br><span class="line">        $arr = explode($delimiter,$str);</span><br><span class="line">        $new = [];</span><br><span class="line">        <span class="keyword">foreach</span>($arr <span class="keyword">as</span> $item)&#123;</span><br><span class="line">            $new[] = <span class="string">"'"</span> . $item . <span class="string">"'"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> implode($new,$delimiter);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="post请求实例"><a href="#post请求实例" class="headerlink" title="post请求实例"></a>post请求实例</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 卡斯达特指令下达</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $ip    string  IP</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $port  string  端口号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $card  string  车牌号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $devid string  设备ID（全小写）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $pwd   string  密码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $cmd   string  指令</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">carstart_send_order</span><span class="params">($ip,$port,$card,$devid,$pwd,$cmd)</span></span>&#123;</span><br><span class="line">    $url  = <span class="string">'http://www.baidu.com'</span>;</span><br><span class="line">    $data = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">'ip'</span>        =&gt; $ip,</span><br><span class="line">        <span class="string">'port'</span>      =&gt; $port,</span><br><span class="line">        <span class="string">'carNumber'</span> =&gt; $card,</span><br><span class="line">        <span class="string">'devideId'</span>  =&gt; $devid,</span><br><span class="line">        <span class="string">'password'</span>  =&gt; $pwd,</span><br><span class="line">        <span class="string">'cmd'</span>       =&gt; $cmd,</span><br><span class="line">    );</span><br><span class="line">    $ch   = curl_init();</span><br><span class="line">    curl_setopt($ch,CURLOPT_URL,$url);</span><br><span class="line">    curl_setopt($ch,CURLOPT_RETURNTRANSFER,<span class="number">1</span>);</span><br><span class="line">    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,<span class="number">10</span>);</span><br><span class="line">    curl_setopt($ch,CURLOPT_POST,<span class="number">1</span>);</span><br><span class="line">    curl_setopt($ch,CURLOPT_POSTFIELDS,$data);</span><br><span class="line">    $file_contents = curl_exec($ch);</span><br><span class="line">    curl_close($ch);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> $file_contents;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编码类函数"><a href="#编码类函数" class="headerlink" title="编码类函数"></a>编码类函数</h3><h4 id="检测字符编码类型"><a href="#检测字符编码类型" class="headerlink" title="检测字符编码类型"></a>检测字符编码类型</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">codeType</span><span class="params">($str)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mb_detect_encoding($str,<span class="keyword">array</span>(<span class="string">"ASCII"</span>,<span class="string">'UTF-8'</span>,<span class="string">"GB2312"</span>,<span class="string">"GBK"</span>,<span class="string">'BIG5'</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="编码转换"><a href="#编码转换" class="headerlink" title="编码转换"></a>编码转换</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//gb2312转utf8</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gbkToUtf8</span><span class="params">($str)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> iconv(<span class="string">"GB2312"</span>,<span class="string">"UTF-8"</span>,$str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//utf8转gb2312</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">utf8ToGbk</span><span class="params">($str)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> iconv(<span class="string">"UTF-8"</span>,<span class="string">"GB2312"</span>,$str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mb_convert_encoding转编码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mbGbkToUtf8</span><span class="params">($str,$turn = <span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>($turn)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            $newStr = mb_convert_encoding($str,<span class="string">"UTF-8"</span>,<span class="string">"GB2312"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            $newStr = mb_convert_encoding($str,<span class="string">"GB2312"</span>,<span class="string">"UTF-8"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            $newStr = <span class="string">'参数错误'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $newStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="判断一个数组是否全部为空"><a href="#判断一个数组是否全部为空" class="headerlink" title="判断一个数组是否全部为空"></a>判断一个数组是否全部为空</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$arr = [</span><br><span class="line">    [<span class="string">'a'</span> =&gt; <span class="number">1</span>],</span><br><span class="line">    [],</span><br><span class="line">    [],</span><br><span class="line">    [<span class="string">'b'</span> =&gt; <span class="number">2</span>],</span><br><span class="line">    [],</span><br><span class="line">];</span><br><span class="line">$felter = array_filter($arr);</span><br><span class="line"><span class="keyword">echo</span> count($felter) === <span class="number">0</span> ? <span class="string">'全部为空'</span> : <span class="string">'部分为空'</span>;</span><br></pre></td></tr></table></figure><h3 id="两个时间相隔的年月日时分秒"><a href="#两个时间相隔的年月日时分秒" class="headerlink" title="两个时间相隔的年月日时分秒"></a>两个时间相隔的年月日时分秒</h3><h4 id="使用Carbon-laravel"><a href="#使用Carbon-laravel" class="headerlink" title="使用Carbon(laravel)"></a>使用Carbon(laravel)</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Carbon(laravel)计算两个时间之差</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $start   开始时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $end     结束时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  int       $return  返回类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array|string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">carbon_time_diff</span><span class="params">($start, $end, $return = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $carbon  = <span class="keyword">new</span> Illuminate\Support\Carbon($start);</span><br><span class="line">    $carbon  = $carbon-&gt;diff(<span class="keyword">new</span> Illuminate\Support\Carbon($end));</span><br><span class="line">    $years   = $carbon-&gt;y;</span><br><span class="line">    $months  = $carbon-&gt;m;</span><br><span class="line">    $days    = $carbon-&gt;d;</span><br><span class="line">    $hours   = $carbon-&gt;h;</span><br><span class="line">    $mins    = $carbon-&gt;i;</span><br><span class="line">    $seconds = $carbon-&gt;s;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">switch</span> ($return) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> $years . <span class="string">'年'</span> . $months . <span class="string">'月'</span> . $days . <span class="string">'天'</span> . $hours . <span class="string">'小时'</span> . $mins . <span class="string">'分钟'</span> . $seconds . <span class="string">'秒'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            $str = <span class="string">''</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($years) &amp;&amp; $str .= $years . <span class="string">'年'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($months) &amp;&amp; $str .= $months . <span class="string">'月'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($days) &amp;&amp; $str .= $days . <span class="string">'天'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($hours) &amp;&amp; $str .= $hours . <span class="string">'小时'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($mins) &amp;&amp; $str .= $mins . <span class="string">'分钟'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($seconds) &amp;&amp; $str .= $seconds . <span class="string">'秒'</span>;</span><br><span class="line">            <span class="keyword">return</span> $str;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> [<span class="string">'years'</span> =&gt; $years, <span class="string">'months'</span> =&gt; $months, <span class="string">'days'</span> =&gt; $days, <span class="string">'hours'</span> =&gt; $hours, <span class="string">'mins'</span> =&gt; $mins, <span class="string">'seconds'</span> =&gt; $seconds];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用系统函数-DateTime"><a href="#使用系统函数-DateTime" class="headerlink" title="使用系统函数 DateTime"></a>使用系统函数 DateTime</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 计算两个时间之差</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $start   开始时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $end     结束时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  int     $return  返回类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array|string</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diff_date</span><span class="params">($start, $end, $return = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $datetime1 = <span class="keyword">new</span> \DateTime($start);</span><br><span class="line">    $datetime2 = <span class="keyword">new</span> \DateTime($end);</span><br><span class="line">    $interval  = $datetime1-&gt;diff($datetime2);</span><br><span class="line">    $years     = $interval-&gt;format(<span class="string">'%Y'</span>);</span><br><span class="line">    $months    = $interval-&gt;format(<span class="string">'%m'</span>);</span><br><span class="line">    $days      = $interval-&gt;format(<span class="string">'%d'</span>);</span><br><span class="line">    $hours     = $interval-&gt;format(<span class="string">'%H'</span>);</span><br><span class="line">    $mins      = $interval-&gt;format(<span class="string">'%i'</span>);</span><br><span class="line">    $seconds   = $interval-&gt;format(<span class="string">'%s'</span>);</span><br><span class="line">    <span class="keyword">switch</span> ($return) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> $years . <span class="string">'年'</span> . $months . <span class="string">'月'</span> . $days . <span class="string">'天'</span> . $hours . <span class="string">'小时'</span> . $mins . <span class="string">'分钟'</span> . $seconds . <span class="string">'秒'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            $str = <span class="string">''</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($years) &amp;&amp; $years !== <span class="string">'00'</span> &amp;&amp; $str .= $years . <span class="string">'年'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($months) &amp;&amp; $months !== <span class="string">'00'</span> &amp;&amp; $str .= $months . <span class="string">'月'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($days) &amp;&amp; $days !== <span class="string">'00'</span> &amp;&amp; $str .= $days . <span class="string">'天'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($hours) &amp;&amp; $hours !== <span class="string">'00'</span> &amp;&amp; $str .= $hours . <span class="string">'小时'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($mins) &amp;&amp; $mins !== <span class="string">'00'</span> &amp;&amp; $str .= $mins . <span class="string">'分钟'</span>;</span><br><span class="line">            !<span class="keyword">empty</span>($seconds) &amp;&amp; $seconds !== <span class="string">'00'</span> &amp;&amp; $str .= $seconds . <span class="string">'秒'</span>;</span><br><span class="line">            <span class="keyword">return</span> $str;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> [<span class="string">'years'</span> =&gt; $years, <span class="string">'months'</span> =&gt; $months, <span class="string">'days'</span> =&gt; $days, <span class="string">'hours'</span> =&gt; $hours, <span class="string">'mins'</span> =&gt; $mins, <span class="string">'seconds'</span> =&gt; $seconds];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="列出时间段内所有的天数"><a href="#列出时间段内所有的天数" class="headerlink" title="列出时间段内所有的天数"></a>列出时间段内所有的天数</h3><h4 id="使用系统函数-DatePeriod"><a href="#使用系统函数-DatePeriod" class="headerlink" title="使用系统函数 DatePeriod"></a>使用系统函数 DatePeriod</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用系统函数 DatePeriod 列出时间段内所有的天数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $start   开始的那一天</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $end     结束的那一天</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">date_period</span><span class="params">($start, $end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $preriod = <span class="keyword">new</span> \DatePeriod(<span class="keyword">new</span> \DateTime($start), <span class="keyword">new</span> \DateInterval(<span class="string">'P1D'</span>), <span class="keyword">new</span> \DateTime($end));</span><br><span class="line">    $time    = [];</span><br><span class="line">    <span class="keyword">foreach</span> ($preriod <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">        $time[] = $value-&gt;format(<span class="string">'Y-m-d'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用系统函数-Carbon-CarbonPeriod-laravel"><a href="#使用系统函数-Carbon-CarbonPeriod-laravel" class="headerlink" title="使用系统函数 \Carbon\CarbonPeriod(laravel)"></a>使用系统函数 \Carbon\CarbonPeriod(laravel)</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用系统函数 \Carbon\CarbonPeriod 列出时间段内所有的天数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $start   开始的那一天</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $end     结束的那一天</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">date_period</span><span class="params">($start, $end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $period = <span class="keyword">new</span> \Carbon\CarbonPeriod($start, <span class="string">'1 day'</span>, $end);</span><br><span class="line">    $time   = [];</span><br><span class="line">    <span class="keyword">foreach</span> ($period <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">     $time[] = $value-&gt;format(<span class="string">'Y-m-d'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> $time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用while循环"><a href="#使用while循环" class="headerlink" title="使用while循环"></a>使用while循环</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用系统函数 while循环 列出时间段内所有的天数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $start   开始的那一天</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  string  $end     结束的那一天</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">date_period</span><span class="params">($start, $end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   $time = [];</span><br><span class="line">   <span class="keyword">while</span> ($start &lt;= $end) &#123;</span><br><span class="line">       $time[] = $start;</span><br><span class="line">       $start  = date(<span class="string">'Y-m-d'</span>, strtotime(<span class="string">'+1 day'</span>, strtotime($start)));</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> $time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;这些都是工作中用到的比较常用或者有意思的PHP方法，持续更新中…&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/categories/PHP/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>珍藏多年的JS</title>
    <link href="http://Mine-MuYan.github.com/2017/08/29/%E7%8F%8D%E8%97%8F%E5%A4%9A%E5%B9%B4%E7%9A%84js/"/>
    <id>http://Mine-MuYan.github.com/2017/08/29/珍藏多年的js/</id>
    <published>2017-08-29T09:21:11.000Z</published>
    <updated>2020-03-24T06:42:08.753Z</updated>
    
    <content type="html"><![CDATA[<p><strong>这些都是工作中用到的比较常用或者有意思的js函数，持续更新中…</strong><br><a id="more"></a></p><h3 id="截取浏览器地址栏中的url"><a href="#截取浏览器地址栏中的url" class="headerlink" title="截取浏览器地址栏中的url"></a>截取浏览器地址栏中的url</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlVars</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">　　<span class="keyword">var</span> vars = [], hash; </span><br><span class="line">　　<span class="keyword">var</span> hashes = <span class="built_in">window</span>.location.href.slice(<span class="built_in">window</span>.location.href.indexOf(<span class="string">'?'</span>)+<span class="number">1</span>).split(<span class="string">'&amp;'</span>); </span><br><span class="line">　　<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hashes.length; i++) &#123; </span><br><span class="line">　　　　hash = hashes[i].split(<span class="string">'='</span>); </span><br><span class="line">　　　　vars.push(hash[<span class="number">0</span>]); </span><br><span class="line">　　　　vars[hash[<span class="number">0</span>]] = hash[<span class="number">1</span>]; </span><br><span class="line">　　&#125; </span><br><span class="line">    <span class="keyword">return</span> vars; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">var</span> params  = getUrlVars();</span><br><span class="line"><span class="keyword">var</span> cateId  = params[params[<span class="number">0</span>]]; <span class="comment">//0是第一个</span></span><br><span class="line"><span class="keyword">var</span> cateId  = <span class="built_in">parseInt</span>(cateId);  <span class="comment">//字符串转数字</span></span><br><span class="line"><span class="keyword">var</span> type    = <span class="keyword">typeof</span>(cateId);    <span class="comment">//查看数据类型</span></span><br><span class="line"><span class="built_in">console</span>.log(cateId);</span><br><span class="line"><span class="built_in">console</span>.log(type);</span><br></pre></td></tr></table></figure><h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str= <span class="built_in">window</span>.location.href;</span><br><span class="line"><span class="keyword">var</span> cateId = str.slice(<span class="number">-11</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(cateId);</span><br></pre></td></tr></table></figure><h4 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetQueryString</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span>+ name +<span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span>(r!=<span class="literal">null</span>)<span class="keyword">return</span>  <span class="built_in">unescape</span>(r[<span class="number">2</span>]); <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cateId= GetQueryString(<span class="string">"cateId"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(cateId);</span><br></pre></td></tr></table></figure><h4 id="根据地址栏获取某个参数（post和get形式都可以）"><a href="#根据地址栏获取某个参数（post和get形式都可以）" class="headerlink" title="根据地址栏获取某个参数（post和get形式都可以）"></a>根据地址栏获取某个参数（post和get形式都可以）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TP分页时，获取地址栏中为以下两种形式的某个参数</span></span><br><span class="line"><span class="comment"> * http://localhost/index.php/Personal/userInfo/type/ref/p/20.html</span></span><br><span class="line"><span class="comment"> * http://localhost/index.php/Personal/userInfo?type=refAll/p/2.html</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getUrlVars</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> vars = [], hash;</span><br><span class="line">        <span class="keyword">var</span> hashes=<span class="built_in">window</span>.location.href.slice(<span class="built_in">window</span>.location.href.indexOf(<span class="string">'?'</span>)+<span class="number">1</span>).split(<span class="string">'&amp;'</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hashes.length; i++) &#123;</span><br><span class="line">            hash = hashes[i].split(<span class="string">'='</span>);</span><br><span class="line">            vars.push(hash[<span class="number">0</span>]);</span><br><span class="line">            vars[hash[<span class="number">0</span>]] = hash[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> vars;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> broswerUrl = location.href;</span><br><span class="line"><span class="keyword">var</span> re = broswerUrl.indexOf(<span class="string">"?"</span>);</span><br><span class="line"><span class="keyword">var</span> type = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">if</span>(re == <span class="number">-1</span>)&#123;<span class="comment">//-1：未查询到</span></span><br><span class="line">        <span class="keyword">var</span> arr = broswerUrl.split(<span class="string">"/"</span>);<span class="comment">//split:使用一个指定的分隔符把一个字符串分割存储到数组</span></span><br><span class="line">        type = arr[<span class="number">7</span>];<span class="comment">//查看数组得知，需要的字符串下标为7</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> params  = getUrlVars();</span><br><span class="line">        type  = params[params[<span class="number">0</span>]];</span><br><span class="line">&#125;</span><br><span class="line">    <span class="built_in">console</span>.log(type);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="时间戳转换成时间"><a href="#时间戳转换成时间" class="headerlink" title="时间戳转换成时间"></a>时间戳转换成时间</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将时间戳转换成时间：若不传参，获取当前时间戳</span></span><br><span class="line"><span class="comment"> * @param times number 时间戳</span></span><br><span class="line"><span class="comment"> * @returns &#123;string&#125;   年-月-日 时:分:秒</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getdate</span>(<span class="params">times</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(times)&#123;</span><br><span class="line">        <span class="keyword">var</span> time =<span class="built_in">Number</span>(times +<span class="string">'000'</span>);   <span class="comment">//将传入的时间戳增加3个0，变成微秒</span></span><br><span class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(time);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> y,m,d;</span><br><span class="line">    y = now.getFullYear();</span><br><span class="line">    m = now.getMonth() + <span class="number">1</span>;</span><br><span class="line">    d = now.getDate();</span><br><span class="line">    <span class="keyword">return</span> y + <span class="string">"-"</span> + (m &lt; <span class="number">10</span> ? <span class="string">"0"</span> + m : m) + <span class="string">"-"</span> + (d &lt; <span class="number">10</span> ? <span class="string">"0"</span> + d : d) + <span class="string">" "</span> + now.toTimeString().substr(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jQuery生成二维码"><a href="#jQuery生成二维码" class="headerlink" title="jQuery生成二维码"></a>jQuery生成二维码</h3><p>1：先引入jQuery插件文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/JavaScript"</span> src=<span class="string">"../../public/js/jquery.qrcode.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>2：生成可以保存的二维码图片和不可保存的二维码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="built_in">window</span>.location.href;</span><br><span class="line">    <span class="keyword">var</span> payUrl = str.slice(<span class="number">-35</span>); <span class="comment">//获取微信支付的url</span></span><br><span class="line">    <span class="comment">//不生成二维码</span></span><br><span class="line">    $(<span class="string">'#qrcode'</span>).qrcode(payUrl);</span><br><span class="line">    $(<span class="string">".qrcodes"</span>).hide();</span><br><span class="line">    <span class="comment">//生成二维码图片，可保存至本地</span></span><br><span class="line">   <span class="keyword">var</span> qrcode= $(<span class="string">'#qrcode'</span>).qrcode(payUrl).hide();</span><br><span class="line">   <span class="keyword">var</span> canvas=qrcode.find(<span class="string">'canvas'</span>).get(<span class="number">0</span>);</span><br><span class="line">   $(<span class="string">'#imgOne'</span>).attr(<span class="string">'src'</span>,canvas.toDataURL(<span class="string">'image/jpg'</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>生成可保存至本地二维码图片的html<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img id=&apos;imgOne&apos; src=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure></p><h3 id="使用prompt和confirm进行简单的页面交互"><a href="#使用prompt和confirm进行简单的页面交互" class="headerlink" title="使用prompt和confirm进行简单的页面交互"></a>使用prompt和confirm进行简单的页面交互</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rec</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = prompt(<span class="string">"请输入姓名"</span>, <span class="string">""</span>);</span><br><span class="line">    <span class="keyword">if</span>(name != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> sures = confirm(<span class="string">'刚输入的姓名是：'</span>+name);</span><br><span class="line">        <span class="keyword">if</span>(sures == <span class="literal">true</span>)&#123;</span><br><span class="line">            alert(<span class="string">'已记录'</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            alert(<span class="string">'您已取消，请重新输入'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">rec();</span><br></pre></td></tr></table></figure><h3 id="防止浏览器的返回上一页"><a href="#防止浏览器的返回上一页" class="headerlink" title="防止浏览器的返回上一页"></a>防止浏览器的返回上一页</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在不可返回的页面添加下面这段JS</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.history &amp;&amp; <span class="built_in">window</span>.history.pushState) &#123;</span><br><span class="line">    $(<span class="built_in">window</span>).on(<span class="string">'popstate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.history.pushState(<span class="string">'forward'</span>, <span class="literal">null</span>, <span class="string">'#'</span>);</span><br><span class="line">        <span class="built_in">window</span>.history.forward(<span class="number">1</span>);</span><br><span class="line">        alert(<span class="string">"不可回退"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.history.pushState(<span class="string">'forward'</span>, <span class="literal">null</span>, <span class="string">'#'</span>); <span class="comment">//在IE中必须得有这两行</span></span><br><span class="line"><span class="built_in">window</span>.history.forward(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="获取验证码倒计时"><a href="#获取验证码倒计时" class="headerlink" title="获取验证码倒计时"></a>获取验证码倒计时</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"weui-btn weui-btn_warn"</span> <span class="attr">id</span>=<span class="string">"getVerify"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"获取验证码"</span> <span class="attr">onclick</span>=<span class="string">"sendCode(this)"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendCode</span>(<span class="params">thisBtn</span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> clock = <span class="string">''</span>;</span><br><span class="line">       <span class="keyword">var</span> nums = <span class="number">60</span>;</span><br><span class="line">       <span class="keyword">var</span> btn;</span><br><span class="line">       <span class="keyword">var</span> mobile = $(<span class="string">"#tel"</span>).val();</span><br><span class="line">       <span class="keyword">if</span>(mobile == <span class="string">''</span> || mobile.length != <span class="number">11</span>)&#123;</span><br><span class="line">           weui.alert(<span class="string">'请先输入正确的手机号'</span>);</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           btn = thisBtn;</span><br><span class="line">           btn.disabled = <span class="literal">true</span>; <span class="comment">//将按钮置为不可点击</span></span><br><span class="line">           btn.value = <span class="string">'重新获取('</span>+nums+<span class="string">')'</span>;</span><br><span class="line">           clock = setInterval(doLoop, <span class="number">1000</span>); <span class="comment">//一秒执行一次</span></span><br><span class="line">           <span class="comment">//调用接口</span></span><br><span class="line">           $.ajax(&#123;</span><br><span class="line">               url:<span class="string">"/api/app/user/getVerifyCode"</span>,</span><br><span class="line">               type:<span class="string">"post"</span>,</span><br><span class="line">               dataType:<span class="string">"json"</span>,</span><br><span class="line">               data:&#123;<span class="attr">phone</span>:mobile&#125;,</span><br><span class="line">               success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                   <span class="keyword">if</span>(data[<span class="string">'status'</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">                       weui.toast(data[<span class="string">'msg'</span>]);</span><br><span class="line">                   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                       weui.alert(data[<span class="string">'msg'</span>]);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="title">doLoop</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           nums--;</span><br><span class="line">           <span class="keyword">if</span>(nums &gt; <span class="number">0</span>)&#123;</span><br><span class="line">               btn.value = <span class="string">'重新获取('</span>+nums+<span class="string">')'</span></span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               clearInterval(clock); <span class="comment">//清除js定时器</span></span><br><span class="line">               btn.disabled = <span class="literal">false</span>;</span><br><span class="line">               btn.value = <span class="string">'获取验证码'</span>;</span><br><span class="line">               nums = <span class="number">60</span>; <span class="comment">//重置时间</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"upFile"</span> <span class="attr">class</span>=<span class="string">"weui-uploader__input"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">accept</span>=<span class="string">"image/*"</span> <span class="attr">multiple</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./src/images/pic_user_default.png"</span> <span class="attr">id</span>=<span class="string">"logo"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#upFile"</span>).on(<span class="string">"change"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    formData.append(<span class="string">"file"</span>,$(<span class="string">"#upFile"</span>)[<span class="number">0</span>].files[<span class="number">0</span>]);</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: <span class="string">"/api/app/uploadFile"</span>,</span><br><span class="line">        type: <span class="string">"post"</span>,</span><br><span class="line">        dataType: <span class="string">"json"</span>,</span><br><span class="line">        contentType: <span class="literal">false</span>, <span class="comment">// 注意这里应设为false</span></span><br><span class="line">        processData: <span class="literal">false</span>,</span><br><span class="line">        cache: <span class="literal">false</span>,</span><br><span class="line">        data: formData,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(data[<span class="string">"status"</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">var</span> imgUrl = <span class="string">"http://106.14.148.77/api"</span>+data[<span class="string">"data"</span>];</span><br><span class="line">                $(<span class="string">"#logo"</span>).attr(<span class="string">"src"</span>,imgUrl);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="js判断复选框是被选中"><a href="#js判断复选框是被选中" class="headerlink" title="js判断复选框是被选中"></a>js判断复选框是被选中</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span> <span class="attr">class</span>=<span class="string">"weui-agree__checkbox"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> check   = $(<span class="string">'input[class="weui-agree__checkbox"]'</span>).is(<span class="string">':checked'</span>);</span><br><span class="line">alert(check == ture ? <span class="string">'yes'</span> : <span class="string">'no'</span>);</span><br></pre></td></tr></table></figure><h3 id="js判断几个复选框被选中"><a href="#js判断几个复选框被选中" class="headerlink" title="js判断几个复选框被选中"></a>js判断几个复选框被选中</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>11</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>21</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"3"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>31</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"4"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>41</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"5"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>51</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"6"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>61</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"7"</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>71</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>OK<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> $(<span class="string">"#btn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> chk_value = [];</span><br><span class="line">    $(<span class="string">'input[class="test"]:checked'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        chk_value.push($(<span class="keyword">this</span>).val());</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span>(chk_value.length == <span class="number">0</span>)&#123;</span><br><span class="line">        alert(<span class="string">'你还没有选择任何内容！'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        alert(chk_value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// alert(chk_value.length == 0 ? '你还没有选择任何内容！': chk_value);</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;这些都是工作中用到的比较常用或者有意思的js函数，持续更新中…&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://Mine-MuYan.github.com/categories/JavaScript/"/>
    
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title>基于JQuery网页漂浮广告窗口</title>
    <link href="http://Mine-MuYan.github.com/2017/08/29/%E5%9F%BA%E4%BA%8EJQuery%E7%BD%91%E9%A1%B5%E6%BC%82%E6%B5%AE%E5%B9%BF%E5%91%8A%E7%AA%97%E5%8F%A3/"/>
    <id>http://Mine-MuYan.github.com/2017/08/29/基于JQuery网页漂浮广告窗口/</id>
    <published>2017-08-29T02:21:11.000Z</published>
    <updated>2020-03-24T06:42:08.823Z</updated>
    
    <content type="html"><![CDATA[<h3 id="首先说一下思路"><a href="#首先说一下思路" class="headerlink" title="首先说一下思路"></a>首先说一下思路</h3><p>1.漂浮的窗口肯定是<code>position:absolute</code>脱离文档流的</p><p>2.在浏览器可视范围内飘动</p><p>3.飘动过程可分解为垂直（上、下）和水平（左、右）方向，同一时间内会同时向垂直和水平两个方向同时移动，可能的情况会有上左、上右、下左、下右</p><p>基本的思路是创建一个函数，函数的作用是使元素移动，然后定时执行这个函数，以让元素持续移动，形成漂浮效果。基本上这些持续的元素移动都是基于 <code>setInterval(func,delay)</code> 函数，例如：<code>setInterval(move,30)</code>，第一个参数是要定时执行的函数，第二个参数是时间间隔，单位是毫秒。如果不懂setInterval的请见：<a href="http://www.w3school.com.cn/jsref/met_win_setinterval.asp" target="_blank" rel="noopener">setInterval  介绍</a></p><p>首先这是基于JQuery写的，调用都是一些基础的接口，应该任何版本的JQuery都可以，我用的是1.9的。</p><a id="more"></a><h3 id="效果图，箭头是大概的运行轨迹"><a href="#效果图，箭头是大概的运行轨迹" class="headerlink" title="效果图，箭头是大概的运行轨迹"></a>效果图，箭头是大概的运行轨迹</h3><p><img src="http://img.blog.csdn.net/20160406094510715?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>浮窗Css样式<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">        <span class="selector-class">.floadAd</span> &#123; <span class="attribute">position</span>: absolute;<span class="attribute">z-index</span>: <span class="number">999900</span>; <span class="attribute">display</span>: none; &#125;</span><br><span class="line">        <span class="selector-class">.floadAd</span> <span class="selector-class">.item</span> &#123; <span class="attribute">display</span>: block; &#125;</span><br><span class="line">        <span class="selector-class">.floadAd</span> <span class="selector-class">.item</span> <span class="selector-tag">img</span> &#123; <span class="attribute">vertical-align</span>: bottom; &#125;<span class="comment">/* a img 的组合浏览器默认下边会有几个像素的空白，这里可以消除空白*/</span></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p><p>Html 标记，里面的内容是可以按自己的需要来写的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"floadAD"</span> <span class="attr">class</span>=<span class="string">"floadAd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">href</span>=<span class="string">"javascript:void();"</span> <span class="attr">style</span>=<span class="string">"color: red"</span>&gt;</span>×关闭<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">title</span>=<span class="string">'首届党建文化节'</span> <span class="attr">href</span>=<span class="string">"http://unsun.net"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"App_UpLoad/image/20160405/20160405172215_2907.png"</span> <span class="attr">alt</span>=<span class="string">"首届党建文化节"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Js代码，我没有把它封装到JQuery的插件里面，有需要可以自己去封装</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">FloatAd(<span class="string">"#floadAD"</span>);<span class="comment">//调用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//广告漂浮窗口</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FloatAd</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = $(selector);</span><br><span class="line">    <span class="keyword">if</span> (obj.find(<span class="string">".item"</span>).length == <span class="number">0</span>) <span class="keyword">return</span>;<span class="comment">//如果没有内容，不执行</span></span><br><span class="line">    <span class="keyword">var</span> windowHeight = $(<span class="built_in">window</span>).height();<span class="comment">//浏览器高度</span></span><br><span class="line">    <span class="keyword">var</span> windowWidth = $(<span class="built_in">window</span>).width();<span class="comment">//浏览器宽度</span></span><br><span class="line">    <span class="keyword">var</span> dirX = <span class="number">-1.5</span>;<span class="comment">//每次水平漂浮方向及距离(单位：px)，正数向右，负数向左，如果越大的话就会看起来越不流畅，但在某些需求下你可能会需要这种效果</span></span><br><span class="line">    <span class="keyword">var</span> dirY = <span class="number">-1</span>;<span class="comment">//每次垂直漂浮方向及距离(单位：px)，正数向下，负数向上，如果越大的话就会看起来越不流畅，但在某些需求下你可能会需要这种效果</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> delay = <span class="number">30</span>;<span class="comment">//定期执行的时间间隔，单位毫秒</span></span><br><span class="line">    obj.css(&#123; <span class="attr">left</span>: windowWidth / <span class="number">2</span> - obj.width() / <span class="number">2</span> + <span class="string">"px"</span>, <span class="attr">top</span>: windowHeight / <span class="number">2</span> - obj.height() / <span class="number">2</span> + <span class="string">"px"</span> &#125;);<span class="comment">//把元素设置成在页面中间</span></span><br><span class="line">    obj.show();<span class="comment">//元素默认是隐藏的，避免上一句代码改变位置视觉突兀，改变位置后再显示出来</span></span><br><span class="line">    <span class="keyword">var</span> handler = setInterval(move, delay);<span class="comment">//定期执行，返回一个值，这个值可以用来取消定期执行</span></span><br><span class="line"></span><br><span class="line">    obj.hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//鼠标经过时暂停，离开时继续</span></span><br><span class="line">        clearInterval(handler);<span class="comment">//取消定期执行</span></span><br><span class="line">    &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        handler = setInterval(move, delay);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    obj.find(<span class="string">".close"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//绑定关闭按钮事件</span></span><br><span class="line">        close();</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="built_in">window</span>).resize(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//当改变窗口大小时，重新获取浏览器大小，以保证不会过界（飘出浏览器可视范围）或漂的范围小于新的大小</span></span><br><span class="line">        windowHeight = $(<span class="built_in">window</span>).height();<span class="comment">//浏览器高度</span></span><br><span class="line">        windowWidth = $(<span class="built_in">window</span>).width();<span class="comment">//浏览器宽度</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>) </span>&#123;<span class="comment">//定期执行的函数，使元素移动</span></span><br><span class="line">        <span class="keyword">var</span> currentPos = obj.position();<span class="comment">//获取当前位置，这是JQuery的函数，具体见：http://hemin.cn/jq/position.html</span></span><br><span class="line">        <span class="keyword">var</span> nextPosX = currentPos.left + dirX;<span class="comment">//下一个水平位置</span></span><br><span class="line">        <span class="keyword">var</span> nextPosY = currentPos.top + dirY;<span class="comment">//下一个垂直位置</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nextPosX &gt;= windowWidth - obj.width()) &#123;<span class="comment">//这一段是本站特有的需求，当漂浮到右边时关闭漂浮窗口，如不需要可删除</span></span><br><span class="line">            close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nextPosX &lt;= <span class="number">0</span> || nextPosX &gt;= windowWidth - obj.width()) &#123;<span class="comment">//如果达到左边，或者达到右边，则改变为相反方向</span></span><br><span class="line">            dirX = dirX * <span class="number">-1</span>;<span class="comment">//改变方向</span></span><br><span class="line">            nextPosX = currentPos.left + dirX;<span class="comment">//为了不过界，重新获取下一个位置</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nextPosY &lt;= <span class="number">0</span> || nextPosY &gt;= windowHeight - obj.height() - <span class="number">5</span>) &#123;<span class="comment">//如果达到上边，或者达到下边，则改变为相反方向。            </span></span><br><span class="line">            dirY = dirY * <span class="number">-1</span>;<span class="comment">//改变方向</span></span><br><span class="line">            nextPosY = currentPos.top + dirY;<span class="comment">//为了不过界，重新获取下一个位置</span></span><br><span class="line">        &#125;</span><br><span class="line">        obj.css(&#123; <span class="attr">left</span>: nextPosX + <span class="string">"px"</span>, <span class="attr">top</span>: nextPosY + <span class="string">"px"</span> &#125;);<span class="comment">//移动到下一个位置</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;<span class="comment">//停止漂浮，并销毁漂浮窗口</span></span><br><span class="line">        clearInterval(handler);</span><br><span class="line">        obj.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我已经把注释写的很清楚，这里就不再做多解释了，如果有有问题欢迎提出交流，一起进步。</p><p>第一次写博客，写的不好欢迎提出来让我改进<img src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif" alt="大笑"></p><h3 id="个人观点"><a href="#个人观点" class="headerlink" title="个人观点"></a>个人观点</h3><p>之前的博主把内容写得很清楚，我就不做多余的说明，我只想说一句：<strong>666</strong>。<br>原文链接:<a href="http://blog.csdn.net/u011427035/article/details/51072116" target="_blank" rel="noopener">基于JQuery网页漂浮广告窗口Js详解</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;首先说一下思路&quot;&gt;&lt;a href=&quot;#首先说一下思路&quot; class=&quot;headerlink&quot; title=&quot;首先说一下思路&quot;&gt;&lt;/a&gt;首先说一下思路&lt;/h3&gt;&lt;p&gt;1.漂浮的窗口肯定是&lt;code&gt;position:absolute&lt;/code&gt;脱离文档流的&lt;/p&gt;
&lt;p&gt;2.在浏览器可视范围内飘动&lt;/p&gt;
&lt;p&gt;3.飘动过程可分解为垂直（上、下）和水平（左、右）方向，同一时间内会同时向垂直和水平两个方向同时移动，可能的情况会有上左、上右、下左、下右&lt;/p&gt;
&lt;p&gt;基本的思路是创建一个函数，函数的作用是使元素移动，然后定时执行这个函数，以让元素持续移动，形成漂浮效果。基本上这些持续的元素移动都是基于 &lt;code&gt;setInterval(func,delay)&lt;/code&gt; 函数，例如：&lt;code&gt;setInterval(move,30)&lt;/code&gt;，第一个参数是要定时执行的函数，第二个参数是时间间隔，单位是毫秒。如果不懂setInterval的请见：&lt;a href=&quot;http://www.w3school.com.cn/jsref/met_win_setinterval.asp&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;setInterval  介绍&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;首先这是基于JQuery写的，调用都是一些基础的接口，应该任何版本的JQuery都可以，我用的是1.9的。&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://Mine-MuYan.github.com/categories/JavaScript/"/>
    
    
      <category term="转载" scheme="http://Mine-MuYan.github.com/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>Linux中常用操作命令</title>
    <link href="http://Mine-MuYan.github.com/2017/07/31/linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/"/>
    <id>http://Mine-MuYan.github.com/2017/07/31/linux中常用操作命令/</id>
    <published>2017-07-31T08:29:50.000Z</published>
    <updated>2020-03-24T06:42:08.787Z</updated>
    
    <content type="html"><![CDATA[<p>整理一些常用的linux命令。</p><a id="more"></a><h3 id="Linux简介及Ubuntu安装"><a href="#Linux简介及Ubuntu安装" class="headerlink" title="Linux简介及Ubuntu安装"></a>Linux简介及Ubuntu安装</h3><p>Linux，免费开源，多用户多任务系统。基于Linux有多个版本的衍生。RedHat、Ubuntu、Debian</p><p>安装VMware或VirtualBox虚拟机。具体安装步骤，找百度。</p><p>再安装Ubuntu。具体安装步骤，找百度。</p><p>安装完后，可以看到Linux系统的目录结构，见链接<a href="http://www.cnblogs.com/laov/p/3409875.html" target="_blank" rel="noopener">http://www.cnblogs.com/laov/p/3409875.html</a></p><h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">ls　　        显示文件或目录</span><br><span class="line"></span><br><span class="line">     -l           列出文件详细信息l(list)</span><br><span class="line"></span><br><span class="line">     -a           列出当前目录下所有文件及目录，包括隐藏的a(all)</span><br><span class="line"></span><br><span class="line">mkdir         创建目录</span><br><span class="line"></span><br><span class="line">     -p           创建目录，若无父目录，则创建p(parent)</span><br><span class="line"></span><br><span class="line">cd               切换目录</span><br><span class="line"></span><br><span class="line">touch         创建空文件</span><br><span class="line"></span><br><span class="line">echo          创建带有内容的文件。</span><br><span class="line"></span><br><span class="line">cat           查看文件内容</span><br><span class="line"></span><br><span class="line">cp            拷贝</span><br><span class="line"></span><br><span class="line">mv            移动或重命名</span><br><span class="line"></span><br><span class="line">rm            删除文件</span><br><span class="line"></span><br><span class="line">     -r            递归删除，可删除子目录及文件</span><br><span class="line"></span><br><span class="line">     -f            强制删除</span><br><span class="line"></span><br><span class="line">find          在文件系统中搜索某文件</span><br><span class="line"></span><br><span class="line">wc            统计文本中行数、字数、字符数</span><br><span class="line"></span><br><span class="line">grep          在文本文件中查找某个字符串</span><br><span class="line"></span><br><span class="line">rmdir         删除空目录</span><br><span class="line"></span><br><span class="line">tree          树形结构显示目录，需要安装tree包</span><br><span class="line"></span><br><span class="line">pwd           显示当前目录</span><br><span class="line"></span><br><span class="line">ln            创建链接文件</span><br><span class="line"></span><br><span class="line">more、less    分页显示文本文件内容</span><br><span class="line"></span><br><span class="line">head、tail    显示文件头、尾内容</span><br><span class="line"></span><br><span class="line">ctrl+alt+F1   命令行全屏模式</span><br></pre></td></tr></table></figure><h3 id="系统管理命令"><a href="#系统管理命令" class="headerlink" title="系统管理命令"></a>系统管理命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">stat          显示指定文件的详细信息，比ls更详细</span><br><span class="line"></span><br><span class="line">who           显示在线登陆用户</span><br><span class="line"></span><br><span class="line">whoami        显示当前操作用户</span><br><span class="line"></span><br><span class="line">hostname      显示主机名</span><br><span class="line"></span><br><span class="line">uname         显示系统信息</span><br><span class="line"></span><br><span class="line">top           动态显示当前耗费资源最多进程信息</span><br><span class="line"></span><br><span class="line">ps            显示瞬间进程状态 ps -aux</span><br><span class="line"></span><br><span class="line">du            查看目录大小 du -h /home带有单位显示目录信息</span><br><span class="line"></span><br><span class="line">df            查看磁盘大小 df -h 带有单位显示磁盘信息</span><br><span class="line"></span><br><span class="line">ifconfig      查看网络情况</span><br><span class="line"></span><br><span class="line">ping          测试网络连通</span><br><span class="line"></span><br><span class="line">netstat       显示网络状态信息</span><br><span class="line"></span><br><span class="line">man           命令不会用了，找男人  如：man ls</span><br><span class="line"></span><br><span class="line">clear         清屏</span><br><span class="line"></span><br><span class="line">alias         对命令重命名 如：alias showmeit=&quot;ps -aux&quot; ，另外解除使用unaliax showmeit</span><br><span class="line"></span><br><span class="line">kill          杀死进程，可以先用ps 或 top命令查看进程的id，然后再用kill命令杀死进程。</span><br></pre></td></tr></table></figure><h3 id="打包压缩相关命令"><a href="#打包压缩相关命令" class="headerlink" title="打包压缩相关命令"></a>打包压缩相关命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gzip：</span><br><span class="line"></span><br><span class="line">bzip2：</span><br><span class="line"></span><br><span class="line">tar:             打包压缩</span><br><span class="line"></span><br><span class="line">     -c              归档文件</span><br><span class="line"></span><br><span class="line">     -x              压缩文件</span><br><span class="line"></span><br><span class="line">     -z              gzip压缩文件</span><br><span class="line"></span><br><span class="line">     -j              bzip2压缩文件</span><br><span class="line"></span><br><span class="line">     -v              显示压缩或解压缩过程 v(view)</span><br><span class="line"></span><br><span class="line">     -f              使用档名</span><br></pre></td></tr></table></figure><p>例：</p><p><code>tar -cvf /home/abc.tar /home/abc</code>            只打包，不压缩</p><p><code>tar -zcvf /home/abc.tar.gz /home/abc</code>        打包，并用gzip压缩</p><p><code>tar -jcvf /home/abc.tar.bz2 /home/abc</code>       打包，并用bzip2压缩</p><p>当然，如果想解压缩，就直接替换上面的命令  <code>tar -cvf  / tar -zcvf  / tar -jcvf</code> 中的“c” 换成“x” 就可以了。</p><h3 id="关机-重启机器"><a href="#关机-重启机器" class="headerlink" title="关机/重启机器"></a>关机/重启机器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shutdown</span><br><span class="line"></span><br><span class="line">     -r             关机重启</span><br><span class="line"></span><br><span class="line">     -h             关机不重启</span><br><span class="line"></span><br><span class="line">     now          立刻关机</span><br><span class="line"></span><br><span class="line">halt           关机</span><br><span class="line"></span><br><span class="line">reboot         重启</span><br></pre></td></tr></table></figure><h3 id="Linux管道"><a href="#Linux管道" class="headerlink" title="Linux管道"></a>Linux管道</h3><p>将一个命令的标准输出作为另一个命令的标准输入。也就是把几个命令组合起来使用，后一个命令除以前一个命令的结果。</p><p>例：<code>grep -r &quot;close&quot; /home/* | more</code>       在home目录下所有文件中查找，包括close的文件，并分页输出。</p><h3 id="Linux软件包管理"><a href="#Linux软件包管理" class="headerlink" title="Linux软件包管理"></a>Linux软件包管理</h3><h4 id="dpkg-Debian-Package-管理工具，软件包名以-deb后缀。这种方法适合系统不能联网的情况下。"><a href="#dpkg-Debian-Package-管理工具，软件包名以-deb后缀。这种方法适合系统不能联网的情况下。" class="headerlink" title="dpkg  (Debian Package)管理工具，软件包名以.deb后缀。这种方法适合系统不能联网的情况下。"></a>dpkg  (Debian Package)管理工具，软件包名以.deb后缀。这种方法适合系统不能联网的情况下。</h4><p>比如安装tree命令的安装包，先将<code>tree.deb</code>传到<code>Linux</code>系统中。再使用如下命令安装。</p><p><code>sudo dpkg -i tree_1.5.3-1_i386.deb</code>         安装软件</p><p><code>sudo dpkg -r tree</code>                                     卸载软件</p><p>注：将<code>tree.deb</code>传到<code>Linux</code>系统中，有多种方式。<code>VMwareTool</code>，使用挂载方式；使用<code>winSCP</code>工具等；</p><h4 id="APT（Advanced-Packaging-Tool）高级软件工具。这种方法适合系统能够连接互联网的情况。"><a href="#APT（Advanced-Packaging-Tool）高级软件工具。这种方法适合系统能够连接互联网的情况。" class="headerlink" title="APT（Advanced Packaging Tool）高级软件工具。这种方法适合系统能够连接互联网的情况。"></a>APT（Advanced Packaging Tool）高级软件工具。这种方法适合系统能够连接互联网的情况。</h4><p>依然以tree为例</p><p><code>sudo apt-get install tree</code>                     安装tree</p><p><code>sudo apt-get remove tree</code>                       卸载tree</p><p><code>sudo apt-get update</code>                            更新软件</p><p><code>sudo apt-get upgrade</code>        </p><p>将<code>.** rpm**</code>文件转为<code>.** deb**</code> 文件</p><p><code>.rpm</code>为<code>RedHat</code>使用的软件格式。在<code>Ubuntu</code>下不能直接使用，所以需要转换一下。</p><p><code>sudo alien abc.rpm</code></p><h3 id="vim使用"><a href="#vim使用" class="headerlink" title="vim使用"></a>vim使用</h3><p>vim三种模式：命令模式、插入模式、编辑模式。使用ESC或i或：来切换模式。</p><p>命令模式下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">:q                      退出</span><br><span class="line"></span><br><span class="line">:q!                     强制退出</span><br><span class="line"></span><br><span class="line">:wq                     保存并退出</span><br><span class="line"></span><br><span class="line">:set number             显示行号</span><br><span class="line"></span><br><span class="line">:set nonumber           隐藏行号</span><br><span class="line"></span><br><span class="line">/apache                 在文档中查找apache 按n跳到下一个，shift+n上一个</span><br><span class="line"></span><br><span class="line">yyp                     复制光标所在行，并粘贴</span><br><span class="line"></span><br><span class="line">h(左移一个字符←)、j(下一行↓)、k(上一行↑)、l(右移一个字符→)</span><br></pre></td></tr></table></figure><h3 id="用户及用户组管理"><a href="#用户及用户组管理" class="headerlink" title="用户及用户组管理"></a>用户及用户组管理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/etc/passwd     存储用户账号</span><br><span class="line"></span><br><span class="line">/etc/group      存储组账号</span><br><span class="line"></span><br><span class="line">/etc/shadow     存储用户账号的密码</span><br><span class="line"></span><br><span class="line">/etc/gshadow    存储用户组账号的密码</span><br><span class="line"></span><br><span class="line">useradd         用户名</span><br><span class="line"></span><br><span class="line">userdel         用户名</span><br><span class="line"></span><br><span class="line">adduser         用户名</span><br><span class="line"></span><br><span class="line">groupadd        组名</span><br><span class="line"></span><br><span class="line">groupdel        组名</span><br><span class="line"></span><br><span class="line">passwd root     给root设置密码</span><br><span class="line"></span><br><span class="line">su root</span><br><span class="line"></span><br><span class="line">su - root </span><br><span class="line"></span><br><span class="line">/etc/profile     系统环境变量</span><br><span class="line"></span><br><span class="line">bash_profile     用户环境变量</span><br><span class="line"></span><br><span class="line">.bashrc          用户环境变量</span><br><span class="line"></span><br><span class="line">su user          切换用户，加载配置文件.bashrc</span><br><span class="line"></span><br><span class="line">su - user        切换用户，加载配置文件/etc/profile ，加载bash_profile</span><br></pre></td></tr></table></figure><h3 id="更改文件的用户及用户组"><a href="#更改文件的用户及用户组" class="headerlink" title="更改文件的用户及用户组"></a>更改文件的用户及用户组</h3><p><code>sudo chown [-R] owner[:group] {File|Directory}</code></p><p>例如：还以<code>jdk-7u21-linux-i586.tar.gz</code>为例。属于用户<code>hadoop</code>，组<code>hadoop</code></p><p>要想切换此文件所属的用户及组。可以使用命令。</p><p><code>sudo chown root:root jdk-7u21-linux-i586.tar.gz</code></p><h3 id="文件权限管理"><a href="#文件权限管理" class="headerlink" title="文件权限管理"></a>文件权限管理</h3><p>三种基本权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">R           读         数值表示为4</span><br><span class="line"></span><br><span class="line">W          写         数值表示为2</span><br><span class="line"></span><br><span class="line">X           可执行  数值表示为1</span><br></pre></td></tr></table></figure></p><p><img src="http://images.cnitblog.com/blog/352072/201402/091549405142313.png" alt></p><p>如图所示，<code>jdk-7u21-linux-i586.tar.gz</code>文件的权限为<code>-rw-rw-r--</code></p><p><code>-rw-rw-r-</code>-一共十个字符，分成四段。</p><p>第一个字符“-”表示普通文件；这个位置还可能会出现“l”链接；“d”表示目录</p><p>第二三四个字符“rw-”表示当前所属用户的权限。   所以用数值表示为4+2=6</p><p>第五六七个字符“rw-”表示当前所属组的权限。     所以用数值表示为4+2=6</p><p>第八九十个字符“r–”表示其他用户权限。        所以用数值表示为2</p><p>所以操作此文件的权限用数值表示为662 </p><h3 id="更改权限"><a href="#更改权限" class="headerlink" title="更改权限"></a>更改权限</h3><p><code>sudo chmod [u所属用户  g所属组  o其他用户  a所有用户]  [+增加权限  -减少权限]  [r  w  x]</code>   目录名 </p><p>例如：有一个文件filename，权限为<code>“-rw-r----x”</code> ,将权限值改为<code>&quot;-rwxrw-r-x&quot;</code>，用数值表示为<code>765</code></p><p><code>sudo chmod u+x g+w o+r  filename</code></p><p>上面的例子可以用数值表示</p><p><code>sudo chmod 765 filename</code></p><h3 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h3><p><a href="http://www.daniubiji.cn/archives/25" target="_blank" rel="noopener">大牛笔记</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;整理一些常用的linux命令。&lt;/p&gt;
    
    </summary>
    
      <category term="转载" scheme="http://Mine-MuYan.github.com/categories/%E8%BD%AC%E8%BD%BD/"/>
    
    
      <category term="linux" scheme="http://Mine-MuYan.github.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>PHPStorm配置Xdebug</title>
    <link href="http://Mine-MuYan.github.com/2017/06/21/PHPStorm%E9%85%8D%E7%BD%AEXdebug/"/>
    <id>http://Mine-MuYan.github.com/2017/06/21/PHPStorm配置Xdebug/</id>
    <published>2017-06-21T02:49:05.000Z</published>
    <updated>2020-03-24T06:42:08.814Z</updated>
    
    <content type="html"><![CDATA[<p>配置分为两部分，一是<code>Xdebug</code>的下载和安装，二是<code>PHPStorm</code>上的对<code>Xdebug</code>的配置。</p><a id="more"></a><h2 id="Xdebug下载"><a href="#Xdebug下载" class="headerlink" title="Xdebug下载"></a>Xdebug下载</h2><h3 id="下载Xdebug"><a href="#下载Xdebug" class="headerlink" title="下载Xdebug"></a>下载Xdebug</h3><p>查看<code>phpinfo</code>，搞清楚php版本等信息：<br><img src="https://upload-images.jianshu.io/upload_images/4950628-7b05d8470198581c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="Markdown"></p><p>根据PHP版本<a href="https://xdebug.org/download.php" target="_blank" rel="noopener">下载</a>合适版本的<code>Xdebug</code></p><p><img src="https:////upload-images.jianshu.io/upload_images/4950628-3b08f334e4825d79.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><h3 id="配置php-ini"><a href="#配置php-ini" class="headerlink" title="配置php.ini"></a>配置php.ini</h3><p>在<code>php.ini</code>的最后加入下面这些代码。</p><p><code>zend_extension</code>的路径是<code>Xdebug</code>文件的目录。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Xdebug]</span><br><span class="line"></span><br><span class="line">zend_extension = C:\xampp\php\ext\php_xdebug<span class="number">-2.5</span><span class="number">.4</span><span class="number">-5.6</span>-vc11.dll</span><br><span class="line">xdebug.remote_enable = <span class="number">1</span></span><br><span class="line">xdebug.remote_host = localhost</span><br><span class="line">xdebug.remote_port = <span class="number">9000</span></span><br><span class="line">xdebug.remote_handler = dbgp</span><br><span class="line">xdebug.remote_autostart = <span class="number">1</span></span><br><span class="line">xdebug.idekey = PHPSTORM</span><br></pre></td></tr></table></figure><h3 id="重启apache"><a href="#重启apache" class="headerlink" title="重启apache"></a>重启apache</h3><h3 id="查看是否配置成功"><a href="#查看是否配置成功" class="headerlink" title="查看是否配置成功"></a>查看是否配置成功</h3><h4 id="phpinfo"><a href="#phpinfo" class="headerlink" title="phpinfo()"></a>phpinfo()</h4><p><img src="https://upload-images.jianshu.io/upload_images/4950628-579afdd2e9205fe5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><h4 id="PHPstorm上"><a href="#PHPstorm上" class="headerlink" title="PHPstorm上"></a>PHPstorm上</h4><p><img src="https://upload-images.jianshu.io/upload_images/4950628-dfc628d2f22bcc87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-3547f474af145503.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><h3 id="PHPstorm配置"><a href="#PHPstorm配置" class="headerlink" title="PHPstorm配置"></a>PHPstorm配置</h3><p><strong>已下配置信息是根据我本地的配置，而做的配置，请勿直接复制。</strong></p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-70e87373ddcb3757.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><p><strong>如上图：这里配置端口（9000）的需要和在php.ini中的配置要一致，不一定非要用9000端口，只要是一个未被占用的端口都行。</strong></p><p><img src="https://upload-images.jianshu.io/upload_images/4950628-45e1f5d664947d3b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><p>如上图：</p><ol><li>phpstorm中的IDE key需要和在php.ini中的配置要一致，只要两者配置一样都可以，不需要非要写成PHPSTORM；</li><li>Host和Port是要调试的本地虚拟域名配置项。</li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h3 id="PHPstorm官方文档"><a href="#PHPstorm官方文档" class="headerlink" title="PHPstorm官方文档"></a>PHPstorm官方文档</h3><ol><li><p><a href="https://confluence.jetbrains.com/display/PhpStorm/Xdebug+Installation+Guide" target="_blank" rel="noopener">Xdebug安装指南</a></p></li><li><p><a href="https://confluence.jetbrains.com/display/PhpStorm/Validating+Your+Debugging+Configuration" target="_blank" rel="noopener">验证您的调试配置</a></p></li><li><p><a href="https://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm" target="_blank" rel="noopener">使用Xdebug和PhpStorm进行零配置Web应用程序调试</a></p></li></ol><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ol><li><a href="http://www.jb51.net/article/58069.htm" target="_blank" rel="noopener">phpstorm配置Xdebug进行调试PHP教程</a></li><li><a href="http://www.cnblogs.com/xujian2016/p/5548921.html" target="_blank" rel="noopener"><a href="http://www.cnblogs.com/xujian2016/p/5548921.html" target="_blank" rel="noopener">本地环境phpStorm10+XDebug配置和断点调试</a></a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;配置分为两部分，一是&lt;code&gt;Xdebug&lt;/code&gt;的下载和安装，二是&lt;code&gt;PHPStorm&lt;/code&gt;上的对&lt;code&gt;Xdebug&lt;/code&gt;的配置。&lt;/p&gt;
    
    </summary>
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="PHPStorm" scheme="http://Mine-MuYan.github.com/tags/PHPStorm/"/>
    
      <category term="Xdebug" scheme="http://Mine-MuYan.github.com/tags/Xdebug/"/>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>PHP版本中的VC6,VC9,VC11,TS,NTS区别</title>
    <link href="http://Mine-MuYan.github.com/2017/06/21/PHP%E7%89%88%E6%9C%AC%E4%B8%AD%E7%9A%84VC6,VC9,VC11,TS,NTS%E5%8C%BA%E5%88%AB/"/>
    <id>http://Mine-MuYan.github.com/2017/06/21/PHP版本中的VC6,VC9,VC11,TS,NTS区别/</id>
    <published>2017-06-21T01:49:18.000Z</published>
    <updated>2020-03-24T06:42:08.867Z</updated>
    
    <content type="html"><![CDATA[<p><code>VC6：legacy Visual Studio 6 compiler</code>，就是使用这个编译器编译的<br><code>VC9：Visual Studio 2008 compiler</code>，就是用微软的VS编辑器编译的<br><code>TS：Thread Safe</code> 线程安全， 执行时会进行线程<code>（Thread）</code>安全检查<br><code>NTS：Non Thread Safe</code> 非线程安全， 在执行时不进行线程<code>（Thread）</code>安全检查</p><a id="more"></a><p>以<code>windows</code>为例，看看下载到得<code>php zip</code>的文件名</p><p><code>php-5.4.4-nts-Win32-VC9-x86.zip</code></p><p><code>VC6：legacy Visual Studio 6 compiler</code>，就是使用这个编译器编译的。</p><p><code>VC9：Visual Studio 2008 compiler</code>，就是用微软的VS编辑器编译的。</p><p>这个其实没有什么太大的影响，因为从<code>php 5.3</code>，已经没有<code>vc6</code>版本提供下载了</p><p><code>TS：Thread Safe</code>线程安全， 执行时会进行线程<code>（Thread）</code>安全检查</p><p><code>NTS：Non Thread Safe</code> 非线程安全， 在执行时不进行线程<code>（Thread）</code>安全检查</p><p>我使用<code>Apache+PHP</code>的模式下，一般是把<code>PHP</code>作为一个<code>Module load</code>到<code>apache</code>中，那么以<code>apache</code>父进程-多子进程的工作模式，是需要进行线程安全检查的，所以如果是以这种方式执行<code>php</code>，选择<code>ts</code>版本</p><p>那么如果是使用<code>fastcgi</code>，比如说用<code>php-fpm</code>管理<code>php</code>执行，则不需要进行线程安全检查，则选择<code>nts</code>版本的<code>php</code></p><p><code>php 5.5.0 beta 1</code>发布后, 安装出现问题, 家中电脑升级是成功的, 可公司的电脑一直提示无法加载到服务. 操作系统都一样的, 没什么区别<code>www.php.net</code>官网左侧的说明提醒了我.</p><p><code>php-5.5.0beta1-Win32-VC11-x86</code></p><p>安装包的名字也已经说明了, 要运行必须安装<code>vc11</code>, <code>x86</code>表示32位, 假如是<code>x64</code>就是64位, 位数对于安装<code>vc11</code>有帮助, 个人建议<code>vc11 x86</code>, <code>x64</code>两个版本都安装上比较好, 反正没冲突.</p><p>然后启动服务, 搞定<code>phpinfo</code>信息如下:</p><p><code>VC6：legacy Visual Studio 6 compiler</code>，就是使用这个编译器编译的。</p><p><code>VC9：Visual Studio 2008 compiler</code>，就是用微软的VS编辑器编译的。</p><p>由于<code>apache.or</code>g只提供<code>VC6</code>的版本，所以使用原版<code>apache</code>时只能使用<code>VC6</code>。（<code>www.apachelounge.com</code>上有<code>apache VC9</code>的版本提供，应该可以和<code>PHP VC9</code>配合，没用过）</p><p><code>TS：Thread Safe</code> 线程安全， 执行时会进行线程<code>（Thread）</code>安全检查，以防止有新要求就启动新线程的<code>CGI</code>执行方式而耗尽系统资源</p><p><code>NTS：Non Thread Safe</code> 非线程安全， 在执行时不进行线程<code>（Thread）</code>安全检查</p><p><code>PHP</code>的两种执行方式：<code>ISAPI</code>和<code>FastCGI</code>。</p><p><code>ISAPI`</code>(Internet Server Application Programming Interface)<code>执行方式是以</code>DLL<code>动态库的形式使用，可以在被用户请求后执行，在处理完一个用户请求后不会马上消失，所以需要进行线程安全检查，这样来提高程序的执行效率，所以如果是以</code>ISAPI<code>来执行</code>PHP<code>，建议选择</code>hread Safe`版本</p><p><code>apache</code>中的配置方式：</p><p>下面这个是加载<code>TS</code>版本的<code>php</code>必须的</p><p><code>LoadModule php5_module “xxx/php5apache2_2.dll”</code></p><p>下面这行可有可无</p><p><code>AddType application/x-httpd-php-source .phpsAddType application/x-httpd-php .php .php5 .php4 .php3 .phtml .phpt</code></p><p><code>FastCGI</code>执行方式是以单一线程来执行操作，所以不需要进行线程的安全检查，除去线程安全检查的防护反而可以提高执行效率，所以，如果是以<code>FastCGI</code>来执行<code>PHP</code>，建议选择<code>Non Thread Safe</code>版本。</p><p><code>apache</code>中的配置方式：</p><p>下面这两行是加载NTS版本的php必须的，不可以直接写成<code>Action application/x-httpd-php “c:/wamp/bin/php/php3.5.6/php-cgi.exe”！</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ScriptAlias /php/ <span class="string">"C:/wamp/bin/php/php3.5.6/"</span></span><br><span class="line">Action application/x-httpd-php “/php/php-cgi.exe”</span><br></pre></td></tr></table></figure><p>另外，还要有之前的<code>AddType application/x-httpd-php .php .php5 .php4 .php3 .phtml .phpt</code>，这样才能认识<code>php</code>格式的文件</p><p>这样配置完可能还会因为权限问题而无法用php-cgi.exe解析php网页，所以还要加上下面这段</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory <span class="string">"C:/wamp/bin/php/php5.3.6/"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Options None</span><br><span class="line">Order allow,deny</span><br><span class="line">Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><p>官方并不建议你将<code>Non Thread Safe</code>应用于生产环境，所以我们选择<code>Thread Safe</code>版本的PHP来使用。</p><p>XAMPP在<code>http-xampp.conf</code>中默认配置是使用<code>ISAPI</code>的方式</p><p>原文：<a href="http://www.tuicool.com/articles/6RF7be6" target="_blank" rel="noopener">PHP版本中的VC6,VC9,VC11,TS,NTS区别</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;VC6：legacy Visual Studio 6 compiler&lt;/code&gt;，就是使用这个编译器编译的&lt;br&gt;&lt;code&gt;VC9：Visual Studio 2008 compiler&lt;/code&gt;，就是用微软的VS编辑器编译的&lt;br&gt;&lt;code&gt;TS：Thread Safe&lt;/code&gt; 线程安全， 执行时会进行线程&lt;code&gt;（Thread）&lt;/code&gt;安全检查&lt;br&gt;&lt;code&gt;NTS：Non Thread Safe&lt;/code&gt; 非线程安全， 在执行时不进行线程&lt;code&gt;（Thread）&lt;/code&gt;安全检查&lt;/p&gt;
    
    </summary>
    
      <category term="转载" scheme="http://Mine-MuYan.github.com/categories/%E8%BD%AC%E8%BD%BD/"/>
    
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>MySQL数据类型:char与varchar类型的区别</title>
    <link href="http://Mine-MuYan.github.com/2017/06/16/MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-char%E4%B8%8Evarchar%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>http://Mine-MuYan.github.com/2017/06/16/MySQL数据类型-char与varchar类型的区别/</id>
    <published>2017-06-16T03:49:18.000Z</published>
    <updated>2020-03-24T06:42:08.858Z</updated>
    
    <content type="html"><![CDATA[<p>在建立数据库表结构的时候，为了给一个<code>String类型</code>的数据定义一个数据库的数据库类型，一般参考的都是<code>char</code>或者<code>varchar</code>，这两种选择有时候让人很纠结，今天想总结一下它们两者的区别，明确一下选择它们的理由。</p><a id="more"></a><p>首先明确的是，<code>char</code>的长度是不可变的，而<code>varchar</code>的长度是可变的，也就是说，定义一个char[10]和<code>varchar</code>[10],如果存进去的是<code>csdn</code>,那么<code>char</code>所占的长度依然为10，除了字符<code>csdn</code>外，后面跟六个空格，而<code>varchar</code>就立马把长度变为4了，取数据的时候，char类型的要用trim()去掉多余的空格，而<code>varchar</code>是不需要的，尽管如此，<code>char</code>的存取数度还是要比<code>varchar</code>要快得多，因为其长度固定，方便程序的存储与查找；</p><p>但是<code>char</code>也为此付出的是空间的代价，因为其长度固定，所以难免会有多余的空格占位符占据空间，可谓是以空间换取时间效率，而<code>varchar</code>是以空间效率为首位的。</p><p>再者，<code>char</code>的存储方式是，对英文字符（ASCII）占用1个字节，对一个汉字占用两个字节；而<code>varchar</code>的存储方式是，对每个英文字符占用2个字节，汉字也占用2个字节，两者的存储数据都非<code>unicode</code>的字符数据。</p><blockquote><p><a href="http://blog.csdn.net/playboyanta123/article/details/8472222" target="_blank" rel="noopener">原文链接: 数据库中char与varchar类型的区别</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在建立数据库表结构的时候，为了给一个&lt;code&gt;String类型&lt;/code&gt;的数据定义一个数据库的数据库类型，一般参考的都是&lt;code&gt;char&lt;/code&gt;或者&lt;code&gt;varchar&lt;/code&gt;，这两种选择有时候让人很纠结，今天想总结一下它们两者的区别，明确一下选择它们的理由。&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="http://Mine-MuYan.github.com/categories/MySQL/"/>
    
    
      <category term="转载" scheme="http://Mine-MuYan.github.com/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>ThinkPHP用PHPExcle导出Excel文件</title>
    <link href="http://Mine-MuYan.github.com/2017/06/10/ThinkPHP%E7%94%A8PHPExcle%E5%AF%BC%E5%87%BAExcel%E6%96%87%E4%BB%B6/"/>
    <id>http://Mine-MuYan.github.com/2017/06/10/ThinkPHP用PHPExcle导出Excel文件/</id>
    <published>2017-06-10T01:49:18.000Z</published>
    <updated>2020-03-24T06:42:08.849Z</updated>
    
    <content type="html"><![CDATA[<p><strong> 本篇博客主要讲述，如何在thinkPHP中使用PHPExcel中导出Excel文件，是博主在实践了好多篇别人的帖子之后，总结归纳出来的文章，亲测可用。</strong></p><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="下载、配置PHPExcel扩展插件"><a href="#下载、配置PHPExcel扩展插件" class="headerlink" title="下载、配置PHPExcel扩展插件"></a>下载、配置PHPExcel扩展插件</h3><ol><li><p>去<a href="http://phpexcel.codeplex.com/" target="_blank" rel="noopener">PHPExcel的官网</a>或者<a href="https://github.com/PHPOffice/PHPExcel" target="_blank" rel="noopener">github</a>去下载最新PHPExcel放到<code>ThinkPHP/Library/Vendor</code>目录下，<code>Vendor</code>目录是放置PHP扩展包的默认文件夹，在<code>Vendor</code>目录下建立<code>PHPExcel</code>文件夹，将下载的文件，解压到此处。</p></li><li><p>将<code>PHPExcel.php</code>文件，重命名成<code>PHPExcel.class.php</code>。</p><p>至此，插件安装已经做好，目录结构如下图，接下来做功能部分。</p><p><img src="http://i4.piimg.com/585619/349788884a91c6b5.png" alt="Markdown"></p></li></ol><h2 id="创建Excel方法"><a href="#创建Excel方法" class="headerlink" title="创建Excel方法"></a>创建Excel方法</h2><h3 id="生成Excel文件方法"><a href="#生成Excel文件方法" class="headerlink" title="生成Excel文件方法"></a>生成Excel文件方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据导出为.xls格式</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $fileName 导出的文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $expCellName     array -&gt; 数据库字段以及字段的注释</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $expTableData    Model -&gt; 连接的数据库</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">exportExcel</span><span class="params">($fileName=<span class="string">'table'</span>,$expCellName,$expTableData)</span></span>&#123;</span><br><span class="line">        $xlsTitle = iconv(<span class="string">'utf-8'</span>, <span class="string">'gb2312'</span>, $fileName);<span class="comment">//文件名称</span></span><br><span class="line">        $xlsName = $fileName.date(<span class="string">"_Y.m.d_H.i.s"</span>); <span class="comment">//or $xlsTitle 文件名称可根据自己情况设定</span></span><br><span class="line">        $cellNum = count($expCellName);</span><br><span class="line">        $dataNum = count($expTableData);</span><br><span class="line"></span><br><span class="line">        import(<span class="string">"Vendor.PHPExcel.PHPExcel"</span>);</span><br><span class="line">        import(<span class="string">"Vendor.PHPExcel.Writer.Excel5"</span>);</span><br><span class="line">        import(<span class="string">"Vendor.PHPExcel.IOFactory.php"</span>);</span><br><span class="line"></span><br><span class="line">        $objPHPExcel = <span class="keyword">new</span> \PHPExcel();</span><br><span class="line">        $cellName = <span class="keyword">array</span>(<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>,<span class="string">'E'</span>,<span class="string">'F'</span>,<span class="string">'G'</span>,<span class="string">'H'</span>,<span class="string">'I'</span>,<span class="string">'J'</span>,<span class="string">'K'</span>,<span class="string">'L'</span>,<span class="string">'M'</span>,<span class="string">'N'</span>,<span class="string">'O'</span>,<span class="string">'P'</span>,<span class="string">'Q'</span>,<span class="string">'R'</span>,<span class="string">'S'</span>,<span class="string">'T'</span>,<span class="string">'U'</span>,<span class="string">'V'</span>,<span class="string">'W'</span>,<span class="string">'X'</span>,<span class="string">'Y'</span>,<span class="string">'Z'</span>,<span class="string">'AA'</span>,<span class="string">'AB'</span>,<span class="string">'AC'</span>,<span class="string">'AD'</span>,<span class="string">'AE'</span>,<span class="string">'AF'</span>,<span class="string">'AG'</span>,<span class="string">'AH'</span>,<span class="string">'AI'</span>,<span class="string">'AJ'</span>,<span class="string">'AK'</span>,<span class="string">'AL'</span>,<span class="string">'AM'</span>,<span class="string">'AN'</span>,<span class="string">'AO'</span>,<span class="string">'AP'</span>,<span class="string">'AQ'</span>,<span class="string">'AR'</span>,<span class="string">'AS'</span>,<span class="string">'AT'</span>,<span class="string">'AU'</span>,<span class="string">'AV'</span>,<span class="string">'AW'</span>,<span class="string">'AX'</span>,<span class="string">'AY'</span>,<span class="string">'AZ'</span>);</span><br><span class="line"></span><br><span class="line">        $objPHPExcel-&gt;getActiveSheet(<span class="number">0</span>)-&gt;mergeCells(<span class="string">'A1:'</span>.$cellName[$cellNum<span class="number">-1</span>].<span class="string">'1'</span>);<span class="comment">//合并单元格</span></span><br><span class="line">        $objPHPExcel-&gt;setActiveSheetIndex(<span class="number">0</span>)-&gt;setCellValue(<span class="string">'A1'</span>, $fileName.<span class="string">'  Export time:'</span>.date(<span class="string">'Y-m-d H:i:s'</span>));</span><br><span class="line">        <span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;$cellNum;$i++)&#123;</span><br><span class="line">            $objPHPExcel-&gt;setActiveSheetIndex(<span class="number">0</span>)-&gt;setCellValue($cellName[$i].<span class="string">'2'</span>, $expCellName[$i][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Miscellaneous glyphs, UTF-8</span></span><br><span class="line">        <span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;$dataNum;$i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>($j=<span class="number">0</span>;$j&lt;$cellNum;$j++)&#123;</span><br><span class="line">                $objPHPExcel-&gt;getActiveSheet(<span class="number">0</span>)-&gt;setCellValue($cellName[$j].($i+<span class="number">3</span>), $expTableData[$i][$expCellName[$j][<span class="number">0</span>]]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        header(<span class="string">'pragma:public'</span>);</span><br><span class="line">        header(<span class="string">'Content-type:application/vnd.ms-excel;charset=utf-8;name="'</span>.$xlsTitle.<span class="string">'.xls"'</span>);</span><br><span class="line">        header(<span class="string">"Content-Disposition:attachment;filename=$xlsName.xls"</span>);<span class="comment">//attachment新窗口打印inline本窗口打印</span></span><br><span class="line">        $objWriter = \PHPExcel_IOFactory::createWriter($objPHPExcel, <span class="string">'Excel5'</span>);</span><br><span class="line">        $objWriter-&gt;save(<span class="string">'php://output'</span>);</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="方法生成说明"><a href="#方法生成说明" class="headerlink" title="方法生成说明"></a>方法生成说明</h3><ol><li><p>第9行的</p><p><code>$xlsName = $fileName.date(&quot;_Y.m.d_H.i.s&quot;); //or $xlsTitle 文件名称可根据自己情况设定</code></p><p>是设置文件名，上面所写是<code>文件名_Y.m.d_H.i.s</code>，<code>_Y.m.d_H.i.s</code>即是导出的时间，因为windows下，文件名中不能含有<code>:</code>，所以即便写成<code>_Y.m.d_H:i:s</code>，导出的文件也是<code>_Y.m.d_H.i.s</code>这种样式。</p></li><li><p>第13行~15行的</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import(<span class="string">"Vendor.PHPExcel.PHPExcel"</span>);</span><br><span class="line">import(<span class="string">"Vendor.PHPExcel.Writer.Excel5"</span>);</span><br><span class="line">import(<span class="string">"Vendor.PHPExcel.IOFactory.php"</span>);</span><br></pre></td></tr></table></figure><p>这三行即是引入PHPExcel，因为当时的文件目录结构是<code>ThinkPHP/Library/Vendor/PHPExcel</code>，所以<code>import(&quot;Vendor.PHPExcel.PHPExcel&quot;);，注意目录结构，只要引入的位置和放置PHPExcel的目录相同即可；</code></p></li><li><p>第20、21行的</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$objPHPExcel-&gt;getActiveSheet(<span class="number">0</span>)-&gt;mergeCells(<span class="string">'A1:'</span>.$cellName[$cellNum<span class="number">-1</span>].<span class="string">'1'</span>);<span class="comment">//合并单元格</span></span><br><span class="line">$objPHPExcel-&gt;setActiveSheetIndex(<span class="number">0</span>)-&gt;setCellValue(<span class="string">'A1'</span>, $fileName.<span class="string">'  Export time:'</span>.date(<span class="string">'Y-m-d H:i:s'</span>));</span><br></pre></td></tr></table></figure><p>此作用是，在Excel文件的第一行合并一行单元格，用作表格的标题或简介。如下图所示：</p><p><img src="//upload-images.jianshu.io/upload_images/4950628-bb944595406f3826.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Markdown"></p><p><code>setCellValue(&#39;A1&#39;, $fileName.&#39;  Export time:&#39;.date(&#39;Y-m-d H:i:s&#39;));</code>值可以根据自己需求修改;</p></li><li><p>第34行的<br><code>header(&quot;Content-Disposition:attachment;filename=$xlsName.xls&quot;);//attachment新窗口打印inline本窗口打印</code></p><p>可以设置输出的文件格式，此处写的是<code>.xls</code>，可修改成<code>.xlsx</code>。</p></li><li><p>此方法调用时需要传入三个参数（在方法开头的注释中已经说了），这里再具体说明一下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$fileName     导出的文件的文件名</span><br><span class="line">$expCellName  数据库字段以及字段的注释（数组） </span><br><span class="line">$expTableData 连接的数据库</span><br></pre></td></tr></table></figure></li></ol><h2 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h2><h3 id="调用方法"><a href="#调用方法" class="headerlink" title="调用方法"></a>调用方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**导出**/</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">msgOut</span><span class="params">()</span></span>&#123;</span><br><span class="line">       $excel = A(<span class="string">'Excel'</span>);</span><br><span class="line">       $xlsCell = <span class="keyword">array</span>(</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'id'</span>, <span class="string">'ID'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'staff_name'</span>, <span class="string">'昵称'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'staff_real'</span>, <span class="string">'真实姓名'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'mobile'</span>, <span class="string">'手机号'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'card_id'</span>, <span class="string">'身份证号'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'referee'</span>, <span class="string">'推荐人'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'game_id'</span>, <span class="string">'游戏ID'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'money'</span>, <span class="string">'余额'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'consume_coin'</span>, <span class="string">'消费币'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'create_time'</span>, <span class="string">'注册时间'</span>),</span><br><span class="line">           <span class="keyword">array</span>(<span class="string">'status'</span>, <span class="string">'状态'</span>),</span><br><span class="line">       );</span><br><span class="line">       $xlsName = <span class="string">'Staff表搜索结果导出'</span>;</span><br><span class="line">       $field = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">foreach</span> ($xlsCell <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">           <span class="keyword">if</span>($key == <span class="number">0</span>)&#123;</span><br><span class="line">               $field = $value[<span class="number">0</span>];</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               $field .= <span class="string">","</span> . $value[<span class="number">0</span>];</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       $xlsModel = M(<span class="string">'Staff'</span>);</span><br><span class="line">       <span class="keyword">if</span> (IS_POST) &#123;</span><br><span class="line">           $map = <span class="keyword">$this</span> -&gt; _queryTime();</span><br><span class="line">           $staff_name = I(<span class="string">'staff_name'</span>);</span><br><span class="line">           <span class="keyword">if</span>($staff_name) &#123;</span><br><span class="line">               <span class="keyword">if</span> (is_numeric($staff_name)) &#123;</span><br><span class="line">                   $map[<span class="string">"id|staff_name"</span>] = <span class="keyword">array</span>(intval($staff_name), <span class="keyword">array</span>(<span class="string">'like'</span>, <span class="string">'%'</span> . $staff_name . <span class="string">'%'</span>), <span class="string">'_multi'</span> =&gt; <span class="keyword">true</span>);</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   $map[<span class="string">'staff_name'</span>] = <span class="keyword">array</span>(<span class="string">'like'</span>, <span class="string">'%'</span> . (string)$staff_name . <span class="string">'%'</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           $xlsData = $xlsModel-&gt;Field($field)-&gt;where($map)-&gt;order(<span class="string">'id DESC'</span>)-&gt;select();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">foreach</span> ($xlsData <span class="keyword">as</span> $k =&gt; $v) &#123;</span><br><span class="line">           $xlsData[$k][<span class="string">'create_time'</span>] = $v[<span class="string">'create_time'</span>] == <span class="keyword">null</span> ? <span class="string">'-'</span> : date(<span class="string">"Y-m-d H:i"</span>,$v[<span class="string">'create_time'</span>]);</span><br><span class="line">           $xlsData[$k][<span class="string">'status'</span>] = $v[<span class="string">'status'</span>] == <span class="number">1</span> ? <span class="string">'正常'</span> : <span class="string">'禁用'</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       $excel-&gt;exportExcel($xlsName,$xlsCell,$xlsData);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="调用说明"><a href="#调用说明" class="headerlink" title="调用说明"></a>调用说明</h3><ol><li><p>第3行<br><code>$excel = A(&#39;Excel&#39;);</code><br>这个方法我写在了<code>Application/Admin/Controller/ExcelController.class.php</code>中，当前用的控制器是<code>MainController.class.php</code>，调用其他控制器中的方法，用TP中自带的<code>A()</code>，所以第51行，用的是<code>$excel-&gt;exportExcel($xlsName,$xlsCell,$xlsData);</code>，如果你的<code>exportExcel()</code>方法和当前调用的方法在同一个控制器内，那么第三行可以不写，第51行改成<code>$this-&gt;exportExcel($xlsName,$xlsCell,$xlsData);</code>。</p></li><li><p>第4行<br><code>$xlsCell</code>是导出这张表中所有的字段，以及字段的注释，导出后，不能把字段作为表格的列名，不知道数据库字段是什么意思的用户，看了这张表也不知所以然。</p></li><li><p>第17~24行<br>是根据<code>$xlsCell</code>数组中，提取出来字段名，作为一个字符串，在查询时使用。当然也可以把这个字段名的字符串手写出来，我这里用的是foreach处理。</p></li><li><p>第27~38行<br>是查询条件和查询结果，如果没有查询条件，想把整张表导出的话，直接用<code>$xlsData = $xlsModel-&gt;Field($field)-&gt;order(&#39;id DESC&#39;)-&gt;select();</code>即可。</p></li><li><p>第47~50行<br>是对<code>$xlsData</code>结果进行处理，我写的两个意思是：<br>1、当<code>create_time</code>字段为空的时候，值为 <code>-</code> ，有值的时候，就用<code>date()</code>函数把时间戳处理成日期；<br>2、当<code>status</code>字段的值为1的时候，显示为<code>正常</code>,当值为0的时候<code>禁用</code>。</p></li></ol><p><em>有点罗嗦了，见谅。</em></p><h2 id="模板文件"><a href="#模板文件" class="headerlink" title="模板文件"></a>模板文件</h2><p>模板文件很简单，就一个提交。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"&#123;:U('Main/msgOut')&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-form fr cf"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sleft"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"search-input"</span> <span class="attr">onClick</span>=<span class="string">"WdatePicker()"</span> <span class="attr">name</span>=<span class="string">"start_time"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer;"</span> <span class="attr">value</span>=<span class="string">"&#123;:I('start_time')&#125;"</span> <span class="attr">id</span>=<span class="string">"start"</span> <span class="attr">placeholder</span>=<span class="string">"开始日期"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"search-input"</span> <span class="attr">onClick</span>=<span class="string">"WdatePicker()"</span> <span class="attr">name</span>=<span class="string">"end_time"</span> <span class="attr">style</span>=<span class="string">"cursor: pointer;"</span> <span class="attr">value</span>=<span class="string">"&#123;:I('end_time')&#125;"</span> <span class="attr">id</span>=<span class="string">"end"</span> <span class="attr">placeholder</span>=<span class="string">"结束日期"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"staff_name"</span> <span class="attr">class</span>=<span class="string">"search-input"</span> <span class="attr">value</span>=<span class="string">"&#123;:I('staff_name')&#125;"</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">placeholder</span>=<span class="string">"输入推广专员的昵称或者ID"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">id</span>=<span class="string">"out"</span>&gt;</span>导出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>form</code>表单中三个<code>input</code>，是搜索条件，如果没有的话，直接写<code>button</code>即可。</p><h2 id="文章结束，欢迎转载。"><a href="#文章结束，欢迎转载。" class="headerlink" title="文章结束，欢迎转载。"></a>文章结束，欢迎转载。</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt; 本篇博客主要讲述，如何在thinkPHP中使用PHPExcel中导出Excel文件，是博主在实践了好多篇别人的帖子之后，总结归纳出来的文章，亲测可用。&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="原创" scheme="http://Mine-MuYan.github.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="ThinkPHP" scheme="http://Mine-MuYan.github.com/tags/ThinkPHP/"/>
    
      <category term="PHP" scheme="http://Mine-MuYan.github.com/tags/PHP/"/>
    
      <category term="PHPExcel" scheme="http://Mine-MuYan.github.com/tags/PHPExcel/"/>
    
  </entry>
  
  <entry>
    <title>wannacry病毒是纸老虎，没什么技术含量炒作过多</title>
    <link href="http://Mine-MuYan.github.com/2017/05/18/wannacry%E7%97%85%E6%AF%92%EF%BC%8C%E6%98%AF%E7%BA%B8%E8%80%81%E8%99%8E%EF%BC%8C%E6%B2%A1%E4%BB%80%E4%B9%88%E6%8A%80%E6%9C%AF%E5%90%AB%E9%87%8F%E7%82%92%E4%BD%9C%E8%BF%87%E5%A4%9A/"/>
    <id>http://Mine-MuYan.github.com/2017/05/18/wannacry病毒，是纸老虎，没什么技术含量炒作过多/</id>
    <published>2017-05-18T02:30:06.000Z</published>
    <updated>2020-03-24T06:42:08.862Z</updated>
    
    <content type="html"><![CDATA[<p>最近wannacry病毒席卷全球，也让其成为了媒体焦点，而国内的各个杀毒软件公司也趁机出动，帮助用户拦截病毒，确实做了很多好事。</p><p>虽然是好事，但我依然认为最近一轮的PR做的有点多，甚至拉动了整个杀毒概念股，这多少有点误导，所以这篇文章从产业和技术的角度再来谈谈wannacry病毒这件事。</p><a id="more"></a><hr><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>根据最新消息，比特币检测机构的数据显示wannacry的制作者们目前获得了7万美元的赎金。</p><p> 而造成如此全球大规模的破坏，最终只获得了7万美元的赎金，黑客们还要像淘宝客服一样一个个发货，清点仓库，不断研究新病毒，想想也真不容易。</p><p>简单的说，造成如此大规模破坏，与其最后的收益多少是不成正比的 ，就这点赎金，真的还不如卖上几个G的大公司数据库赚钱。</p><p>这种规模不经济背后，反应的是PC到移动的产业链变革，以及技术的变迁。</p><h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>先聊聊过去的黑客产业，确实非常发达。</p><p> <img src="//upload-images.jianshu.io/upload_images/4950628-e9936ba4eb3ed3d8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><p>以前的黑客都喜欢建立长期价值，更多都是在制作木马病毒，并实现对用户电脑的控制，业内简称“抓肉鸡”，这样就可以通过各种黑产来变现，我这里举3个关键产业。</p><p>CPA赚钱：即给各路软件，金山毒霸、360、9158等等进行每台机器的安装，每安装一台就会分成0.5-3元。</p><p>CPC赚钱：一般都是在利用肉鸡制造虚假的广告流量点击，或者用于服务器攻击，搜索引擎关键词欺骗，恶意点击对手关键词等等，总之都是在做违法流量。</p><p>盗号赚钱：比如说，淘宝上最早的半价QQ会员、黄钻、红钻、蓝钻、QB这些，都是黑客通过入侵宽带账号，对其进行的宽带费盗刷的结果。</p><p>当然，最赚钱的还是游戏账号，通过安装各类游戏密码，截获各游戏账号，当年比较火热的传奇、梦幻西游、仙剑、DNF等等。黑客一般都是先改密码再转移装备，在游戏中与其他玩家交易成金币后，然后放到淘宝上卖金币，最后还会再观察这个账号是否还会被找回，如果不被找回，那么就会也拿出来卖。</p><p>可以说，以前的PC时代，有着非常多的黑产变现手法，通过控制一台电脑，就能获得相当多的收益。</p><p>蠕虫病毒都是一波流，媒体一曝光全都见光死，漏洞补上就没机会了，高手黑客都是做木马病毒，控制电脑建立长期价值。</p><p>现在的黑客开始对PC电脑进行一波流的收割，是因为PC的商业时代过去了，都集中在移动手机了。</p><h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><p>既然智能手机的产业那么大，那黑客为什么不入侵安卓，IOS？</p><p> 这里我再从技术角度谈谈为什么智能手机大规模入侵为什么那么少。</p><p>因为权限问题。</p><p>PC电脑需要应对用户无数需求，编程需求、图像处理需求、显卡更换需求、内存更换需求…….</p><p>这些无数种乱七八糟的需求，导致了微软不得不做成极度开放的系统，让用户可以自由操控底层权限，自由拔插各种软硬件，这也导致了黑客更容易找到漏洞。</p><p>找到不是问题，问题是，一次入侵后就可以实现全面的掌控，比如你在国内安装一个软件，往往安装的都是全家桶，你随便点击一个“确定”，一堆软件就到桌面上了，任何软件都有能力操控底层代码，这是由于过分开放导致的必然结果。</p><p>智能手机的权限就比较严格。</p><p>安卓和苹果本质上都差不多，给软件的权限都非常严格，比如你要读取个通讯录是需要用户允许的，你要连接个wifi是需要用户允许的，你要后台跑流量还是需要用户允许的…….</p><p>这样就导致了杀毒软件只能在既定的范围内行事，能做的事情比较少，之前360由于越界还被苹果下架过，UBER也做出过出格行为被苹果约谈，可以看出苹果的监控有多严格。</p><p>这就保证了真正的底层权限都甚至不会被用户掌握，也自然不会下放给其他软件，你安装一个软件，也不会出现安装全家桶的现象。</p><p>对于智能手机而言，用户没事不会去换主板、换CPU、换各种设备，也不会用手机编程，需要底层环境变量配置，需要取得各种底层权限，因此智能手机的权限可以对用户实行全面封闭，即使root权限，也依然受到严格限制。</p><p>而这种权限设计，也导致了没有那么多的漏洞需要补，黑客入侵也非常困难。</p><h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2><p>当然，没有不能攻破的系统，智能手机的权限再严格，只要有利益在，还是挡不住黑客的。</p><p> 智能手机稍有入侵，还有个原因在于，黑产也受到了智能手机的冲击，很多黑产给断了。</p><p>比如CPC、CPA这种广告联盟变现逻辑，就很难通过强行静默安装的方式实现，因为没有权限。</p><p>而盗号产业，现在大家都是用手机注册各种账号，黑客必须实现短信拦截，这就导致了需要建伪基站，或者入侵用户的线上短信接收平台，等等，成本极高，机会也少。</p><p>当然，这么做最终依然无法实现盗号，因为账号都与手机绑定，一个验证码就能找回，根本不能永久拿下。</p><p>所以智能手机的黑产集中在了盗刷层面，之前网易邮箱账号泄露，就有大批的Appstore的账号被盗刷，被用于购买了各种游戏装备，但是只要用户通过合理的申诉，还是能够通过苹果找回，黑客弄了半天，其实很容易竹篮打水一场空。</p><p>另外，苹果手机此前也出现过勒索局面，黑客通过获得苹果账号，设置icloud丢失锁定手机，来要求用户赎回苹果账号。当然这和入侵无关，是低级的暴库行为，主要是下游产业链完成，没技术含量的。</p><p>所以，智能手机除了封锁权限，还把黑产财路也截断了很大一部分。</p><h2 id="5"><a href="#5" class="headerlink" title="5"></a>5</h2><p>PC和智能手机两边都在截断黑产收入，在这两边的收入锐减情况下，此次CY病毒选择了一波收割。</p><p> 但我依然认为CY只是纸老虎，一波收割的蠕虫病毒，不是建立对电脑的暗中长期控制，没什么吓人的。</p><p>公司或者机构电脑上可能会有值钱的资料，但是普通个人用户有多少值钱的资料？我认为绝大多数的人资料基本不会超 过300美元，## 如果绝大多数人的电脑资料超过300美元，那么此次黑客们都要赚翻了。## </p><p>举个 例子，比如说论文这种东西吧，300美元这么贵，在国内完全都可以找人代写了代发了，重写就行了，绝大多数人不会交这个赎金。</p><p>另外，现在都是云端时代，很多人都已经把资料放到云端，是云端实时备份的，电脑中毒对于这些已经备份云端的人群来说，一点都不重要。</p><p>再说学校机、加油站、出入境管理处的电脑中毒，我认为也不是什么大事，所有资料都在服务器里面，黑客入侵的不是后端服务器，一个前端电脑坏了重装就行了，用户的信息没丢就根本不是什么大事。</p><p>大惊小怪的往往是外行。</p><h2 id="6"><a href="#6" class="headerlink" title="6"></a>6</h2><p>说了这么多，既然手机的病毒木马都没啥怕的，都是纸老虎，那么真老虎是啥？</p><p> 真老虎是服务器入侵。</p><p>TOC越来越难以收割，因此这波黑产已经全面进入到TOB阶段，靠入侵各个公司，盗取数据库资料，这是远比非标准化的个人PC和智能收机入侵更赚钱的事情。</p><p>比如之前icloud的明星艳照，就非常值钱，刚开始能卖好多钱。再比如之前泄露的网易邮箱数据库、雅虎数据库、优酷数据库，58简历数据库等等，都是非常值钱的。</p><p>尤其是邮箱数据库，很多黑客可以通过邮箱数据库去盗刷各个游戏账号，锁定用户的icloud勒索，自己用完后最后再倒卖几波，虽然产业链下游的人辛苦点，但整个产业还是能赚很多。</p><p>不过以上依然不算是太严重的破坏。</p><p>各位想想，这次入侵只不过是在逼你删掉一些本来就没用的文件，但是如果这次攻击的不是PC电脑，而是服务器，黑客把各个国家公民的数据锁了（甚至连同各地备份服务器数据一起锁住），把你的房产信息锁了，那该有多可怕？</p><p>不过幸运的是，这次依然是低级入侵，其只不过是在利用微软3月份就已经打过补丁的漏洞在做事，高级的入侵是直接入侵服务器，大面积的入侵全球服务器的漏洞，这才是能够令人恐慌的。</p><h2 id="7"><a href="#7" class="headerlink" title="7"></a>7</h2><p>所以我认为，未来值得警惕的是服务器安全。</p><p> 但是这和360这些杀毒公司半毛钱都没有，因为现在都是云服务器，是AWS和阿里云的天下，要做好安全把控的是这些云服务商。</p><p>但对于这些云服务商来说，他们做的其实非常不错，一旦发现漏洞，就会立即全网打补丁，这种中心化的控制，不会错过一台电脑。相比于混乱的个人电脑，这种中心化的管理，更能够防御黑客的漏洞入侵。</p><p>所以云服务器的安全才是未来整个安全行业的焦点，这次如果要是aws和阿里云如果被入侵了，事情的严重程度就比较高了。</p><p>这次杀毒概念股疯长，我认为需要冷静，未来的安全攻防战一定是服务器端的，而不是用户端，杀毒软件依然是用户端产品。</p><h2 id="8"><a href="#8" class="headerlink" title="8"></a>8</h2><p>黑客 可以制造出这么严重的全球性破坏，却只收获了几万美元，还要充当客服角色，反映的是当前的黑产的整体萧条状况。</p><p>不过无论怎么样，杀毒软件们做的事情是对的，但是这种短期PR有些过头，个人安全并不是未来的发展方向，服务器安全才是，而杀毒软件要想获得全新的增长，则必须找到自己全新的增量。</p><p>而作为个人，将自己的资料同步到云端，其实比安装一个杀毒软件更重要。</p><p>作者微信公众号：“首席发言者”</p><p><em><div class="text-right"><a href="http://chengzhe.baijia.baidu.com/article/850921" target="_blank" rel="noopener">原文链接</a></div> </em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近wannacry病毒席卷全球，也让其成为了媒体焦点，而国内的各个杀毒软件公司也趁机出动，帮助用户拦截病毒，确实做了很多好事。&lt;/p&gt;
&lt;p&gt;虽然是好事，但我依然认为最近一轮的PR做的有点多，甚至拉动了整个杀毒概念股，这多少有点误导，所以这篇文章从产业和技术的角度再来谈谈wannacry病毒这件事。&lt;/p&gt;
    
    </summary>
    
      <category term="转载" scheme="http://Mine-MuYan.github.com/categories/%E8%BD%AC%E8%BD%BD/"/>
    
    
      <category term="互联网安全" scheme="http://Mine-MuYan.github.com/tags/%E4%BA%92%E8%81%94%E7%BD%91%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
</feed>
